import{c as I,_}from"./index-CW9Bv3xQ.js";import{_ as N}from"./Input.vue_vue_type_script_setup_true_lang-Da1-aMvk.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_0fe2f881_lang-DcvXf-iQ.js";import{C as P}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-Dkwl6_gP.js";import{S as R}from"./search-wO3vdVB2.js";import{X as q}from"./AppLayout.vue_vue_type_script_setup_true_lang-Ck0ITrji.js";import{d as F,m as p,p as h,s as U,z as y,A as $,f as u,o as s,a as d,h as b,w as x,b as i,t as f,u as c,l as k,c as j,F as A,r as Q}from"./app-CrbxPDKR.js";const T={"data-search-select":"",class:"relative"},X={class:"truncate"},G={class:"p-2 border-b border-border"},H={class:"relative"},J={class:"max-h-60 overflow-y-auto"},K=["onClick"],M={key:0,class:"flex flex-col"},W={class:"font-medium"},Y={class:"text-xs text-muted-foreground mt-0.5"},Z={key:1},ee={key:0,class:"px-2 py-3 text-center text-muted-foreground text-sm"},ue=F({__name:"SearchSelect",props:{modelValue:{},options:{},placeholder:{default:"Select an option"},searchPlaceholder:{default:"Search..."},class:{},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(w,{emit:C}){const l=w,V=C,r=p(!1),a=p(""),n=p(),S=p(),v=h(()=>l.options.find(e=>e.value===l.modelValue)),L=h(()=>v.value?v.value.label:l.placeholder),g=h(()=>{if(!a.value)return l.options;const e=a.value.toLowerCase().trim();return l.options.filter(t=>t.value===null&&t.label.toLowerCase().includes("select")?!1:t.label.toLowerCase().includes(e))});function B(){l.disabled||(r.value=!r.value)}function D(e,t){t&&(t.preventDefault(),t.stopPropagation()),V("update:modelValue",e.value),r.value=!1,a.value=""}function O(e){e&&(e.preventDefault(),e.stopPropagation()),a.value="",y(()=>{n.value&&typeof n.value.focus=="function"&&n.value.focus()})}function z(e){const t=e.target;a.value=t.value}function m(e){e.target.closest("[data-search-select]")||(r.value=!1,a.value="")}return U(r,e=>{e?y(()=>{document.addEventListener("click",m),n.value&&typeof n.value.focus=="function"&&n.value.focus()}):(document.removeEventListener("click",m),a.value="")}),$(()=>{document.removeEventListener("click",m)}),(e,t)=>(s(),u("div",T,[d(c(_),{type:"button",variant:"outline",class:k(c(I)("w-full justify-between border-input bg-transparent text-foreground dark:bg-input/30 hover:bg-accent hover:text-accent-foreground","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] focus-visible:outline-none",r.value&&"border-ring",!v.value&&"text-muted-foreground",l.class)),disabled:e.disabled,onClick:B},{default:x(()=>[i("span",X,f(L.value),1),d(c(P),{class:"h-4 w-4 opacity-50"})]),_:1},8,["class","disabled"]),r.value?(s(),u("div",{key:0,ref_key:"dropdownRef",ref:S,class:"absolute top-full left-0 right-0 z-50 mt-1 bg-popover text-popover-foreground border border-border rounded-md shadow-lg p-0"},[i("div",G,[i("div",H,[d(c(R),{class:"absolute left-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),d(c(N),{ref_key:"searchInputRef",ref:n,modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=o=>a.value=o),placeholder:e.searchPlaceholder,class:"pl-8 pr-8 border-0 bg-transparent focus-visible:ring-0 focus-visible:ring-offset-0",onInput:z},null,8,["modelValue","placeholder"]),a.value?(s(),j(c(_),{key:0,type:"button",variant:"ghost",size:"sm",class:"absolute right-1 top-1/2 transform -translate-y-1/2 h-6 w-6 p-0",onClick:t[1]||(t[1]=o=>O(o))},{default:x(()=>[d(c(q),{class:"h-3 w-3"})]),_:1})):b("",!0)])]),i("div",J,[(s(!0),u(A,null,Q(g.value,o=>(s(),u("button",{key:String(o.value??"null"),type:"button",onClick:E=>D(o,E),class:k(["w-full px-2 py-1.5 text-left text-sm cursor-pointer transition-colors",o.value===e.modelValue?"bg-accent text-accent-foreground":"hover:bg-accent hover:text-accent-foreground"])},[o.description?(s(),u("div",M,[i("span",W,f(o.label),1),i("span",Y,f(o.description),1)])):(s(),u("span",Z,f(o.label),1))],10,K))),128)),a.value&&g.value.length===0?(s(),u("div",ee,' No results found for "'+f(a.value)+'" ',1)):b("",!0)])],512)):b("",!0)]))}});export{ue as _};
