import{d as S,D as h,c as E,o as u,w as o,a as t,b as i,u as d,g as P,e as m,q as B,A as C,B as N,f as p,F as c,r as g,t as x,S as R}from"./app-D8GMqoQL.js";import{_ as b}from"./index-CKTUUg4B.js";import{_ as U}from"./AppLayout.vue_vue_type_script_setup_true_lang-B7FY6UE4.js";import{_ as V,a as j}from"./CardContent.vue_vue_type_script_setup_true_lang-zCpbmRui.js";import{_ as q,a as D}from"./CardTitle.vue_vue_type_script_setup_true_lang-COI8iZOX.js";import{_ as A}from"./CardFooter.vue_vue_type_script_setup_true_lang-D0OErrDq.js";import{_ as F}from"./Checkbox.vue_vue_type_script_setup_true_lang-CXYymjMx.js";import{_}from"./Label.vue_vue_type_script_setup_true_lang-Dc3JaC7p.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_0fe2f881_lang-Ay1pUOAN.js";import"./RovingFocusGroup-B0Y8hFFN.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DtVqRXXk.js";import"./createLucideIcon-sEmkw9Pt.js";import"./VisuallyHidden-DKr5urU_.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BH_Bl99z.js";import"./chevron-right-CmK6lVL2.js";import"./RovingFocusItem-Bxwh9FLF.js";import"./check-Tmd15_t4.js";const M={class:"flex gap-4"},T={class:"flex-1"},G={class:"flex-1"},L={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},z={class:"flex items-center justify-between mb-2"},H={class:"font-semibold"},I=["onClick"],J={class:"grid gap-2"},me=S({__name:"Edit",props:{role:{},groupedPermissions:{},rolePermissions:{}},setup(v){const l=v,s=h({name:l.role.name,guard_name:l.role.guard_name,permissions:[...l.rolePermissions]}),y=[{title:"Roles",href:"/roles"},{title:"Edit Role",href:`/roles/${l.role.id}/edit`}];function k(n){s.permissions.includes(n)?s.permissions=s.permissions.filter(e=>e!==n):s.permissions.push(n)}function $(n){const e=l.groupedPermissions[n].map(r=>r.id);e.every(r=>s.permissions.includes(r))?s.permissions=s.permissions.filter(r=>!e.includes(r)):s.permissions=[...new Set([...s.permissions,...e])]}function w(){s.put(route("roles.update",l.role.id),{preserveScroll:!0})}return(n,e)=>(u(),E(U,{breadcrumbs:y},{default:o(()=>[t(d(P),{title:"Edit Role"}),e[7]||(e[7]=i("div",{class:"flex items-center justify-between mb-6"},[i("h1",{class:"text-2xl font-bold"},"Edit Role")],-1)),t(V,null,{default:o(()=>[t(q,null,{default:o(()=>[t(D,null,{default:o(()=>e[1]||(e[1]=[m("Edit Role")])),_:1,__:[1]})]),_:1}),t(j,null,{default:o(()=>[i("form",{onSubmit:B(w,["prevent"]),class:"space-y-6"},[i("div",M,[i("div",T,[t(_,{for:"name"},{default:o(()=>e[2]||(e[2]=[m("Name")])),_:1,__:[2]}),C(i("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=f=>d(s).name=f),class:"w-full rounded border px-3 py-2 mt-1",required:""},null,512),[[N,d(s).name]])]),i("div",G,[t(_,{for:"guard_name"},{default:o(()=>e[3]||(e[3]=[m("Guard Name")])),_:1,__:[3]}),e[4]||(e[4]=i("input",{id:"guard_name","disabledv-model":"form.guard_name",class:"w-full rounded border px-3 py-2 mt-1",required:""},null,-1))])]),i("div",L,[(u(!0),p(c,null,g(l.groupedPermissions,(f,r)=>(u(),p("div",{key:r,class:"rounded border p-4"},[i("div",z,[i("span",H,x(r),1),i("button",{type:"button",class:"text-xs text-primary underline",onClick:a=>$(r)}," Select all ",8,I)]),i("div",J,[(u(!0),p(c,null,g(f,a=>(u(),p("div",{key:a.id,class:"flex items-center gap-2"},[t(F,{id:"perm-"+a.id,checked:d(s).permissions.includes(a.id),"onUpdate:checked":()=>k(a.id)},null,8,["id","checked","onUpdate:checked"]),t(_,{for:"perm-"+a.id},{default:o(()=>[m(x(a.name),1)]),_:2},1032,["for"])]))),128))])]))),128))]),t(A,{class:"flex gap-2 justify-end"},{default:o(()=>[t(d(b),{type:"submit",variant:"default"},{default:o(()=>e[5]||(e[5]=[m("Update")])),_:1,__:[5]}),t(d(R),{href:n.route("roles.index")},{default:o(()=>[t(d(b),{type:"button",variant:"ghost"},{default:o(()=>e[6]||(e[6]=[m("Cancel")])),_:1,__:[6]})]),_:1},8,["href"])]),_:1})],32)]),_:1})]),_:1})]),_:1,__:[7]}))}});export{me as default};
