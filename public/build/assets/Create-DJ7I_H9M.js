import{d as h,D as B,c as R,o as u,w as o,a as t,b as r,u as l,g as N,h as m,E as P,x as c,y as g,e as f,F as x,r as b,t as v,S as V}from"./app-DFV75mBf.js";import{_ as y}from"./index-Cq-jLiLx.js";import{_ as U}from"./AppLayout.vue_vue_type_script_setup_true_lang-DSSSnv_7.js";import{_ as j,a as D}from"./CardContent.vue_vue_type_script_setup_true_lang-BdSOOKEE.js";import{_ as q,a as E}from"./CardTitle.vue_vue_type_script_setup_true_lang-_U7A67EF.js";import{_ as F}from"./CardFooter.vue_vue_type_script_setup_true_lang-Dla22Iba.js";import{_ as M}from"./Checkbox.vue_vue_type_script_setup_true_lang-ClZnDf9x.js";import{_ as p}from"./Label.vue_vue_type_script_setup_true_lang-CrmozfEn.js";import{S as T}from"./sweetalert2.esm.all-BQIkj5Wb.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_807a495d_lang-C5_-5mdN.js";import"./useForwardPropsEmits-cDFu6SMJ.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-BbW58MAF.js";import"./createLucideIcon-B3Xwb4hu.js";import"./Teleport-DEuPysO7.js";import"./RovingFocusGroup-Du4voUoU.js";import"./VisuallyHidden-D7jdQsi1.js";import"./x-DeaXVSEy.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-uZfJ_4qz.js";import"./chevron-right-CVvHX4TP.js";import"./RovingFocusItem-BaQ90V-J.js";import"./check-DWwv0kKZ.js";const A={class:"flex gap-4"},G={class:"flex-1"},L={class:"flex-1"},z={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},H={class:"flex items-center justify-between mb-2"},I={class:"font-semibold"},J=["onClick"],K={class:"grid gap-2"},ce=h({__name:"Create",props:{groupedPermissions:{}},setup(w){const _=w,s=B({name:"",guard_name:"web",permissions:[]}),C=[{title:"Roles",href:"/roles"},{title:"Create Role",href:"/roles/create"}];function S(a){s.permissions.includes(a)?s.permissions=s.permissions.filter(e=>e!==a):s.permissions.push(a)}function k(a){const e=_.groupedPermissions[a].map(i=>i.id);e.every(i=>s.permissions.includes(i))?s.permissions=s.permissions.filter(i=>!e.includes(i)):s.permissions=[...new Set([...s.permissions,...e])]}function $(){s.post(route("roles.store"),{preserveScroll:!0,onSuccess:()=>{T.fire({toast:!0,position:"top-end",icon:"success",title:"Role created successfully",showConfirmButton:!1,timer:3e3,timerProgressBar:!0})}})}return(a,e)=>(u(),R(U,{breadcrumbs:C},{default:o(()=>[t(l(N),{title:"Create Role"}),e[8]||(e[8]=r("div",{class:"flex items-center justify-between mb-6"},[r("h1",{class:"text-2xl font-bold"},"Create Role")],-1)),t(j,null,{default:o(()=>[t(q,null,{default:o(()=>[t(E,null,{default:o(()=>e[3]||(e[3]=[m("Create Role")])),_:1,__:[3]})]),_:1}),t(D,null,{default:o(()=>[r("form",{onSubmit:e[2]||(e[2]=P(n=>$(),["prevent"])),class:"space-y-6"},[r("div",A,[r("div",G,[t(p,{for:"name"},{default:o(()=>e[4]||(e[4]=[m("Name")])),_:1,__:[4]}),c(r("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=n=>l(s).name=n),class:"w-full rounded border px-3 py-2 mt-1",required:""},null,512),[[g,l(s).name]])]),r("div",L,[t(p,{for:"guard_name"},{default:o(()=>e[5]||(e[5]=[m("Guard Name")])),_:1,__:[5]}),c(r("input",{id:"guard_name",disabled:"","onUpdate:modelValue":e[1]||(e[1]=n=>l(s).guard_name=n),class:"w-full rounded border px-3 py-2 mt-1",required:""},null,512),[[g,l(s).guard_name]])])]),r("div",z,[(u(!0),f(x,null,b(_.groupedPermissions,(n,i)=>(u(),f("div",{key:i,class:"rounded border p-4"},[r("div",H,[r("span",I,v(i),1),r("button",{type:"button",class:"text-xs text-primary underline",onClick:d=>k(i)}," Select all ",8,J)]),r("div",K,[(u(!0),f(x,null,b(n,d=>(u(),f("div",{key:d.id,class:"flex items-center gap-2"},[t(M,{id:"perm-"+d.id,checked:l(s).permissions.includes(d.id),"onUpdate:checked":()=>S(d.id)},null,8,["id","checked","onUpdate:checked"]),t(p,{for:"perm-"+d.id},{default:o(()=>[m(v(d.name),1)]),_:2},1032,["for"])]))),128))])]))),128))]),t(F,{class:"flex gap-2 justify-end"},{default:o(()=>[t(l(y),{type:"submit",variant:"default"},{default:o(()=>e[6]||(e[6]=[m("Create")])),_:1,__:[6]}),t(l(V),{href:a.route("roles.index")},{default:o(()=>[t(l(y),{type:"button",variant:"ghost"},{default:o(()=>e[7]||(e[7]=[m("Cancel")])),_:1,__:[7]})]),_:1},8,["href"])]),_:1})],32)]),_:1})]),_:1})]),_:1,__:[8]}))}});export{ce as default};
