import{d as h,x as B,a as R,o as u,w as r,b as t,e as o,u as a,k as N,f as m,q as P,m as v,v as b,g as f,F as x,h as y,t as C,S as V}from"./app-WiUpeBwz.js";import{_ as p}from"./index-Cn_g6VzM.js";import{_ as U}from"./AppLayout.vue_vue_type_script_setup_true_lang-asCoNTCN.js";import{_ as j,a as q}from"./CardContent.vue_vue_type_script_setup_true_lang-C1Ro3lXn.js";import{a as D,_ as F}from"./CardTitle.vue_vue_type_script_setup_true_lang-CL8KIKUs.js";import{_ as M}from"./CardFooter.vue_vue_type_script_setup_true_lang-BpozAbEV.js";import{_ as T}from"./Checkbox.vue_vue_type_script_setup_true_lang-DkGxlzx6.js";import{_}from"./Label.vue_vue_type_script_setup_true_lang-CyKS2_tF.js";import{S as E}from"./sweetalert2.esm.all-BQIkj5Wb.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_5601c0ff_lang-DTIP4i8X.js";import"./RovingFocusGroup-DA_UrK7F.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-BUpirRbf.js";import"./createLucideIcon-DXTUwZoB.js";import"./VisuallyHidden-CHKbz_EY.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-4xCIPFzj.js";import"./check-BvvOLg0r.js";const G={class:"flex gap-4"},L={class:"flex-1"},z={class:"flex-1"},A={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},H={class:"flex items-center justify-between mb-2"},I={class:"font-semibold"},J=["onClick"],K={class:"grid gap-2"},me=h({__name:"Create",props:{groupedPermissions:{}},setup(k){const c=k,s=B({name:"",guard_name:"web",permissions:[],create_another:void 0}),w=[{title:"Roles",href:"/roles"},{title:"Create Role",href:"/roles/create"}];function S(i){s.permissions.includes(i)?s.permissions=s.permissions.filter(e=>e!==i):s.permissions.push(i)}function $(i){const e=c.groupedPermissions[i].map(l=>l.id);e.every(l=>s.permissions.includes(l))?s.permissions=s.permissions.filter(l=>!e.includes(l)):s.permissions=[...new Set([...s.permissions,...e])]}function g(i=!1){i?s.create_another=1:delete s.create_another,s.post(route("roles.store"),{preserveScroll:!0,onSuccess:()=>{E.fire({toast:!0,position:"top-end",icon:"success",title:"Role created successfully",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}),i&&(s.reset(),s.permissions=[])}})}return(i,e)=>(u(),R(U,{breadcrumbs:w},{default:r(()=>[t(a(N),{title:"Create Role"}),e[10]||(e[10]=o("div",{class:"flex items-center justify-between mb-6"},[o("h1",{class:"text-2xl font-bold"},"Create Role")],-1)),t(j,null,{default:r(()=>[t(D,null,{default:r(()=>[t(F,null,{default:r(()=>e[4]||(e[4]=[m("Create Role")])),_:1,__:[4]})]),_:1}),t(q,null,{default:r(()=>[o("form",{onSubmit:e[3]||(e[3]=P(n=>g(),["prevent"])),class:"space-y-6"},[o("div",G,[o("div",L,[t(_,{for:"name"},{default:r(()=>e[5]||(e[5]=[m("Name")])),_:1,__:[5]}),v(o("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=n=>a(s).name=n),class:"w-full rounded border px-3 py-2 mt-1",required:""},null,512),[[b,a(s).name]])]),o("div",z,[t(_,{for:"guard_name"},{default:r(()=>e[6]||(e[6]=[m("Guard Name")])),_:1,__:[6]}),v(o("input",{id:"guard_name",disabled:"","onUpdate:modelValue":e[1]||(e[1]=n=>a(s).guard_name=n),class:"w-full rounded border px-3 py-2 mt-1",required:""},null,512),[[b,a(s).guard_name]])])]),o("div",A,[(u(!0),f(x,null,y(c.groupedPermissions,(n,l)=>(u(),f("div",{key:l,class:"rounded border p-4"},[o("div",H,[o("span",I,C(l),1),o("button",{type:"button",class:"text-xs text-primary underline",onClick:d=>$(l)}," Select all ",8,J)]),o("div",K,[(u(!0),f(x,null,y(n,d=>(u(),f("div",{key:d.id,class:"flex items-center gap-2"},[t(T,{id:"perm-"+d.id,checked:a(s).permissions.includes(d.id),"onUpdate:checked":()=>S(d.id)},null,8,["id","checked","onUpdate:checked"]),t(_,{for:"perm-"+d.id},{default:r(()=>[m(C(d.name),1)]),_:2},1032,["for"])]))),128))])]))),128))]),t(M,{class:"flex gap-2 justify-end"},{default:r(()=>[t(a(p),{type:"submit",variant:"default"},{default:r(()=>e[7]||(e[7]=[m("Create")])),_:1,__:[7]}),t(a(p),{type:"button",variant:"secondary",onClick:e[2]||(e[2]=n=>g(!0))},{default:r(()=>e[8]||(e[8]=[m("Create & create another")])),_:1,__:[8]}),t(a(V),{href:i.route("roles.index")},{default:r(()=>[t(a(p),{type:"button",variant:"ghost"},{default:r(()=>e[9]||(e[9]=[m("Cancel")])),_:1,__:[9]})]),_:1},8,["href"])]),_:1})],32)]),_:1})]),_:1})]),_:1,__:[10]}))}});export{me as default};
