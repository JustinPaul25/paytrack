import{d as Y,v as G,m as C,I as q,s as J,W as h,c as v,o as a,w as o,a as r,b as e,u as s,g as K,T as O,x as M,t as d,G as Q,y as X,h as u,l as z,e as g,S as x,f as p,F as Z,r as ee}from"./app-DUIMFX_A.js";import{_ as c}from"./index-Dxf5YqNL.js";import{_ as te}from"./AppLayout.vue_vue_type_script_setup_true_lang-DAHgTxb6.js";import{_,a as w}from"./CardContent.vue_vue_type_script_setup_true_lang-ByRIc-rN.js";import{_ as S}from"./Icon.vue_vue_type_script_setup_true_lang-CqZQopkR.js";import{S as P}from"./sweetalert2.esm.all-BQIkj5Wb.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_0fe2f881_lang-BY68ETEx.js";import"./RovingFocusGroup-DcxPmAMj.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DHUSPf84.js";import"./createLucideIcon-C1gR3juK.js";import"./VisuallyHidden-CZVcGhWB.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-C23Np2nS.js";import"./chevron-right-qIRM7f6o.js";import"./square-pen-DS6o79vG.js";import"./calendar-DznVeivE.js";import"./check-DCjA4zR4.js";import"./chevron-left-DmWC50rx.js";import"./circle-alert-DhMkJ3ae.js";import"./piggy-bank-CaBTMVtq.js";import"./circle-check-big-Dzeqc7wJ.js";import"./message-square-BOlRu3rc.js";import"./trophy-Bhlx2R6a.js";import"./plus-BgqmKOYG.js";import"./clock-CHrV3lBf.js";import"./dollar-sign-ChAMxcRD.js";import"./eye-off-hmKhOMyV.js";import"./eye-DC-K2txZ.js";import"./loader-circle-1n2-Q_Vi.js";import"./map-pin-CSsnqjTt.js";import"./sun-BD2ZqtFO.js";import"./printer-D3EYOtOj.js";import"./search-Ds8mJbb0.js";import"./shopping-bag-DT7Y0doI.js";import"./trash-2-DKzb3xXI.js";import"./trending-up-BcrshX1s.js";import"./user-cog-DzWKpM0B.js";const se={class:"grid grid-cols-1 lg:grid-cols-4 gap-6 mt-8 mb-6"},oe={class:"flex items-center justify-between"},re={class:"text-xl font-bold text-blue-600"},le={class:"flex items-center justify-between"},ie={class:"text-xl font-bold text-green-600"},ne={class:"flex items-center justify-between"},ae={class:"text-xl font-bold text-yellow-600"},de={class:"flex items-center justify-between"},ue={class:"text-xl font-bold text-emerald-600"},pe={class:"flex items-center justify-between mt-4 mb-2"},ce={class:"flex gap-2 items-center"},me={class:"flex items-center gap-2"},fe={key:0},ve={key:0,class:"py-12 text-center"},ge={class:"flex items-center justify-center gap-2"},xe={key:1,class:"py-12 text-center"},ye={key:0,class:"text-sm text-gray-600 mb-6"},he={key:1},_e={class:"min-w-full divide-y divide-border"},we={class:"px-4 py-2 font-medium"},ke={class:"px-4 py-2"},be={class:"font-medium"},Ce={key:0,class:"text-sm text-gray-500"},Se={class:"px-4 py-2 font-medium"},je={class:"px-4 py-2"},Ie={class:"px-4 py-2"},Be={class:"px-4 py-2 text-sm text-gray-500"},Te={class:"px-4 py-2"},ze={class:"flex gap-2"},Pe={key:0,class:"flex items-center justify-between mt-6"},$e={class:"text-sm text-gray-700"},De={class:"flex gap-2"},Ve={class:"fixed bottom-6 right-6 z-50"},Ae={key:0,class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Me={key:1,class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},_t=Y({__name:"Index",setup(Ne){var A;const l=G(),j=Array.isArray((A=l.props.auth)==null?void 0:A.userRoles)?l.props.auth.userRoles:[];j.includes("Customer");const I=j.includes("Admin"),B=j.includes("Staff"),k=B&&!I,$=B&&!I,N=B&&!I,b=C(l.props.filters?l.props.filters:{}),f=C(typeof b.value.search=="string"?b.value.search:""),m=C(typeof b.value.status=="string"?b.value.status:""),y=C(!1),F=[{title:"Invoices",href:"/invoices"}];q(()=>{f.value=l.props.filters&&typeof l.props.filters.search=="string"?l.props.filters.search:"",m.value=l.props.filters&&typeof l.props.filters.status=="string"?l.props.filters.status:""});let T=null;J(f,n=>{T&&clearTimeout(T),T=setTimeout(()=>{h.get("/invoices",{search:n||void 0,status:m.value||void 0},{preserveState:!0,replace:!0})},400)});function D(n){h.get("/invoices",{search:f.value||void 0,status:m.value||void 0,page:n},{preserveState:!0,replace:!0})}async function E(n){(await P.fire({title:"Delete this invoice?",text:"This will remove the invoice permanently. You canâ€™t undo this.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#8f5be8",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it"})).isConfirmed&&h.delete(`/invoices/${n}`,{onSuccess:()=>{P.fire("Deleted","The invoice was deleted.","success")}})}function H(n){h.post(route("invoices.markPaid",n),{},{preserveScroll:!0,onSuccess:()=>{P.fire({toast:!0,position:"top-end",icon:"success",title:"Invoice marked as paid",showConfirmButton:!1,timer:2e3})}})}function R(n){switch(n){case"draft":return"bg-gray-100 text-gray-800";case"pending":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}function V(n){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(n)}function U(){m.value=m.value==="pending"?"":"pending",h.get("/invoices",{search:f.value||void 0,status:m.value||void 0},{preserveState:!0,replace:!0})}function L(n){return new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"2-digit"})}return(n,t)=>(a(),v(te,{breadcrumbs:F},{default:o(()=>[r(s(K),{title:"Invoices"}),r(O,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 transform -translate-y-4","enter-to-class":"opacity-100 transform translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 transform translate-y-0","leave-to-class":"opacity-0 transform -translate-y-4"},{default:o(()=>[M(e("div",se,[r(_,{class:"relative overflow-hidden"},{default:o(()=>[r(w,{class:"p-6"},{default:o(()=>[e("div",oe,[e("div",null,[t[5]||(t[5]=e("p",{class:"text-sm font-medium text-muted-foreground"},"Total Invoices",-1)),e("p",re,d(s(l).props.stats.totalInvoices),1)]),t[6]||(t[6]=e("div",{class:"h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1))])]),_:1})]),_:1}),r(_,{class:"relative overflow-hidden"},{default:o(()=>[r(w,{class:"p-6"},{default:o(()=>[e("div",le,[e("div",null,[t[7]||(t[7]=e("p",{class:"text-sm font-medium text-muted-foreground"},"Total Amount",-1)),e("p",ie,d(V(s(l).props.stats.totalAmount)),1)]),t[8]||(t[8]=e("div",{class:"h-12 w-12 rounded-full bg-green-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1))])]),_:1})]),_:1}),r(_,{class:"relative overflow-hidden"},{default:o(()=>[r(w,{class:"p-6"},{default:o(()=>[e("div",ne,[e("div",null,[t[9]||(t[9]=e("p",{class:"text-sm font-medium text-muted-foreground"},"Pending",-1)),e("p",ae,d(s(l).props.stats.pendingInvoices),1)]),t[10]||(t[10]=e("div",{class:"h-12 w-12 rounded-full bg-yellow-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])]),_:1})]),_:1}),r(_,{class:"relative overflow-hidden"},{default:o(()=>[r(w,{class:"p-6"},{default:o(()=>[e("div",de,[e("div",null,[t[11]||(t[11]=e("p",{class:"text-sm font-medium text-muted-foreground"},"Paid",-1)),e("p",ue,d(s(l).props.stats.paidInvoices),1)]),t[12]||(t[12]=e("div",{class:"h-12 w-12 rounded-full bg-emerald-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])]),_:1})]),_:1})],512),[[Q,y.value]])]),_:1}),e("div",pe,[e("div",ce,[M(e("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>f.value=i),type:"text",placeholder:"Search by customer name",class:"rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[X,f.value]])]),e("div",me,[r(s(c),{variant:"outline",class:z(m.value==="pending"?"border-yellow-400 text-yellow-600 bg-yellow-50":""),onClick:U},{default:o(()=>t[13]||(t[13]=[g(" Unpaid ")])),_:1,__:[13]},8,["class"]),s(k)?(a(),v(s(x),{key:0,href:n.route("invoices.create")},{default:o(()=>[r(s(c),{variant:"default"},{default:o(()=>t[14]||(t[14]=[e("span",{class:"mr-2"},"+",-1),g(" Add New Invoice ")])),_:1,__:[14]})]),_:1},8,["href"])):u("",!0)])]),r(_,null,{default:o(()=>[r(w,null,{default:o(()=>[s(l).props.invoices.data.length===0?(a(),p("div",fe,[f.value&&f.value.trim().length||m.value&&m.value.trim().length?(a(),p("div",ve,[t[17]||(t[17]=e("div",{class:"text-xl font-semibold mb-2"},"No results found",-1)),t[18]||(t[18]=e("p",{class:"text-sm text-gray-600 mb-6"}," We couldn't find any invoices matching your search/filter. ",-1)),e("div",ge,[r(s(c),{variant:"outline",onClick:t[1]||(t[1]=i=>{f.value="",m.value=""})},{default:o(()=>t[15]||(t[15]=[g("Clear search")])),_:1,__:[15]}),s(k)?(a(),v(s(x),{key:0,href:n.route("invoices.create")},{default:o(()=>[r(s(c),{variant:"default"},{default:o(()=>t[16]||(t[16]=[e("span",{class:"mr-2"},"+",-1),g(" Create Invoice ")])),_:1,__:[16]})]),_:1},8,["href"])):u("",!0)])])):(a(),p("div",xe,[t[20]||(t[20]=e("div",{class:"text-xl font-semibold mb-2"},"No invoices yet",-1)),s(k)?(a(),p("p",ye,"Create your first invoice to get started.")):u("",!0),s(k)?(a(),v(s(x),{key:1,href:n.route("invoices.create")},{default:o(()=>[r(s(c),{variant:"default"},{default:o(()=>t[19]||(t[19]=[e("span",{class:"mr-2"},"+",-1),g(" Create Invoice ")])),_:1,__:[19]})]),_:1},8,["href"])):u("",!0)]))])):(a(),p("div",he,[e("table",_e,[t[25]||(t[25]=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 text-left"},"Reference #"),e("th",{class:"px-4 py-2 text-left"},"Customer"),e("th",{class:"px-4 py-2 text-left"},"Total"),e("th",{class:"px-4 py-2 text-left"},"Status"),e("th",{class:"px-4 py-2 text-left"},"Payment"),e("th",{class:"px-4 py-2 text-left"},"Date"),e("th",{class:"px-4 py-2 text-left"},"Actions")])],-1)),e("tbody",null,[(a(!0),p(Z,null,ee(s(l).props.invoices.data,i=>(a(),p("tr",{key:i.id,class:"hover:bg-muted"},[e("td",we,[r(s(x),{href:n.route("invoices.show",i.id),class:"underline underline-offset-4"},{default:o(()=>[g(d(i.reference_number),1)]),_:2},1032,["href"])]),e("td",ke,[e("div",null,[e("div",be,d(i.customer.name),1),i.customer.company_name?(a(),p("div",Ce,d(i.customer.company_name),1)):u("",!0)])]),e("td",Se,d(V(i.total_amount)),1),e("td",je,[e("span",{class:z(["px-2 py-1 rounded-full text-xs font-medium",R(i.status)])},d(i.status.charAt(0).toUpperCase()+i.status.slice(1)),3)]),e("td",Ie,d(i.payment_method.replace("_"," ")),1),e("td",Be,d(L(i.created_at)),1),e("td",Te,[e("div",ze,[r(s(x),{href:n.route("invoices.show",i.id)},{default:o(()=>[r(s(c),{variant:"ghost",size:"sm"},{default:o(()=>[r(S,{name:"eye",class:"h-4 w-4"}),t[21]||(t[21]=e("span",{class:"ml-1"},"View",-1))]),_:1,__:[21]})]),_:2},1032,["href"]),s($)?(a(),v(s(x),{key:0,href:n.route("invoices.edit",i.id)},{default:o(()=>[r(s(c),{variant:"ghost",size:"sm"},{default:o(()=>[r(S,{name:"edit",class:"h-4 w-4"}),t[22]||(t[22]=e("span",{class:"ml-1"},"Edit",-1))]),_:1,__:[22]})]),_:2},1032,["href"])):u("",!0),s($)&&i.status==="pending"?(a(),v(s(c),{key:1,variant:"ghost",size:"sm",onClick:W=>H(i.id)},{default:o(()=>[r(S,{name:"check",class:"h-4 w-4"}),t[23]||(t[23]=e("span",{class:"ml-1"},"Mark as Paid",-1))]),_:2,__:[23]},1032,["onClick"])):u("",!0),s(N)?(a(),v(s(c),{key:2,variant:"ghost",size:"sm",onClick:W=>E(i.id)},{default:o(()=>[r(S,{name:"trash",class:"h-4 w-4"}),t[24]||(t[24]=e("span",{class:"ml-1"},"Delete",-1))]),_:2,__:[24]},1032,["onClick"])):u("",!0)])])]))),128))])]),s(l).props.invoices.last_page>1?(a(),p("div",Pe,[e("div",$e," Showing "+d(s(l).props.invoices.from)+" to "+d(s(l).props.invoices.to)+" of "+d(s(l).props.invoices.total)+" results ",1),e("div",De,[s(l).props.invoices.prev_page_url?(a(),v(s(c),{key:0,variant:"outline",size:"sm",onClick:t[2]||(t[2]=i=>D(s(l).props.invoices.current_page-1))},{default:o(()=>t[26]||(t[26]=[g(" Previous ")])),_:1,__:[26]})):u("",!0),s(l).props.invoices.next_page_url?(a(),v(s(c),{key:1,variant:"outline",size:"sm",onClick:t[3]||(t[3]=i=>D(s(l).props.invoices.current_page+1))},{default:o(()=>t[27]||(t[27]=[g(" Next ")])),_:1,__:[27]})):u("",!0)])])):u("",!0)]))]),_:1})]),_:1}),e("div",Ve,[e("button",{onClick:t[4]||(t[4]=i=>y.value=!y.value),class:z(["h-12 w-12 rounded-full shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center",y.value?"bg-red-500 hover:bg-red-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"])},[y.value?(a(),p("svg",Me,t[29]||(t[29]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)]))):(a(),p("svg",Ae,t[28]||(t[28]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},null,-1)])))],2)])]),_:1}))}});export{_t as default};
