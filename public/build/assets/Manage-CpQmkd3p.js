import{d as w,E as B,c as f,o as l,w as a,a as r,b as t,u as o,g as R,W as p,e as i,f as d,F as S,r as N,t as u,S as P,x as $,h as v}from"./app-t40oy0qQ.js";import{_ as z}from"./AppLayout.vue_vue_type_script_setup_true_lang-CylBytAS.js";import{_ as I,a as E}from"./CardContent.vue_vue_type_script_setup_true_lang-fpDXvKRZ.js";import{_ as A,a as T}from"./CardTitle.vue_vue_type_script_setup_true_lang-DibdpYuD.js";import{_ as m}from"./index-VOqVSyLk.js";import{S as y}from"./sweetalert2.esm.all-BQIkj5Wb.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_0fe2f881_lang-DVnAmXFJ.js";import"./RovingFocusGroup-CUnu6A6r.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CbeqhPF_.js";import"./createLucideIcon-DERR9B5J.js";import"./VisuallyHidden-BBCMANA8.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CiqG73Ph.js";const V={class:"flex items-center justify-between my-6"},q={class:"flex gap-2"},F=["value"],M={key:0,class:"py-8 text-center text-sm text-gray-500"},D={key:0},H={class:"mt-3"},L={key:1},W={key:1},j={class:"min-w-full divide-y divide-border"},Q={class:"px-4 py-2 font-medium"},G={class:"px-4 py-2"},J={class:"px-4 py-2"},K={class:"px-4 py-2"},O={class:"px-4 py-2 font-medium"},U={class:"px-4 py-2"},X={class:"px-4 py-2"},Y={class:"flex gap-2"},ce=w({__name:"Manage",setup(Z){const x=B(),_=x.props.filters||{};function h(n){y.fire({title:"Mark as Processed",html:`
        <div style="text-align:left">
            <label style="display:block;margin-bottom:4px;font-size:12px">Method</label>
            <select id="method" class="swal2-input" style="width:100%">
                <option value="cash">cash</option>
                <option value="bank_transfer">bank_transfer</option>
                <option value="e-wallet">e-wallet</option>
                <option value="credit_note">credit_note</option>
            </select>
            <label style="display:block;margin:10px 0 4px;font-size:12px">Reference #</label>
            <input id="ref" class="swal2-input" placeholder="Reference number (optional)" />
            <label style="display:block;margin:10px 0 4px;font-size:12px">Notes</label>
            <textarea id="notes" class="swal2-textarea" placeholder="Notes (optional)"></textarea>
        </div>
        `,showCancelButton:!0,confirmButtonText:"Save",preConfirm:()=>{const e=document.getElementById("method").value,s=document.getElementById("ref").value,c=document.getElementById("notes").value;return{refund_method:e,reference_number:s||void 0,notes:c||void 0}}}).then(e=>{e.isConfirmed&&p.post(route("refunds.process",n),e.value,{preserveScroll:!0})})}function g(n){y.fire({title:"Complete refund",html:`
        <div style="text-align:left">
            <label style="display:flex;align-items:center;gap:8px;">
                <input id="return" type="checkbox" checked />
                Return to stock
            </label>
            <label style="display:block;margin:10px 0 4px;font-size:12px">Inspection notes</label>
            <textarea id="notes" class="swal2-textarea" placeholder="Notes (optional)"></textarea>
        </div>
        `,showCancelButton:!0,confirmButtonText:"Complete",confirmButtonColor:"#10b981",preConfirm:()=>{const e=document.getElementById("return").checked,s=document.getElementById("notes").value;return{return_to_stock:e,notes:s||void 0}}}).then(e=>{e.isConfirmed&&p.post(route("refunds.complete",n),e.value,{preserveScroll:!0})})}function k(n){y.fire({title:"Cancel this refund?",text:"This will mark the refund as cancelled. A short reason is required.",icon:"warning",showCancelButton:!0,confirmButtonText:"Cancel refund",confirmButtonColor:"#ef4444",input:"textarea",inputLabel:"Reason (required)",inputPlaceholder:"Provide a brief reason...",inputAttributes:{"aria-label":"Reason (required)"},inputValidator:e=>{if(!e||!e.trim())return"Please provide a brief reason."}}).then(e=>{e.isConfirmed&&p.post(route("refunds.cancel",n),{review_notes:e.value},{preserveScroll:!0})})}function C(n){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(n)}return(n,e)=>(l(),f(z,null,{default:a(()=>[r(o(R),{title:"Refunds"}),t("div",V,[e[3]||(e[3]=t("h1",{class:"text-2xl font-bold"},"Refunds",-1)),t("div",q,[t("select",{class:"rounded-md border border-input bg-background px-3 py-2 text-sm",value:o(_).status||"approved",onChange:e[0]||(e[0]=s=>o(p).get(n.route("refunds.index"),{status:s.target.value},{preserveState:!0,replace:!0}))},e[2]||(e[2]=[t("option",{value:"approved"},"Approved",-1),t("option",{value:"processed"},"Processed",-1),t("option",{value:"completed"},"Completed",-1),t("option",{value:"cancelled"},"Cancelled",-1)]),40,F)])]),r(I,null,{default:a(()=>[r(A,null,{default:a(()=>[r(T,null,{default:a(()=>e[4]||(e[4]=[i("Refunds")])),_:1,__:[4]})]),_:1}),r(E,null,{default:a(()=>[o(x).props.refunds.data.length?(l(),d("div",W,[t("table",j,[e[10]||(e[10]=t("thead",null,[t("tr",null,[t("th",{class:"px-4 py-2 text-left"},"Refund #"),t("th",{class:"px-4 py-2 text-left"},"Invoice"),t("th",{class:"px-4 py-2 text-left"},"Product"),t("th",{class:"px-4 py-2 text-left"},"Qty"),t("th",{class:"px-4 py-2 text-left"},"Amount"),t("th",{class:"px-4 py-2 text-left"},"Status"),t("th",{class:"px-4 py-2 text-left"},"Actions")])],-1)),t("tbody",null,[(l(!0),d(S,null,N(o(x).props.refunds.data,s=>{var c;return l(),d("tr",{key:s.id,class:"hover:bg-muted"},[t("td",Q,u(s.refund_number),1),t("td",G,[r(o(P),{href:n.route("invoices.show",s.invoice_id),class:"text-blue-500 underline"},{default:a(()=>[i("#"+u(s.invoice_id),1)]),_:2},1032,["href"])]),t("td",J,u(((c=s.product)==null?void 0:c.name)||"â€”"),1),t("td",K,u(s.quantity_refunded),1),t("td",O,u(C(s.refund_amount)),1),t("td",U,[t("span",{class:$(["px-2 py-1 rounded-full text-xs font-medium",{"bg-blue-100 text-blue-800":s.status==="approved","bg-yellow-100 text-yellow-800":s.status==="processed","bg-green-100 text-green-800":s.status==="completed","bg-red-100 text-red-800":s.status==="cancelled"}])},u(s.status),3)]),t("td",X,[t("div",Y,[s.status==="approved"||s.status==="processed"?(l(),f(o(m),{key:0,size:"sm",variant:"outline",onClick:b=>h(s.id)},{default:a(()=>e[7]||(e[7]=[i(" Process ")])),_:2,__:[7]},1032,["onClick"])):v("",!0),s.status==="approved"||s.status==="processed"?(l(),f(o(m),{key:1,size:"sm",variant:"default",onClick:b=>g(s.id)},{default:a(()=>e[8]||(e[8]=[i(" Complete ")])),_:2,__:[8]},1032,["onClick"])):v("",!0),s.status!=="completed"&&s.status!=="cancelled"?(l(),f(o(m),{key:2,size:"sm",variant:"destructive",onClick:b=>k(s.id)},{default:a(()=>e[9]||(e[9]=[i(" Cancel ")])),_:2,__:[9]},1032,["onClick"])):v("",!0)])])])}),128))])])])):(l(),d("div",M,[o(_).status&&o(_).status!==""?(l(),d("div",D,[e[6]||(e[6]=i(" No refunds found for the selected filter. ")),t("div",H,[r(o(m),{variant:"outline",onClick:e[1]||(e[1]=s=>o(p).get(n.route("refunds.index"),{status:"approved"},{preserveState:!0,replace:!0}))},{default:a(()=>e[5]||(e[5]=[i(" Clear filters ")])),_:1,__:[5]})])])):(l(),d("div",L," No refunds found. "))]))]),_:1})]),_:1})]),_:1}))}});export{ce as default};
