import{d as G,D as Z,p as N,s as H,c as x,o as u,u as l,w as r,a as n,b as e,e as c,t as a,f as p,h as f,x as q,y as V,E as ee,v as te,m as K,g as se,F as B,S as W,l as U,r as O,W as ne}from"./app-BPw9FW5W.js";import{_ as k}from"./index-m5TJ7wif.js";import{w as oe,x as ie,y as re,_ as le}from"./AppLayout.vue_vue_type_script_setup_true_lang-CCrkwxQ7.js";import{_ as S,a as $}from"./CardContent.vue_vue_type_script_setup_true_lang-CqjqLeYt.js";import{_ as R,a as M}from"./CardTitle.vue_vue_type_script_setup_true_lang-CJOZJaTy.js";import{_ as Y}from"./Select.vue_vue_type_script_setup_true_lang-uMBr4YHu.js";import{_ as de}from"./SearchSelect.vue_vue_type_script_setup_true_lang-BqUWYYDl.js";import{_ as ae,b as ue,c as me,d as ce,e as pe,a as fe}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DEA0OtcQ.js";import{_ as b}from"./Label.vue_vue_type_script_setup_true_lang-EJ5B6lPd.js";import{_ as _e}from"./PhoneInput.vue_vue_type_script_setup_true_lang-3gmtLFVB.js";import{S as A}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{_ as P}from"./InputError.vue_vue_type_script_setup_true_lang-DyKdHn38.js";import{D as ve}from"./DeliveryRouteMap-CZu4Qkrl.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_0fe2f881_lang-99vuglkR.js";import"./RovingFocusGroup-C7wI3n6q.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-BMK5AF-Z.js";import"./createLucideIcon-D0QdgWbF.js";import"./VisuallyHidden-DzC5HiGR.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DcNnTtmQ.js";import"./chevron-right-Dy4mwVyk.js";import"./Input.vue_vue_type_script_setup_true_lang-CbW0QRN2.js";import"./search-6FLVsTz1.js";import"./vue-leaflet.es-DpCKHUZC.js";import"./marker-icon-2x-1TirABJh.js";import"./marker-icon-B6h-nX3D.js";import"./marker-shadow-B9CpECYs.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ye={class:"space-y-4"},ge={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},xe=["min"],be={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ke={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},we={key:0},Pe=G({__name:"DeliveryFormModal",props:{open:{type:Boolean},invoice:{},customers:{}},emits:["update:open"],setup(L,{emit:i}){var T,h;const v=L,C=i,d=Z({customer_id:v.invoice.customer_id,invoice_id:v.invoice.id,delivery_address:((T=v.invoice.customer)==null?void 0:T.address)||"",contact_person:((h=v.invoice.customer)==null?void 0:h.name)||"",contact_phone:"",delivery_date:"",delivery_time:"",status:"pending",notes:"",delivery_fee:""}),z=new Date().toISOString().split("T")[0],E=N(()=>[{value:null,label:"Select customer"},...v.customers.map(_=>({value:_.id,label:`${_.name}${_.company_name?` (${_.company_name})`:""}`}))]),D=[{value:"pending",label:"Pending"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}],Q=[{value:"09:00 AM - 12:00 PM",label:"09:00 AM - 12:00 PM"},{value:"12:00 PM - 03:00 PM",label:"12:00 PM - 03:00 PM"},{value:"03:00 PM - 06:00 PM",label:"03:00 PM - 06:00 PM"},{value:"06:00 PM - 09:00 PM",label:"06:00 PM - 09:00 PM"},{value:"Custom",label:"Custom"}],F=N(()=>{if(!d.customer_id)return null;const _=v.customers.find(g=>g.id===d.customer_id);if(!(_!=null&&_.location))return null;let s=_.location;if(typeof s=="string")try{s=JSON.parse(s)}catch{return console.warn("Failed to parse customer location string:",s),null}return s&&typeof s.lat=="number"&&typeof s.lng=="number"&&!isNaN(s.lat)&&!isNaN(s.lng)&&s.lat>=-90&&s.lat<=90&&s.lng>=-180&&s.lng<=180?s:null}),I=N(()=>d.customer_id&&v.customers.find(_=>_.id===d.customer_id)||null);H(()=>d.customer_id,_=>{if(_){const s=v.customers.find(g=>g.id===_);s!=null&&s.address&&!d.delivery_address&&(d.delivery_address=s.address)}}),H(()=>v.open,_=>{var s,g;_&&(d.reset(),d.customer_id=v.invoice.customer_id,d.invoice_id=v.invoice.id,d.delivery_address=((s=v.invoice.customer)==null?void 0:s.address)||"",d.contact_person=((g=v.invoice.customer)==null?void 0:g.name)||"",d.clearErrors())});function w(){const _=/^\+63\d{10}$/;if(d.contact_phone&&!_.test(d.contact_phone)){d.setError("contact_phone","Enter a valid 10-digit Philippine mobile number.");return}d.post(route("deliveries.store"),{preserveScroll:!0,onSuccess:()=>{A.fire({toast:!0,position:"top-end",icon:"success",title:"Delivery created successfully",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}),C("update:open",!1),d.reset()}})}function X(){C("update:open",!1),d.clearErrors()}return(_,s)=>(u(),x(l(ae),{open:_.open,"onUpdate:open":s[10]||(s[10]=g=>C("update:open",g))},{default:r(()=>[n(l(fe),{class:"max-w-4xl max-h-[90vh] overflow-y-auto"},{default:r(()=>{var g,j;return[n(l(ue),null,{default:r(()=>[n(l(me),null,{default:r(()=>s[11]||(s[11]=[c("Out for Delivery")])),_:1,__:[11]}),n(l(ce),null,{default:r(()=>[c(" Create a delivery for invoice "+a(_.invoice.reference_number),1)]),_:1})]),_:1}),e("form",{onSubmit:s[9]||(s[9]=ee(y=>w(),["prevent"])),class:"space-y-6"},[e("div",ye,[e("div",ge,[e("div",null,[n(b,{for:"customer_id"},{default:r(()=>s[12]||(s[12]=[c("Customer")])),_:1,__:[12]}),n(l(de),{modelValue:l(d).customer_id,"onUpdate:modelValue":s[0]||(s[0]=y=>l(d).customer_id=y),options:E.value,placeholder:"Select customer","search-placeholder":"Search customers...",class:"mt-1",required:""},null,8,["modelValue","options"]),n(P,{message:l(d).errors.customer_id},null,8,["message"])]),e("div",null,[n(b,{for:"delivery_date"},{default:r(()=>s[13]||(s[13]=[c("Delivery Date")])),_:1,__:[13]}),q(e("input",{"onUpdate:modelValue":s[1]||(s[1]=y=>l(d).delivery_date=y),type:"date",id:"delivery_date",min:l(z),class:"w-full rounded-md border border-input bg-transparent px-3 py-2 mt-1 text-foreground dark:bg-input/30 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] focus-visible:outline-none",required:""},null,8,xe),[[V,l(d).delivery_date]]),n(P,{message:l(d).errors.delivery_date},null,8,["message"])])]),e("div",null,[n(b,{for:"delivery_address"},{default:r(()=>s[14]||(s[14]=[c("Delivery Address")])),_:1,__:[14]}),q(e("textarea",{"onUpdate:modelValue":s[2]||(s[2]=y=>l(d).delivery_address=y),id:"delivery_address",class:"w-full rounded-md border border-input bg-transparent px-3 py-2 mt-1 text-foreground dark:bg-input/30 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] focus-visible:outline-none",rows:"3",placeholder:"Enter complete delivery address",required:""},null,512),[[V,l(d).delivery_address]]),n(P,{message:l(d).errors.delivery_address},null,8,["message"])]),e("div",be,[e("div",null,[n(b,{for:"contact_person"},{default:r(()=>s[15]||(s[15]=[c("Contact Person")])),_:1,__:[15]}),q(e("input",{"onUpdate:modelValue":s[3]||(s[3]=y=>l(d).contact_person=y),type:"text",id:"contact_person",class:"w-full rounded-md border border-input bg-transparent px-3 py-2 mt-1 text-foreground dark:bg-input/30 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] focus-visible:outline-none",placeholder:"Enter contact person name",required:""},null,512),[[V,l(d).contact_person]]),n(P,{message:l(d).errors.contact_person},null,8,["message"])]),e("div",null,[n(b,{for:"contact_phone"},{default:r(()=>s[16]||(s[16]=[c("Contact Phone")])),_:1,__:[16]}),n(_e,{modelValue:l(d).contact_phone,"onUpdate:modelValue":s[4]||(s[4]=y=>l(d).contact_phone=y),id:"contact_phone",placeholder:"XXXXXXXXXX",required:"",class:"mt-1"},null,8,["modelValue"]),n(P,{message:l(d).errors.contact_phone},null,8,["message"])])]),e("div",ke,[e("div",null,[n(b,{for:"delivery_time"},{default:r(()=>s[17]||(s[17]=[c("Delivery Time")])),_:1,__:[17]}),n(l(Y),{modelValue:l(d).delivery_time,"onUpdate:modelValue":s[5]||(s[5]=y=>l(d).delivery_time=y),options:Q,placeholder:"Select delivery time",class:"mt-1",required:""},null,8,["modelValue"]),n(P,{message:l(d).errors.delivery_time},null,8,["message"])]),e("div",null,[n(b,{for:"status"},{default:r(()=>s[18]||(s[18]=[c("Status")])),_:1,__:[18]}),n(l(Y),{modelValue:l(d).status,"onUpdate:modelValue":s[6]||(s[6]=y=>l(d).status=y),options:D,placeholder:"Select status",class:"mt-1",required:""},null,8,["modelValue"]),n(P,{message:l(d).errors.status},null,8,["message"])]),e("div",null,[n(b,{for:"delivery_fee"},{default:r(()=>s[19]||(s[19]=[c("Delivery Fee")])),_:1,__:[19]}),q(e("input",{"onUpdate:modelValue":s[7]||(s[7]=y=>l(d).delivery_fee=y),type:"number",id:"delivery_fee",min:"0",step:"0.01",class:"w-full rounded-md border border-input bg-transparent px-3 py-2 mt-1 text-foreground dark:bg-input/30 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] focus-visible:outline-none",placeholder:"0.00",required:""},null,512),[[V,l(d).delivery_fee]]),n(P,{message:l(d).errors.delivery_fee},null,8,["message"])])]),e("div",null,[n(b,{for:"notes"},{default:r(()=>s[20]||(s[20]=[c("Notes")])),_:1,__:[20]}),q(e("textarea",{"onUpdate:modelValue":s[8]||(s[8]=y=>l(d).notes=y),id:"notes",class:"w-full rounded-md border border-input bg-transparent px-3 py-2 mt-1 text-foreground dark:bg-input/30 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] focus-visible:outline-none",rows:"3",placeholder:"Enter any additional notes"},null,512),[[V,l(d).notes]]),n(P,{message:l(d).errors.notes},null,8,["message"])])]),F.value||l(d).delivery_address||(g=I.value)!=null&&g.address?(u(),p("div",we,[n(b,{class:"mb-2 block"},{default:r(()=>s[21]||(s[21]=[c("Delivery Route")])),_:1,__:[21]}),n(ve,{"customer-location":F.value,"delivery-address":l(d).delivery_address||((j=I.value)==null?void 0:j.address),"map-height":"300px"},null,8,["customer-location","delivery-address"])])):f("",!0),n(l(pe),{class:"gap-2"},{default:r(()=>[n(l(k),{type:"button",variant:"ghost",onClick:X},{default:r(()=>s[22]||(s[22]=[c("Cancel")])),_:1,__:[22]}),n(l(k),{type:"submit",variant:"default",disabled:l(d).processing},{default:r(()=>s[23]||(s[23]=[c(" Create Delivery ")])),_:1,__:[23]},8,["disabled"])]),_:1})],32)]}),_:1})]),_:1},8,["open"]))}}),Ce={class:"flex items-center justify-between my-6"},De={class:"text-2xl font-bold"},Se={class:"flex gap-2"},$e={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Re={class:"lg:col-span-2 space-y-6"},Me={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},he={class:"text-lg font-semibold"},qe={key:0},Ve={key:1},Be={key:2},Ue={key:0,class:"mt-4"},Ae={class:"mt-1"},Ne={class:"overflow-x-auto"},Ee={class:"min-w-full divide-y divide-border"},Fe={class:"px-4 py-2"},Ie={class:"font-medium"},Xe={class:"text-sm text-gray-500"},Te={class:"px-4 py-2"},je={class:"px-4 py-2"},Oe={class:"px-4 py-2 font-medium"},Le={class:"border-t"},ze={class:"px-4 py-2 font-medium"},Qe={colspan:"3",class:"px-4 py-2 text-right font-medium"},We={class:"px-4 py-2 font-medium"},He={class:"border-t"},Je={class:"px-4 py-2 font-bold text-lg"},Ke={class:"space-y-6"},Ye={class:"space-y-3"},Ge={class:"flex items-center justify-between mb-2"},Ze={class:"font-medium"},et={class:"text-sm text-gray-600 space-y-1"},tt={key:0},st={key:1},nt={class:"text-xs mt-0.5"},ot={key:2},it={key:3},rt={key:4},lt={key:5,class:"mt-2 pt-2 border-t"},dt={class:"text-xs mt-0.5"},at={key:6,class:"text-xs text-gray-500 mt-2"},ut={key:7,class:"mt-2 pt-2 border-t"},mt={class:"space-y-3"},ct={class:"flex items-center justify-between"},pt={class:"font-medium"},ft={class:"text-sm text-gray-600"},_t={key:0},vt={class:"text-xs text-gray-500"},yt={key:1,class:"mt-1 text-xs text-red-500"},gt={key:2,class:"text-xs"},xt=["href"],bt={class:"space-y-3"},kt={class:"flex items-center justify-between"},wt={class:"font-medium"},Pt={class:"text-sm text-gray-600"},Ct={key:0},Dt={class:"text-xs text-gray-500"},St={class:"space-y-3"},$t={class:"flex items-center gap-3"},Rt={class:"font-medium"},Mt={key:0},ht={key:1},qt={key:2},Vt={class:"text-sm"},Bt={class:"mt-3"},Ut={class:"text-sm"},ds=G({__name:"Show",props:{invoice:{},refunds:{},refundRequests:{},deliveries:{},customers:{}},setup(L){var y,J;const i=L,v=te(),C=Array.isArray((y=v.props.auth)==null?void 0:y.userRoles)&&v.props.auth.userRoles.includes("Customer"),d=Array.isArray((J=v.props.auth)==null?void 0:J.userRoles)&&v.props.auth.userRoles.includes("Staff"),z=N(()=>Array.isArray(i.refundRequests)&&i.refundRequests.some(m=>m.status==="pending")),E=N(()=>{var m;return d&&((m=i.invoice.customer)==null?void 0:m.email)&&i.invoice.payment_status!=="paid"}),D=K(!1),Q=[{title:"Invoices",href:"/invoices"},{title:i.invoice.reference_number,href:`/invoices/${i.invoice.id}`}];function F(m){switch(m){case"draft":return"bg-gray-100 text-gray-800";case"pending":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}function I(m){switch(m){case"pending":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}function w(m){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(m)}function X(m){return new Date(m).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function T(m){return new Date(m).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}function h(){window.print()}function _(m){if(!m.media||m.media.length===0)return null;const t=m.media.find(o=>o.mime_type.startsWith("image/"));return t?t.thumb_url||t.original_url:null}function s(m){return m.name.split(" ").map(t=>t.charAt(0)).join("").toUpperCase().slice(0,2)}const g=K(!1);function j(){!E.value||D.value||(D.value=!0,ne.post(route("invoices.sendPaymentReminder",i.invoice.id),{},{preserveScroll:!0,onSuccess:()=>{const m=v.props.flash;m!=null&&m.success&&A.fire({toast:!0,position:"top-end",icon:"success",title:m.success,showConfirmButton:!1,timer:3e3,timerProgressBar:!0})},onError:m=>{const t=v.props.flash,o=(t==null?void 0:t.error)||"Failed to send payment reminder. Please try again.";A.fire({toast:!0,position:"top-end",icon:"error",title:o,showConfirmButton:!1,timer:3e3,timerProgressBar:!0})},onFinish:()=>{D.value=!1}}))}return H(()=>v.props.flash,m=>{m!=null&&m.success?A.fire({toast:!0,position:"top-end",icon:"success",title:m.success,showConfirmButton:!1,timer:3e3,timerProgressBar:!0}):m!=null&&m.error&&A.fire({toast:!0,position:"top-end",icon:"error",title:m.error,showConfirmButton:!1,timer:3e3,timerProgressBar:!0})}),(m,t)=>(u(),x(le,{breadcrumbs:Q},{default:r(()=>[n(l(se),{title:i.invoice.reference_number},null,8,["title"]),e("div",Ce,[e("h1",De,a(i.invoice.reference_number),1),e("div",Se,[n(l(k),{variant:"outline",onClick:h},{default:r(()=>t[2]||(t[2]=[c("Download PDF")])),_:1,__:[2]}),n(l(k),{variant:"outline",onClick:h},{default:r(()=>t[3]||(t[3]=[c("Print")])),_:1,__:[3]}),E.value?(u(),x(l(k),{key:0,variant:"default",onClick:j,disabled:D.value},{default:r(()=>[c(a(D.value?"Sending...":"Send Payment Reminder"),1)]),_:1},8,["disabled"])):f("",!0),!l(C)&&i.invoice.status!=="completed"?(u(),x(l(k),{key:1,variant:"default",onClick:t[0]||(t[0]=o=>g.value=!0)},{default:r(()=>t[4]||(t[4]=[c("Out for Delivery")])),_:1,__:[4]})):f("",!0),l(C)&&i.invoice.status==="completed"?(u(),p(B,{key:2},[z.value?(u(),x(l(k),{key:1,variant:"outline",disabled:"",title:"You already have a pending refund request for this invoice."},{default:r(()=>t[6]||(t[6]=[c(" Request Pending ")])),_:1,__:[6]})):(u(),x(l(W),{key:0,href:m.route("refundRequests.create",i.invoice.id)},{default:r(()=>[n(l(k),{variant:"default"},{default:r(()=>t[5]||(t[5]=[c("Request Refund")])),_:1,__:[5]})]),_:1},8,["href"]))],64)):f("",!0),n(l(W),{href:m.route("invoices.index")},{default:r(()=>[n(l(k),{variant:"ghost"},{default:r(()=>t[7]||(t[7]=[c("Back")])),_:1,__:[7]})]),_:1},8,["href"])])]),e("div",$e,[e("div",Re,[n(S,null,{default:r(()=>[n(R,null,{default:r(()=>[n(M,null,{default:r(()=>t[8]||(t[8]=[c("Invoice Information")])),_:1,__:[8]})]),_:1}),n($,null,{default:r(()=>[e("div",Me,[e("div",null,[t[9]||(t[9]=e("label",{class:"text-sm font-medium text-gray-500"},"Reference Number",-1)),e("p",he,a(i.invoice.reference_number),1)]),e("div",null,[t[10]||(t[10]=e("label",{class:"text-sm font-medium text-gray-500"},"Date Created",-1)),e("p",null,a(X(i.invoice.created_at)),1)]),e("div",null,[t[11]||(t[11]=e("label",{class:"text-sm font-medium text-gray-500"},"Status",-1)),e("span",{class:U(["px-2 py-1 rounded-full text-xs font-medium",F(i.invoice.status)])},a(i.invoice.status),3)]),e("div",null,[t[12]||(t[12]=e("label",{class:"text-sm font-medium text-gray-500"},"Payment Method",-1)),e("p",null,a(i.invoice.payment_method.replace("_"," ")),1)]),i.invoice.payment_status?(u(),p("div",qe,[t[13]||(t[13]=e("label",{class:"text-sm font-medium text-gray-500"},"Payment Status",-1)),e("span",{class:U(["px-2 py-1 rounded-full text-xs font-medium",i.invoice.payment_status==="paid"?"bg-green-100 text-green-800":i.invoice.payment_status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"])},a(i.invoice.payment_status),3)])):f("",!0),i.invoice.due_date?(u(),p("div",Ve,[t[14]||(t[14]=e("label",{class:"text-sm font-medium text-gray-500"},"Due Date",-1)),e("p",null,a(T(i.invoice.due_date)),1)])):f("",!0),i.invoice.payment_reference?(u(),p("div",Be,[t[15]||(t[15]=e("label",{class:"text-sm font-medium text-gray-500"},"Payment Reference",-1)),e("p",null,a(i.invoice.payment_reference),1)])):f("",!0)]),i.invoice.notes?(u(),p("div",Ue,[t[16]||(t[16]=e("label",{class:"text-sm font-medium text-gray-500"},"Notes",-1)),e("p",Ae,a(i.invoice.notes),1)])):f("",!0)]),_:1})]),_:1}),n(S,null,{default:r(()=>[n(R,null,{default:r(()=>[n(M,null,{default:r(()=>t[17]||(t[17]=[c("Invoice Items")])),_:1,__:[17]})]),_:1}),n($,null,{default:r(()=>[e("div",Ne,[e("table",Ee,[t[20]||(t[20]=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 text-left"},"Product"),e("th",{class:"px-4 py-2 text-left"},"Quantity"),e("th",{class:"px-4 py-2 text-left"},"Price"),e("th",{class:"px-4 py-2 text-left"},"Total")])],-1)),e("tbody",null,[(u(!0),p(B,null,O(i.invoice.invoice_items,o=>(u(),p("tr",{key:o.id,class:"hover:bg-muted"},[e("td",Fe,[e("div",null,[e("div",Ie,a(o.product.name),1),e("div",Xe,"SKU: "+a(o.product.id),1)])]),e("td",Te,a(o.quantity),1),e("td",je,a(w(o.price)),1),e("td",Oe,a(w(o.total)),1)]))),128))]),e("tfoot",null,[e("tr",Le,[t[18]||(t[18]=e("td",{colspan:"3",class:"px-4 py-2 text-right font-medium"},"Subtotal:",-1)),e("td",ze,a(w(i.invoice.subtotal_amount)),1)]),e("tr",null,[e("td",Qe,"VAT ("+a(i.invoice.vat_rate)+"%):",1),e("td",We,a(w(i.invoice.vat_amount)),1)]),e("tr",He,[t[19]||(t[19]=e("td",{colspan:"3",class:"px-4 py-2 text-right font-bold text-lg"},"Total Amount:",-1)),e("td",Je,a(w(i.invoice.total_amount)),1)])])])])]),_:1})]),_:1})]),e("div",Ke,[i.deliveries&&i.deliveries.length?(u(),x(S,{key:0},{default:r(()=>[n(R,null,{default:r(()=>[n(M,null,{default:r(()=>t[21]||(t[21]=[c("Deliveries")])),_:1,__:[21]})]),_:1}),n($,null,{default:r(()=>[e("div",Ye,[(u(!0),p(B,null,O(i.deliveries,o=>(u(),p("div",{key:o.id,class:"border rounded-md p-3"},[e("div",Ge,[e("div",Ze,"Delivery #"+a(o.id),1),e("span",{class:U(["px-2 py-1 rounded-full text-xs font-medium",I(o.status)])},a(o.status),3)]),e("div",et,[o.delivery_date?(u(),p("div",tt,[t[22]||(t[22]=e("span",{class:"font-medium"},"Date:",-1)),c(" "+a(o.delivery_date),1)])):f("",!0),o.delivery_time?(u(),p("div",st,[t[23]||(t[23]=e("span",{class:"font-medium"},"Time:",-1)),c(" "+a(o.delivery_time),1)])):f("",!0),e("div",null,[t[24]||(t[24]=e("span",{class:"font-medium"},"Address:",-1)),e("p",nt,a(o.delivery_address),1)]),o.contact_person?(u(),p("div",ot,[t[25]||(t[25]=e("span",{class:"font-medium"},"Contact:",-1)),c(" "+a(o.contact_person),1)])):f("",!0),o.contact_phone?(u(),p("div",it,[t[26]||(t[26]=e("span",{class:"font-medium"},"Phone:",-1)),c(" "+a(o.contact_phone),1)])):f("",!0),o.delivery_fee>0?(u(),p("div",rt,[t[27]||(t[27]=e("span",{class:"font-medium"},"Fee:",-1)),c(" "+a(w(o.delivery_fee)),1)])):f("",!0),o.notes?(u(),p("div",lt,[t[28]||(t[28]=e("span",{class:"font-medium"},"Notes:",-1)),e("p",dt,a(o.notes),1)])):f("",!0),o.created_at?(u(),p("div",at," Created: "+a(o.created_at),1)):f("",!0),l(C)?f("",!0):(u(),p("div",ut,[n(l(W),{href:m.route("deliveries.show",o.id)},{default:r(()=>[n(l(k),{variant:"outline",size:"sm",class:"w-full"},{default:r(()=>t[29]||(t[29]=[c(" View Delivery Details ")])),_:1,__:[29]})]),_:2},1032,["href"])]))])]))),128))])]),_:1})]),_:1})):f("",!0),i.refundRequests&&i.refundRequests.length?(u(),x(S,{key:1},{default:r(()=>[n(R,null,{default:r(()=>[n(M,null,{default:r(()=>t[30]||(t[30]=[c("Refund Requests")])),_:1,__:[30]})]),_:1}),n($,null,{default:r(()=>[e("div",mt,[(u(!0),p(B,null,O(i.refundRequests,o=>(u(),p("div",{key:o.id,class:"border rounded-md p-3"},[e("div",ct,[e("div",pt,a(o.tracking_number),1),e("span",{class:U(["px-2 py-1 rounded-full text-xs font-medium",{"bg-yellow-100 text-yellow-800":o.status==="pending","bg-green-100 text-green-800":o.status==="approved"||o.status==="converted","bg-red-100 text-red-800":o.status==="rejected"}])},a(o.status),3)]),e("div",ft,[o.product_name?(u(),p("div",_t,"Product: "+a(o.product_name),1)):f("",!0),e("div",null,"Qty: "+a(o.quantity),1),e("div",vt,"Date: "+a(o.created_at),1),o.status==="rejected"&&o.review_notes?(u(),p("div",yt," Reason: "+a(o.review_notes),1)):f("",!0),o.media_link?(u(),p("div",gt,[e("a",{href:o.media_link,target:"_blank",class:"text-blue-500 underline"},"Media",8,xt)])):f("",!0)])]))),128))])]),_:1})]),_:1})):f("",!0),i.refunds&&i.refunds.length?(u(),x(S,{key:2},{default:r(()=>[n(R,null,{default:r(()=>[n(M,null,{default:r(()=>t[31]||(t[31]=[c("Refunds")])),_:1,__:[31]})]),_:1}),n($,null,{default:r(()=>[e("div",bt,[(u(!0),p(B,null,O(i.refunds,o=>(u(),p("div",{key:o.id,class:"border rounded-md p-3"},[e("div",kt,[e("div",wt,a(o.refund_number),1),e("span",{class:U(["px-2 py-1 rounded-full text-xs font-medium",{"bg-green-100 text-green-800":o.status==="approved"||o.status==="completed","bg-yellow-100 text-yellow-800":o.status==="pending","bg-red-100 text-red-800":o.status==="cancelled"}])},a(o.status),3)]),e("div",Pt,[o.product_name?(u(),p("div",Ct,"Product: "+a(o.product_name),1)):f("",!0),e("div",null,"Qty: "+a(o.quantity_refunded),1),e("div",null,"Amount: "+a(w(o.refund_amount)),1),e("div",Dt,"Date: "+a(o.created_at),1)])]))),128))])]),_:1})]),_:1})):f("",!0),n(S,null,{default:r(()=>[n(R,null,{default:r(()=>[n(M,null,{default:r(()=>t[32]||(t[32]=[c("Customer Information")])),_:1,__:[32]})]),_:1}),n($,null,{default:r(()=>[e("div",St,[e("div",$t,[n(oe,{class:"size-12"},{default:r(()=>[_(i.invoice.customer)?(u(),x(ie,{key:0,src:_(i.invoice.customer),alt:i.invoice.customer.name},null,8,["src","alt"])):(u(),x(re,{key:1},{default:r(()=>[c(a(s(i.invoice.customer)),1)]),_:1}))]),_:1}),e("div",null,[t[33]||(t[33]=e("label",{class:"text-sm font-medium text-gray-500"},"Name",-1)),e("p",Rt,a(i.invoice.customer.name),1)])]),i.invoice.customer.company_name?(u(),p("div",Mt,[t[34]||(t[34]=e("label",{class:"text-sm font-medium text-gray-500"},"Company",-1)),e("p",null,a(i.invoice.customer.company_name),1)])):f("",!0),e("div",null,[t[35]||(t[35]=e("label",{class:"text-sm font-medium text-gray-500"},"Email",-1)),e("p",null,a(i.invoice.customer.email),1)]),i.invoice.customer.phone?(u(),p("div",ht,[t[36]||(t[36]=e("label",{class:"text-sm font-medium text-gray-500"},"Phone",-1)),e("p",null,a(i.invoice.customer.phone),1)])):f("",!0),i.invoice.customer.address?(u(),p("div",qt,[t[37]||(t[37]=e("label",{class:"text-sm font-medium text-gray-500"},"Address",-1)),e("p",Vt,a(i.invoice.customer.address),1)])):f("",!0)])]),_:1})]),_:1}),n(S,null,{default:r(()=>[n(R,null,{default:r(()=>[n(M,null,{default:r(()=>t[38]||(t[38]=[c("Created By")])),_:1,__:[38]})]),_:1}),n($,null,{default:r(()=>[e("div",null,[t[39]||(t[39]=e("label",{class:"text-sm font-medium text-gray-500"},"User",-1)),e("p",null,a(i.invoice.user.name),1)]),e("div",Bt,[t[40]||(t[40]=e("label",{class:"text-sm font-medium text-gray-500"},"Last Updated",-1)),e("p",Ut,a(X(i.invoice.updated_at)),1)])]),_:1})]),_:1})])]),i.customers?(u(),x(Pe,{key:0,open:g.value,"onUpdate:open":t[1]||(t[1]=o=>g.value=o),invoice:i.invoice,customers:i.customers},null,8,["open","invoice","customers"])):f("",!0)]),_:1}))}});export{ds as default};
