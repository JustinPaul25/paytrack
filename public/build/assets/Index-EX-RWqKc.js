import{d as P,v as j,m as _,s as A,W as v,c as h,o as u,w as a,a as l,b as e,u as r,g as W,S as Y,h as k,x as C,y as q,D as T,E as I,e as y,f as w,F as G,r as H,t as c,n as V}from"./app-qA0CnBWe.js";import{_ as b}from"./index-DKsLgjKN.js";import{_ as J}from"./AppLayout.vue_vue_type_script_setup_true_lang-BLollNnU.js";import{_ as E,a as N}from"./CardContent.vue_vue_type_script_setup_true_lang-DFxNC8fq.js";import{_ as $}from"./Icon.vue_vue_type_script_setup_true_lang-AIhq6K5q.js";import{S as x}from"./sweetalert2.esm.all-BQIkj5Wb.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_85568d9b_lang-C02RUasq.js";import"./useForwardPropsEmits-CwUzb49y.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CLRWpV5h.js";import"./Teleport-DIfWgdf9.js";import"./RovingFocusGroup-gU1KHB92.js";import"./VisuallyHidden-qt70HzaR.js";import"./DialogPortal-BX8gIO6T.js";import"./x-Da1o-ysX.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B1dhHsl6.js";import"./chevron-down-CCBk2xD7.js";import"./chevron-right-r24-WVSv.js";import"./square-pen-DjRAZ5Qq.js";import"./calendar-BJTiP8we.js";import"./check-BujOPtAl.js";import"./chevron-left-BeUk50d8.js";import"./circle-alert-CD7TZ1Am.js";import"./piggy-bank-C7_yl6Hw.js";import"./circle-check-big-DF-vhMGd.js";import"./circle-check-B9DMRNBp.js";import"./trophy-BBHIiUlf.js";import"./circle-x-DdhefOoK.js";import"./clock-CiNhGBx2.js";import"./dollar-sign-CbfZVek1.js";import"./eye-off-9QebG7yy.js";import"./eye-5KKko-8Q.js";import"./loader-circle-Bl4Hr2SU.js";import"./mail-Dyt5iSRM.js";import"./map-pin-kt4sBBgF.js";import"./message-square-BrTcst4h.js";import"./sun-Biu9FB4q.js";import"./plus-CBc_0-HC.js";import"./printer-I2tYkTYc.js";import"./search-CKYqMlw5.js";import"./shopping-bag-CF7dcyya.js";import"./trash-2-DM0kfT8T.js";import"./trending-up-CsAZ24Wd.js";const K={class:"flex items-center justify-between mb-6"},O={class:"flex flex-col gap-4"},Q={class:"flex flex-wrap gap-4"},X={class:"flex items-end"},Z={class:"flex items-center gap-2 cursor-pointer"},ee={class:"overflow-x-auto"},te={class:"min-w-full divide-y divide-border"},se={key:0,class:"bg-white divide-y divide-border"},oe={class:"px-4 py-3 whitespace-nowrap font-medium"},re={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-500"},ie={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-500"},ae={class:"px-4 py-3 whitespace-nowrap"},le={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-500"},ne={class:"px-4 py-3 whitespace-nowrap"},ue={class:"px-4 py-3 whitespace-nowrap text-sm"},pe={class:"flex gap-2"},de={key:1},ce={colspan:"7",class:"px-4 py-10 text-center text-sm text-gray-500"},fe={key:0,class:"flex items-center justify-between mt-6"},me={class:"text-sm text-gray-700"},ve={class:"flex gap-2"},it=P({__name:"Index",setup(xe){const i=j(),f=_(i.props.filters?i.props.filters:{}),n=_(typeof f.value.search=="string"?f.value.search:""),p=_(typeof f.value.verification_status=="string"?f.value.verification_status:""),d=_(typeof f.value.user_role=="string"?f.value.user_role:""),m=_(typeof f.value.archived=="boolean"?f.value.archived:!1),R=[{title:"Users",href:"/users"}];let S=null;A(n,s=>{S&&clearTimeout(S),S=setTimeout(()=>{g()},400)}),A([p,d,m],()=>{g()});function g(){const s={};n.value&&(s.search=n.value),p.value&&(s.verification_status=p.value),d.value&&(s.user_role=d.value),m.value&&(s.archived="1"),v.get("/users",s,{preserveState:!0,replace:!0})}function U(s){const t={page:s};n.value&&(t.search=n.value),p.value&&(t.verification_status=p.value),d.value&&(t.user_role=d.value),m.value&&(t.archived="1"),v.get("/users",t,{preserveState:!0,replace:!0})}async function z(s){(await x.fire({title:"Delete User?",text:`Are you sure you want to delete this ${s.type}? This action cannot be undone.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#8f5be8",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete"})).isConfirmed&&(s.type==="staff"?v.delete(`/users/${s.id}`,{onSuccess:()=>{x.fire("User deleted","User deleted successfully.","success"),g()}}):v.delete(`/customers/${s.id}`,{onSuccess:()=>{x.fire("Customer deleted","Customer deleted successfully.","success"),g()}}))}function D(s){switch(s.toLowerCase()){case"admin":return"bg-purple-100 text-purple-800";case"staff":return"bg-blue-100 text-blue-800";case"customer":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}}function F(s){switch(s.toLowerCase()){case"verified":return"bg-green-100 text-green-800";case"unverified":return"bg-yellow-100 text-yellow-800";case"active":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}}function M(s){s.type==="staff"?v.visit(`/users/${s.id}/edit`):v.visit(`/customers/${s.id}/edit?from=users`)}async function L(s){(await x.fire({title:"Restore User to Active?",text:`Are you sure you want to restore this ${s.type} to active status?`,icon:"question",showCancelButton:!0,confirmButtonColor:"#8f5be8",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, restore",cancelButtonText:"Cancel"})).isConfirmed&&(s.type==="staff"?v.post(`/users/${s.id}/set-active`,{type:s.type},{onSuccess:()=>{x.fire("Success","User restored to active successfully.","success"),g()},onError:()=>{x.fire("Error","Failed to restore user to active.","error")}}):v.post(`/users/${s.id}/set-active`,{type:s.type},{onSuccess:()=>{x.fire("Success","Customer restored to active successfully.","success"),g()},onError:()=>{x.fire("Error","Failed to restore customer to active.","error")}}))}return(s,t)=>(u(),h(J,{breadcrumbs:R},{default:a(()=>[l(r(W),{title:"User Management"}),e("div",K,[t[8]||(t[8]=e("h1",{class:"text-2xl font-bold"},"User Management",-1)),l(r(Y),{href:s.route("users.create")},{default:a(()=>[l(r(b),{variant:"default"},{default:a(()=>t[7]||(t[7]=[e("span",{class:"mr-2"},"+",-1),k(" Add New User ")])),_:1,__:[7]})]),_:1},8,["href"])]),l(E,{class:"mb-4"},{default:a(()=>[l(N,{class:"pt-6"},{default:a(()=>[e("div",O,[e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium mb-2"},"Search",-1)),C(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>n.value=o),type:"text",placeholder:"Search by name, email, company, or phone...",class:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[q,n.value]])]),e("div",Q,[e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium mb-2"},"User Role",-1)),C(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>d.value=o),class:"rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},t[10]||(t[10]=[e("option",{value:""},"All Roles",-1),e("option",{value:"admin"},"Admin",-1),e("option",{value:"staff"},"Staff",-1),e("option",{value:"customer"},"Customer",-1)]),512),[[T,d.value]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium mb-2"},"Customer Verification",-1)),C(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>p.value=o),class:"rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},t[12]||(t[12]=[e("option",{value:""},"All Customers",-1),e("option",{value:"verified"},"Verified Customers",-1),e("option",{value:"unverified"},"Unverified Customers",-1)]),512),[[T,p.value]])]),e("div",X,[e("label",Z,[C(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>m.value=o),type:"checkbox",class:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"},null,512),[[I,m.value]]),t[14]||(t[14]=e("span",{class:"text-sm font-medium"},"Show Archived",-1))])])])])]),_:1})]),_:1}),l(E,null,{default:a(()=>[l(N,null,{default:a(()=>[e("div",ee,[e("table",te,[t[16]||(t[16]=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Name"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Company"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Email"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"User Role"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Phone"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),r(i).props.users.data.length?(u(),y("tbody",se,[(u(!0),y(G,null,H(r(i).props.users.data,o=>(u(),y("tr",{key:`${o.type}-${o.id}`,class:"hover:bg-muted"},[e("td",oe,c(o.name),1),e("td",re,c(o.company||"-"),1),e("td",ie,c(o.email),1),e("td",ae,[e("span",{class:V(["px-2 py-1 text-xs font-semibold rounded",D(o.user_role)])},c(o.user_role),3)]),e("td",le,c(o.phone||"-"),1),e("td",ne,[e("span",{class:V(["px-2 py-1 text-xs font-semibold rounded",F(o.status)])},c(o.status),3)]),e("td",ue,[e("div",pe,[l(r(b),{variant:"ghost",size:"sm",onClick:B=>M(o),title:"Edit"},{default:a(()=>[l($,{name:"edit",class:"h-4 w-4"})]),_:2},1032,["onClick"]),m.value?(u(),h(r(b),{key:0,variant:"ghost",size:"sm",onClick:B=>L(o),title:"Restore to Active"},{default:a(()=>[l($,{name:"check-circle-2",class:"h-4 w-4"})]),_:2},1032,["onClick"])):w("",!0),l(r(b),{variant:"ghost",size:"sm",onClick:B=>z(o),title:"Delete"},{default:a(()=>[l($,{name:"trash",class:"h-4 w-4"})]),_:2},1032,["onClick"])])])]))),128))])):(u(),y("tbody",de,[e("tr",null,[e("td",ce,[t[15]||(t[15]=k(" No users found. ")),n.value&&n.value.toString().trim().length||p.value||d.value||m.value?(u(),y("button",{key:0,type:"button",class:"underline underline-offset-4 ml-1",onClick:t[4]||(t[4]=o=>{n.value="",p.value="",d.value="",m.value=!1,g()})}," Clear filters ")):w("",!0)])])]))])]),r(i).props.users.last_page>1?(u(),y("div",fe,[e("div",me," Showing "+c(r(i).props.users.from)+" to "+c(r(i).props.users.to)+" of "+c(r(i).props.users.total)+" results ",1),e("div",ve,[r(i).props.users.prev_page_url?(u(),h(r(b),{key:0,variant:"outline",size:"sm",onClick:t[5]||(t[5]=o=>U(r(i).props.users.current_page-1))},{default:a(()=>t[17]||(t[17]=[k(" Previous ")])),_:1,__:[17]})):w("",!0),r(i).props.users.next_page_url?(u(),h(r(b),{key:1,variant:"outline",size:"sm",onClick:t[6]||(t[6]=o=>U(r(i).props.users.current_page+1))},{default:a(()=>t[18]||(t[18]=[k(" Next ")])),_:1,__:[18]})):w("",!0)])])):w("",!0)]),_:1})]),_:1})]),_:1}))}});export{it as default};
