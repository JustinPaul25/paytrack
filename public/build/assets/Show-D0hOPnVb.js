import{d as S,v as U,p as v,c,o,w as r,a as i,b as s,u as l,g as B,t as a,f as u,h as f,S as b,e as n,W as A}from"./app-BJGGIgA8.js";import{_}from"./index-riohrRak.js";import{e as L,f as N,g as j,_ as D}from"./AppLayout.vue_vue_type_script_setup_true_lang-6OmCq4tp.js";import{_ as I,a as P}from"./CardContent.vue_vue_type_script_setup_true_lang-DPB8yWHX.js";import{_ as T,a as E}from"./CardTitle.vue_vue_type_script_setup_true_lang-DvxTgNYv.js";import{S as g}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{_ as x}from"./Icon.vue_vue_type_script_setup_true_lang-DK3Ddpru.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_85568d9b_lang-CX_goT8l.js";import"./useForwardPropsEmits-CZzI8B5e.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-MrJHOVsW.js";import"./Teleport-MSIji786.js";import"./RovingFocusGroup-gSG5KO_4.js";import"./VisuallyHidden-BC0AEIfW.js";import"./DialogPortal-Dpb7jdpY.js";import"./x-BjkU5bBK.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DSD56j4j.js";import"./chevron-down-B83M1Caq.js";import"./chevron-right-CjvrEjDl.js";import"./square-pen-BALro00M.js";import"./calendar-C8vvPkHy.js";import"./check-CuaqBRk8.js";import"./chevron-left-Czs0_KEi.js";import"./circle-alert-C-R8aAcF.js";import"./piggy-bank-DQw4-LKJ.js";import"./circle-check-big-gvrLbzHW.js";import"./circle-check-BuF8fqTY.js";import"./trophy-B5vnFol2.js";import"./circle-x-C9HF6h3m.js";import"./clock-CUJ54ABb.js";import"./dollar-sign-BFWObhvv.js";import"./eye-off-dgfcsi04.js";import"./eye-BztToSRT.js";import"./loader-circle-ZvNwhMCX.js";import"./mail-tmHC_MiF.js";import"./map-pin-D8FvW8n7.js";import"./message-square-Cf895NaZ.js";import"./sun-Bomsfx5Q.js";import"./plus-CntaVqKq.js";import"./printer-_fQTJVRW.js";import"./search-BUl39vHB.js";import"./shopping-bag-DsL7THBq.js";import"./trash-2-DcMzLwyY.js";import"./trending-up-CSTqz3kz.js";const W={class:"flex items-center justify-between mb-6"},q={class:"text-2xl font-bold"},F={class:"flex gap-2"},R={class:"space-y-6"},Y={class:"flex items-start gap-4"},z={class:"flex-1"},G={class:"text-xl font-semibold"},H={key:0,class:"text-sm text-gray-600 mt-1"},J={key:1,class:"mt-2"},K={key:2,class:"mt-2"},M={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},O={class:"space-y-3"},Q={class:"text-sm mt-1"},X={key:0},Z={class:"text-sm mt-1"},tt={class:"space-y-3"},et={key:0},st={class:"text-sm text-gray-600"},ot={key:1},rt={key:0,class:"border-t pt-4"},it={class:"text-sm text-gray-600"},at={class:"border-t pt-4"},nt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},mt={key:0},lt={class:"text-sm mt-1"},ut={key:1},dt={class:"text-sm mt-1"},ft={class:"mt-4 flex justify-end"},se=S({__name:"Show",props:{customer:{},profile_image_url:{}},setup(w){const m=w,C=U(),d=v(()=>new URLSearchParams(window.location.search).get("from")==="users"),k=v(()=>d.value?[{title:"Users",href:"/admin/users"},{title:"View User",href:`/customers/${m.customer.id}?from=users`}]:[{title:"Customers",href:"/customers"},{title:"View Customer",href:`/customers/${m.customer.id}`}]);function y(t){if(m.profile_image_url)return m.profile_image_url;if(t.media&&t.media.length>0){const e=t.media.find(p=>p.mime_type&&p.mime_type.startsWith("image/"));return e?e.thumb_url||e.original_url:null}return null}function $(t){return t.name.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2)}function h(t){const e=[];return t.address&&e.push(t.address),t.purok&&e.push(`Purok ${t.purok}`),t.barangay&&e.push(`Barangay ${t.barangay}`),t.city_municipality&&e.push(t.city_municipality),t.province&&e.push(t.province),e.length>0?e.join(", "):""}async function V(){(await g.fire({title:"Verify Customer?",text:`Are you sure you want to verify ${m.customer.name}? They will receive an email notification and be able to log in.`,icon:"question",showCancelButton:!0,confirmButtonColor:"#8f5be8",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, verify",cancelButtonText:"Cancel"})).isConfirmed&&A.post(`/customers/${m.customer.id}/approve`,{},{onSuccess:()=>{g.fire("Customer Verified","The customer has been verified and notified via email.","success")},onError:()=>{const e=C.props.flash,p=(e==null?void 0:e.error)??"Failed to verify customer.";g.fire("Error",p,"error")}})}return(t,e)=>(o(),c(D,{breadcrumbs:k.value},{default:r(()=>[i(l(B),{title:d.value?"View User":"View Customer"},null,8,["title"]),s("div",W,[s("h1",q,a(d.value?"View User":"View Customer"),1),s("div",F,[t.customer.verified_at?u("",!0):(o(),c(l(_),{key:0,variant:"default",onClick:V,class:"bg-green-600 hover:bg-green-700"},{default:r(()=>[i(x,{name:"Check",class:"h-4 w-4 mr-2"}),e[0]||(e[0]=f(" Verify Customer "))]),_:1,__:[0]})),i(l(b),{href:t.route("customers.logs.show",t.customer.id)},{default:r(()=>[i(l(_),{variant:"outline"},{default:r(()=>[i(x,{name:"file-text",class:"h-4 w-4 mr-2"}),e[1]||(e[1]=f(" View Logs "))]),_:1,__:[1]})]),_:1},8,["href"])])]),i(I,null,{default:r(()=>[i(T,null,{default:r(()=>[i(E,null,{default:r(()=>[f(a(d.value?"User Information":"Customer Information"),1)]),_:1})]),_:1}),i(P,null,{default:r(()=>[s("div",R,[s("div",Y,[i(L,{class:"h-20 w-20"},{default:r(()=>[y(t.customer)?(o(),c(N,{key:0,src:y(t.customer),alt:t.customer.name},null,8,["src","alt"])):(o(),c(j,{key:1},{default:r(()=>[f(a($(t.customer)),1)]),_:1}))]),_:1}),s("div",z,[s("h2",G,a(t.customer.name),1),t.customer.company_name?(o(),n("p",H,a(t.customer.company_name),1)):u("",!0),t.customer.verified_at?(o(),n("div",J,e[2]||(e[2]=[s("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"}," Verified ",-1)]))):(o(),n("div",K,e[3]||(e[3]=[s("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800"}," Unverified ",-1)])))])]),s("div",M,[s("div",null,[e[6]||(e[6]=s("h3",{class:"text-sm font-semibold text-gray-700 mb-3"},"Contact Information",-1)),s("div",O,[s("div",null,[e[4]||(e[4]=s("label",{class:"text-sm font-medium text-gray-500"},"Email",-1)),s("p",Q,a(t.customer.email),1)]),t.customer.phone?(o(),n("div",X,[e[5]||(e[5]=s("label",{class:"text-sm font-medium text-gray-500"},"Phone",-1)),s("p",Z,a(t.customer.phone),1)])):u("",!0)])]),s("div",null,[e[8]||(e[8]=s("h3",{class:"text-sm font-semibold text-gray-700 mb-3"},"Address",-1)),s("div",tt,[h(t.customer)?(o(),n("div",et,[s("p",st,a(h(t.customer)),1)])):(o(),n("div",ot,e[7]||(e[7]=[s("p",{class:"text-sm text-gray-400 italic"},"No address provided",-1)])))])])]),t.customer.location?(o(),n("div",rt,[e[9]||(e[9]=s("h3",{class:"text-sm font-semibold text-gray-700 mb-3"},"Location Coordinates",-1)),s("p",it," Latitude: "+a(typeof t.customer.location=="object"?t.customer.location.lat:"N/A")+", Longitude: "+a(typeof t.customer.location=="object"?t.customer.location.lng:"N/A"),1)])):u("",!0),s("div",at,[e[12]||(e[12]=s("h3",{class:"text-sm font-semibold text-gray-700 mb-3"},"Additional Details",-1)),s("div",nt,[t.customer.created_at?(o(),n("div",mt,[e[10]||(e[10]=s("label",{class:"text-sm font-medium text-gray-500"},"Created At",-1)),s("p",lt,a(new Date(t.customer.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})),1)])):u("",!0),t.customer.updated_at?(o(),n("div",ut,[e[11]||(e[11]=s("label",{class:"text-sm font-medium text-gray-500"},"Last Updated",-1)),s("p",dt,a(new Date(t.customer.updated_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})),1)])):u("",!0)])])])]),_:1})]),_:1}),s("div",ft,[i(l(b),{href:d.value?t.route("admin.users"):t.route("customers.index")},{default:r(()=>[i(l(_),{variant:"outline"},{default:r(()=>e[13]||(e[13]=[f(" Back ")])),_:1,__:[13]})]),_:1},8,["href"])])]),_:1},8,["breadcrumbs"]))}});export{se as default};
