import{d as D,D as E,p as k,s as C,e as N,o as w,b as l,a as t,w as i,h as n,u as s,x as A,y as G,f as L,l as T,t as z,E as J}from"./app-CFepRPwu.js";import{_ as d}from"./InputError.vue_vue_type_script_setup_true_lang-DdSnOkF9.js";import{_ as m}from"./Label.vue_vue_type_script_setup_true_lang-BFiR0kh7.js";import{_ as f}from"./Input.vue_vue_type_script_setup_true_lang-XrjY7wlE.js";import{_ as q}from"./PhoneInput.vue_vue_type_script_setup_true_lang-DQuFK-eJ.js";import{_ as H}from"./index-DV2OFQX6.js";import{_ as W}from"./CardFooter.vue_vue_type_script_setup_true_lang-CErjnYTK.js";import K from"./LocationInput-BUagd4ec.js";import{_ as g}from"./SearchSelect.vue_vue_type_script_setup_true_lang-BGkoXXLE.js";import{g as Q,a as R,p as Y}from"./philippines-BZpectg7.js";const Z={class:"flex gap-4"},ee={class:"flex-1"},oe={class:"flex gap-4"},se={class:"flex-1"},te={class:"flex gap-4"},le={class:"flex-1"},ae={class:"flex gap-4"},ie={class:"flex-1"},re={class:"flex gap-4"},ne={class:"flex-1"},me={class:"flex gap-4"},de={class:"flex-1"},ue={class:"flex gap-4"},pe={class:"flex-1"},fe={class:"flex gap-4"},ce={class:"flex-1"},ge={class:"flex gap-4"},_e={class:"flex-1"},ye={class:"flex gap-4"},ve={class:"flex-1"},xe={class:"flex gap-4"},Ve={class:"flex-1"},be={key:0,class:"mt-2"},Se=["src"],Ie=D({__name:"Form",props:{customer:Object,profileImageUrl:String},setup(c){var _,y,v,x,V,b,S,P,U,h;const r=c,F=()=>{var u;if((u=r.customer)!=null&&u.location){const e=r.customer.location;if(typeof e=="string")try{return JSON.parse(e)}catch{return{lat:0,lng:0}}else if(typeof e=="object"&&e!==null){const a=parseFloat(e.lat),p=parseFloat(e.lng);if(!isNaN(a)&&!isNaN(p))return{lat:a,lng:p}}}return{lat:0,lng:0}},o=E({name:((_=r.customer)==null?void 0:_.name)||"",company_name:((y=r.customer)==null?void 0:y.company_name)||"",email:((v=r.customer)==null?void 0:v.email)||"",phone:((x=r.customer)==null?void 0:x.phone)||"",address:((V=r.customer)==null?void 0:V.address)||"",purok:((b=r.customer)==null?void 0:b.purok)||"",barangay:((S=r.customer)==null?void 0:S.barangay)||"",city_municipality:((P=r.customer)==null?void 0:P.city_municipality)||"",province:((U=r.customer)==null?void 0:U.province)||"",profile_image:null,customerId:((h=r.customer)==null?void 0:h.id)||null,location:F()}),X=Y,B=k(()=>Q(o.province)),I=k(()=>R(o.city_municipality));C(()=>o.province,()=>{o.city_municipality="",o.barangay=""}),C(()=>o.city_municipality,()=>{o.barangay=""});function $(u){const e=u.target;if(e.files&&e.files.length>0){const a=e.files[0],p=["image/jpeg","image/png"].includes(a.type),O=a.size<=2*1024*1024;if(!p||!O){o.profile_image=null,e.value="";const j=p?"File is too large. Max size is 2MB.":"Please select a JPG or PNG image.";window.alert(j);return}o.profile_image=a}else o.profile_image=null}function M(){o.customerId?o.post(route("customers.update",o.customerId),{forceFormData:!0,onSuccess:()=>o.reset("profile_image")}):o.post(route("customers.store"),{forceFormData:!0,onSuccess:()=>o.reset("profile_image")})}return(u,e)=>(w(),N("form",{onSubmit:J(M,["prevent"]),class:"space-y-6",enctype:"multipart/form-data"},[l("div",Z,[l("div",ee,[t(m,{for:"name"},{default:i(()=>e[10]||(e[10]=[n("Full name")])),_:1,__:[10]}),t(f,{id:"name",modelValue:s(o).name,"onUpdate:modelValue":e[0]||(e[0]=a=>s(o).name=a),placeholder:"e.g., Aisha Bello",required:""},null,8,["modelValue"]),e[11]||(e[11]=l("p",{class:"text-xs text-muted-foreground mt-1"},"This is the customer’s name.",-1)),t(d,{message:s(o).errors.name},null,8,["message"])])]),l("div",oe,[l("div",se,[t(m,{for:"company_name"},{default:i(()=>e[12]||(e[12]=[n("Company (optional)")])),_:1,__:[12]}),t(f,{id:"company_name",modelValue:s(o).company_name,"onUpdate:modelValue":e[1]||(e[1]=a=>s(o).company_name=a),placeholder:"e.g., Bright Ventures Ltd."},null,8,["modelValue"]),e[13]||(e[13]=l("p",{class:"text-xs text-muted-foreground mt-1"},"Add if this customer represents a company.",-1)),t(d,{message:s(o).errors.company_name},null,8,["message"])])]),l("div",te,[l("div",le,[t(m,{for:"email"},{default:i(()=>e[14]||(e[14]=[n("Email address")])),_:1,__:[14]}),t(f,{id:"email",modelValue:s(o).email,"onUpdate:modelValue":e[2]||(e[2]=a=>s(o).email=a),type:"email",placeholder:"name@company.com",required:""},null,8,["modelValue"]),e[15]||(e[15]=l("p",{class:"text-xs text-muted-foreground mt-1"},"We’ll use this to send receipts.",-1)),t(d,{message:s(o).errors.email},null,8,["message"])])]),l("div",ae,[l("div",ie,[t(m,{for:"phone"},{default:i(()=>e[16]||(e[16]=[n("Phone number (optional)")])),_:1,__:[16]}),t(q,{id:"phone",modelValue:s(o).phone,"onUpdate:modelValue":e[3]||(e[3]=a=>s(o).phone=a),placeholder:"XXXXXXXXXX"},null,8,["modelValue"]),e[17]||(e[17]=l("p",{class:"text-xs text-muted-foreground mt-1"},"Enter 10-digit Philippine mobile number.",-1)),t(d,{message:s(o).errors.phone},null,8,["message"])])]),l("div",re,[l("div",ne,[t(m,{for:"address"},{default:i(()=>e[18]||(e[18]=[n("Street Address (Optional)")])),_:1,__:[18]}),A(l("textarea",{id:"address","onUpdate:modelValue":e[4]||(e[4]=a=>s(o).address=a),placeholder:"House/Unit number, Street name",class:"w-full rounded border px-3 py-2 mt-1",rows:"2"},null,512),[[G,s(o).address]]),e[19]||(e[19]=l("p",{class:"text-xs text-muted-foreground mt-1"},"Additional address details if needed.",-1)),t(d,{message:s(o).errors.address},null,8,["message"])])]),l("div",me,[l("div",de,[t(m,{for:"province"},{default:i(()=>e[20]||(e[20]=[n("Province")])),_:1,__:[20]}),t(g,{"model-value":s(o).province,options:s(X),placeholder:"Select province",searchPlaceholder:"Search province...","onUpdate:modelValue":e[5]||(e[5]=a=>s(o).province=String(a??""))},null,8,["model-value","options"]),t(d,{message:s(o).errors.province},null,8,["message"])])]),l("div",ue,[l("div",pe,[t(m,{for:"city_municipality"},{default:i(()=>e[21]||(e[21]=[n("City/Municipality")])),_:1,__:[21]}),t(g,{"model-value":s(o).city_municipality,options:B.value,placeholder:"Select city or municipality",searchPlaceholder:"Search city or municipality...",disabled:!s(o).province,"onUpdate:modelValue":e[6]||(e[6]=a=>s(o).city_municipality=String(a??""))},null,8,["model-value","options","disabled"]),t(d,{message:s(o).errors.city_municipality},null,8,["message"])])]),l("div",fe,[l("div",ce,[t(m,{for:"barangay"},{default:i(()=>e[22]||(e[22]=[n("Barangay")])),_:1,__:[22]}),t(g,{"model-value":s(o).barangay,options:I.value,placeholder:"Select barangay",searchPlaceholder:"Search barangay...",disabled:!s(o).city_municipality,"onUpdate:modelValue":e[7]||(e[7]=a=>s(o).barangay=String(a??""))},null,8,["model-value","options","disabled"]),t(d,{message:s(o).errors.barangay},null,8,["message"])])]),l("div",ge,[l("div",_e,[t(m,{for:"purok"},{default:i(()=>e[23]||(e[23]=[n("Purok")])),_:1,__:[23]}),t(f,{id:"purok",modelValue:s(o).purok,"onUpdate:modelValue":e[8]||(e[8]=a=>s(o).purok=a),placeholder:"Enter purok"},null,8,["modelValue"]),t(d,{message:s(o).errors.purok},null,8,["message"])])]),l("div",ye,[l("div",ve,[t(m,{for:"location"},{default:i(()=>e[24]||(e[24]=[n("Location")])),_:1,__:[24]}),t(K,{modelValue:s(o).location,"onUpdate:modelValue":e[9]||(e[9]=a=>s(o).location=a)},null,8,["modelValue"])])]),l("div",xe,[l("div",Ve,[t(m,{for:"profile_image"},{default:i(()=>e[25]||(e[25]=[n("Profile picture (optional)")])),_:1,__:[25]}),t(f,{id:"profile_image",type:"file",accept:"image/jpeg,image/png",onChange:$}),e[26]||(e[26]=l("p",{class:"text-xs text-muted-foreground mt-1"},"Max 2MB, JPG or PNG.",-1)),t(d,{message:s(o).errors.profile_image},null,8,["message"]),c.profileImageUrl?(w(),N("div",be,[l("img",{src:c.profileImageUrl,alt:"Profile Image",class:"w-24 h-24 object-cover rounded-full"},null,8,Se)])):L("",!0)])]),t(W,{class:"flex gap-2 justify-end"},{default:i(()=>[t(s(H),{type:"submit",variant:"default"},{default:i(()=>[n(z(s(o).customerId?"Update Customer":"Create Customer"),1)]),_:1}),T(u.$slots,"footer")]),_:3})],32))}});export{Ie as _};
