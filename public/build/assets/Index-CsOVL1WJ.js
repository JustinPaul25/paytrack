import{d as it,v as pt,p as f,m as A,s as z,W as ut,c as bt,o as u,w as a,a as s,b as t,u as n,g as yt,e as g,f as b,h as N,x as Q,y as G,t as l,F as R,r as V,l as H}from"./app-Du4GjnqY.js";import{F as J,T as K,f as X,_ as _t}from"./AppLayout.vue_vue_type_script_setup_true_lang-C5-77bQX.js";import{_ as $,a as I}from"./CardContent.vue_vue_type_script_setup_true_lang-CsIZBT8t.js";import{_ as M,a as P}from"./CardTitle.vue_vue_type_script_setup_true_lang-Yjmxyl1g.js";import{_ as ct}from"./index-B1B-wuAy.js";import{_ as O}from"./Select.vue_vue_type_script_setup_true_lang-2dMc3g12.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_0fe2f881_lang-DHw6Z5C7.js";import{_ as gt,a as mt,b as U,c as Y}from"./TabsContent.vue_vue_type_script_setup_true_lang-DaPTTRDV.js";import{P as xt}from"./printer-BW5O5qnr.js";import{T as Z}from"./trending-up-nT4nOSge.js";import{_ as ft}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./RovingFocusGroup-Bek87zqo.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-BItx2YQm.js";import"./createLucideIcon-knc4Tqmj.js";import"./VisuallyHidden-8qINCcSU.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang--3inaUNk.js";import"./chevron-right-Ds8ma9mO.js";import"./RovingFocusItem-C-_JJ6Vy.js";const vt={class:"no-print flex items-center justify-between mb-6"},ht={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4"},wt={key:0},St={key:1},Tt={key:2},Dt={key:3},kt={class:"mb-4 grid grid-cols-3 gap-4"},Ct={class:"bg-blue-50 p-3 rounded"},Ft={class:"text-xl font-bold text-blue-600"},At={class:"bg-green-50 p-3 rounded"},Rt={class:"text-xl font-bold text-green-600"},Vt={class:"bg-purple-50 p-3 rounded"},$t={class:"text-xl font-bold text-purple-600"},It={class:"min-w-full border-collapse border border-gray-300"},Mt={class:"border border-gray-300 px-4 py-2"},Pt={class:"border border-gray-300 px-4 py-2"},Nt={class:"border border-gray-300 px-4 py-2 text-right"},Ut={class:"border border-gray-300 px-4 py-2 text-right"},Yt={class:"min-w-full border-collapse border border-gray-300"},jt={class:"border border-gray-300 px-4 py-2"},Bt={class:"border border-gray-300 px-4 py-2 text-right"},Ot={class:"border border-gray-300 px-4 py-2 text-right"},Et={class:"min-w-full border-collapse border border-gray-300"},Lt={class:"border border-gray-300 px-4 py-2"},Wt={class:"border border-gray-300 px-4 py-2 text-right"},qt={class:"border border-gray-300 px-4 py-2 text-right"},zt={class:"bg-gray-100 font-bold"},Qt={class:"border border-gray-300 px-4 py-2 text-right"},Gt={class:"border border-gray-300 px-4 py-2 text-right"},Ht={class:"mb-4 grid grid-cols-4 gap-4"},Jt={class:"bg-blue-50 p-3 rounded"},Kt={class:"text-xl font-bold text-blue-600"},Xt={class:"bg-yellow-50 p-3 rounded"},Zt={class:"text-xl font-bold text-yellow-600"},te={class:"bg-green-50 p-3 rounded"},ee={class:"text-xl font-bold text-green-600"},re={class:"bg-red-50 p-3 rounded"},se={class:"text-xl font-bold text-red-600"},le={class:"min-w-full border-collapse border border-gray-300"},oe={class:"border border-gray-300 px-4 py-2"},ae={class:"border border-gray-300 px-4 py-2"},de={class:"border border-gray-300 px-4 py-2"},ne={class:"border border-gray-300 px-4 py-2"},ie={class:"border border-gray-300 px-4 py-2"},pe={class:"border border-gray-300 px-4 py-2"},ue={class:"border border-gray-300 px-4 py-2"},be={class:"border border-gray-300 px-4 py-2"},ye={class:"border border-gray-300 px-4 py-2 text-right"},_e={class:"border border-gray-300 px-4 py-2"},ce={class:"bg-gray-100 font-bold"},ge={class:"border border-gray-300 px-4 py-2 text-right"},me={class:"text-sm text-gray-600 mb-4"},xe={class:"min-w-full border-collapse border border-gray-300 text-sm"},fe={class:"border border-gray-300 px-4 py-2"},ve={class:"border border-gray-300 px-4 py-2"},he={class:"border border-gray-300 px-4 py-2"},we={class:"border border-gray-300 px-4 py-2"},Se={class:"border border-gray-300 px-4 py-2 text-right"},Te={class:"border border-gray-300 px-4 py-2 text-right"},De={class:"border border-gray-300 px-4 py-2"},ke={class:"border border-gray-300 px-4 py-2"},Ce={class:"border border-gray-300 px-4 py-2"},Fe={class:"bg-gray-100 font-bold"},Ae={class:"border border-gray-300 px-4 py-2 text-right"},Re=it({__name:"Index",setup(Ve){const m=pt(),E={total_sales:0,total_invoices:0,average_order_value:0,sales_by_customer:[],sales_by_month:[]},tt={rows:[],totals:{income:0,expenses:0,net:0}},et={total:0,pending:0,completed:0,cancelled:0,total_fee:0},D=f(()=>{try{const r=m.props.salesReport;return!r||typeof r!="object"||!("total_sales"in r)?E:{total_sales:r.total_sales??0,total_invoices:r.total_invoices??0,average_order_value:r.average_order_value??0,sales_by_customer:Array.isArray(r.sales_by_customer)?r.sales_by_customer:[],sales_by_month:Array.isArray(r.sales_by_month)?r.sales_by_month:[]}}catch{return E}}),j=f(()=>{const r=m.props.transactions;return Array.isArray(r)?r:[]}),k=f(()=>{var e,o,i;const r=m.props.financialReport;return!r||typeof r!="object"?tt:{rows:Array.isArray(r.rows)?r.rows:[],totals:{income:((e=r.totals)==null?void 0:e.income)??0,expenses:((o=r.totals)==null?void 0:o.expenses)??0,net:((i=r.totals)==null?void 0:i.net)??0}}}),rt=f(()=>{const r=m.props.deliveries;return Array.isArray(r)?r:[]}),C=f(()=>{const r=m.props.deliverySummary;return!r||typeof r!="object"?et:{total:r.total??0,pending:r.pending??0,completed:r.completed??0,cancelled:r.cancelled??0,total_fee:r.total_fee??0}}),F=f(()=>m.props.filters?m.props.filters:{}),y=A(F.value.filter_type||"all"),v=A(F.value.filter_month||""),h=A(F.value.filter_year||new Date().getFullYear().toString()),w=A(F.value.start_date||""),S=A(F.value.end_date||"");z(()=>m.props.filters,r=>{if(r){const e=r;y.value=e.filter_type||"all",v.value=e.filter_month||"",h.value=e.filter_year||new Date().getFullYear().toString(),w.value=e.start_date||"",S.value=e.end_date||""}},{immediate:!0});const st=[{title:"Reports",href:"/reports"}],lt=[{value:"all",label:"All Time"},{value:"month",label:"Per Month"},{value:"year",label:"Per Year"},{value:"date_range",label:"Date Range"}],ot=f(()=>{const r=[],e=new Date;for(let o=0;o<12;o++){const i=new Date(e.getFullYear(),e.getMonth()-o,1),_=`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`,c=i.toLocaleDateString("en-US",{year:"numeric",month:"long"});r.push({value:_,label:c})}return r}),at=f(()=>{const r=[],e=new Date().getFullYear();for(let o=0;o<10;o++){const i=e-o;r.push({value:i.toString(),label:i.toString()})}return r});let B=null;z([y,v,h,w,S],()=>{B&&clearTimeout(B),B=setTimeout(()=>{dt()},300)});function dt(){const r={};y.value!=="all"&&(r.filter_type=y.value,y.value==="month"&&v.value?r.filter_month=v.value:y.value==="year"&&h.value?r.filter_year=h.value:y.value==="date_range"&&w.value&&S.value&&(r.start_date=w.value,r.end_date=S.value)),ut.get("/reports",r,{preserveState:!0,replace:!0})}function p(r){const e=r??0;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(e)}function nt(){window.print()}return(r,e)=>(u(),bt(_t,{breadcrumbs:st},{default:a(()=>[s(n(yt),{title:"Reports"}),t("div",vt,[e[6]||(e[6]=t("h1",{class:"text-2xl font-bold"},"Comprehensive Reports",-1)),s(n(ct),{onClick:nt,variant:"default"},{default:a(()=>[s(n(xt),{class:"h-4 w-4 mr-2"}),e[5]||(e[5]=g(" Print Report "))]),_:1,__:[5]})]),s($,{class:"no-print mb-6"},{default:a(()=>[s(M,null,{default:a(()=>[s(P,null,{default:a(()=>e[7]||(e[7]=[g("Filters")])),_:1,__:[7]})]),_:1}),s(I,null,{default:a(()=>[t("div",ht,[t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium mb-1"},"Filter Type",-1)),s(n(O),{modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=o=>y.value=o),options:lt,placeholder:"Select filter",class:"w-full"},null,8,["modelValue"])]),y.value==="month"?(u(),b("div",wt,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium mb-1"},"Month",-1)),s(n(O),{modelValue:v.value,"onUpdate:modelValue":e[1]||(e[1]=o=>v.value=o),options:ot.value,placeholder:"Select month",class:"w-full"},null,8,["modelValue","options"])])):N("",!0),y.value==="year"?(u(),b("div",St,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium mb-1"},"Year",-1)),s(n(O),{modelValue:h.value,"onUpdate:modelValue":e[2]||(e[2]=o=>h.value=o),options:at.value,placeholder:"Select year",class:"w-full"},null,8,["modelValue","options"])])):N("",!0),y.value==="date_range"?(u(),b("div",Tt,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium mb-1"},"Start Date",-1)),Q(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>w.value=o),type:"date",class:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},null,512),[[G,w.value]])])):N("",!0),y.value==="date_range"?(u(),b("div",Dt,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium mb-1"},"End Date",-1)),Q(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>S.value=o),type:"date",class:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},null,512),[[G,S.value]])])):N("",!0)])]),_:1})]),_:1}),s(n(gt),{"default-value":"sales",class:"w-full"},{default:a(()=>[s(n(mt),{class:"grid w-full grid-cols-4 no-print"},{default:a(()=>[s(n(U),{value:"sales"},{default:a(()=>[s(n(Z),{class:"h-4 w-4 mr-2"}),e[13]||(e[13]=g(" Sales "))]),_:1,__:[13]}),s(n(U),{value:"financial"},{default:a(()=>[s(n(J),{class:"h-4 w-4 mr-2"}),e[14]||(e[14]=g(" Financial Report "))]),_:1,__:[14]}),s(n(U),{value:"delivery"},{default:a(()=>[s(n(K),{class:"h-4 w-4 mr-2"}),e[15]||(e[15]=g(" Delivery Summary "))]),_:1,__:[15]}),s(n(U),{value:"transactions"},{default:a(()=>[s(n(X),{class:"h-4 w-4 mr-2"}),e[16]||(e[16]=g(" Transactions Report "))]),_:1,__:[16]})]),_:1}),s(n(Y),{value:"sales",class:"print-break"},{default:a(()=>[s($,null,{default:a(()=>[s(M,null,{default:a(()=>[s(P,{class:"flex items-center gap-2"},{default:a(()=>[s(n(Z),{class:"h-5 w-5"}),e[17]||(e[17]=g(" Sales Report "))]),_:1,__:[17]})]),_:1}),s(I,null,{default:a(()=>{var o,i,_,c,x;return[t("div",kt,[t("div",Ct,[e[18]||(e[18]=t("p",{class:"text-sm text-gray-600"},"Total Sales",-1)),t("p",Ft,l(p((o=D.value)==null?void 0:o.total_sales)),1)]),t("div",At,[e[19]||(e[19]=t("p",{class:"text-sm text-gray-600"},"Total Invoices",-1)),t("p",Rt,l(((i=D.value)==null?void 0:i.total_invoices)??0),1)]),t("div",Vt,[e[20]||(e[20]=t("p",{class:"text-sm text-gray-600"},"Average Order Value",-1)),t("p",$t,l(p((_=D.value)==null?void 0:_.average_order_value)),1)])]),e[23]||(e[23]=t("h3",{class:"font-semibold mb-2"},"Sales by Customer (Top 10)",-1)),t("table",It,[e[21]||(e[21]=t("thead",null,[t("tr",{class:"bg-gray-100"},[t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Customer Name"),t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Company"),t("th",{class:"border border-gray-300 px-4 py-2 text-right"},"Total Invoices"),t("th",{class:"border border-gray-300 px-4 py-2 text-right"},"Total Amount")])],-1)),t("tbody",null,[(u(!0),b(R,null,V(((c=D.value)==null?void 0:c.sales_by_customer)||[],d=>(u(),b("tr",{key:d.customer_name,class:"hover:bg-gray-50"},[t("td",Mt,l(d.customer_name),1),t("td",Pt,l(d.company_name||"N/A"),1),t("td",Nt,l(d.total_invoices),1),t("td",Ut,l(p(d.total_amount)),1)]))),128))])]),e[24]||(e[24]=t("h3",{class:"font-semibold mb-2 mt-4"},"Sales by Month",-1)),t("table",Yt,[e[22]||(e[22]=t("thead",null,[t("tr",{class:"bg-gray-100"},[t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Month"),t("th",{class:"border border-gray-300 px-4 py-2 text-right"},"Total Sales"),t("th",{class:"border border-gray-300 px-4 py-2 text-right"},"Invoice Count")])],-1)),t("tbody",null,[(u(!0),b(R,null,V(((x=D.value)==null?void 0:x.sales_by_month)||[],d=>(u(),b("tr",{key:d.month,class:"hover:bg-gray-50"},[t("td",jt,l(d.month),1),t("td",Bt,l(p(d.total_sales)),1),t("td",Ot,l(d.invoice_count),1)]))),128))])])]}),_:1,__:[23,24]})]),_:1})]),_:1}),s(n(Y),{value:"financial",class:"print-break"},{default:a(()=>[s($,null,{default:a(()=>[s(M,null,{default:a(()=>[s(P,{class:"flex items-center gap-2"},{default:a(()=>[s(n(J),{class:"h-5 w-5"}),e[25]||(e[25]=g(" Financial Report "))]),_:1,__:[25]})]),_:1}),s(I,null,{default:a(()=>{var o,i,_,c,x,d,L,W,q;return[t("table",Et,[e[27]||(e[27]=t("thead",null,[t("tr",{class:"bg-gray-100"},[t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Month"),t("th",{class:"border border-gray-300 px-4 py-2 text-right"},"Income"),t("th",{class:"border border-gray-300 px-4 py-2 text-right"},"Expenses"),t("th",{class:"border border-gray-300 px-4 py-2 text-right"},"Net")])],-1)),t("tbody",null,[(u(!0),b(R,null,V(((o=k.value)==null?void 0:o.rows)||[],T=>(u(),b("tr",{key:T.month,class:"hover:bg-gray-50"},[t("td",Lt,l(T.month),1),t("td",Wt,l(p(T.income)),1),t("td",qt,l(p(T.expenses)),1),t("td",{class:H(["border border-gray-300 px-4 py-2 text-right",T.net>=0?"text-green-600":"text-red-600"])},l(p(T.net)),3)]))),128))]),t("tfoot",null,[t("tr",zt,[e[26]||(e[26]=t("td",{class:"border border-gray-300 px-4 py-2"},"Total",-1)),t("td",Qt,l(p((_=(i=k.value)==null?void 0:i.totals)==null?void 0:_.income)),1),t("td",Gt,l(p((x=(c=k.value)==null?void 0:c.totals)==null?void 0:x.expenses)),1),t("td",{class:H(["border border-gray-300 px-4 py-2 text-right",(((L=(d=k.value)==null?void 0:d.totals)==null?void 0:L.net)??0)>=0?"text-green-600":"text-red-600"])},l(p((q=(W=k.value)==null?void 0:W.totals)==null?void 0:q.net)),3)])])])]}),_:1})]),_:1})]),_:1}),s(n(Y),{value:"delivery",class:"print-break"},{default:a(()=>[s($,null,{default:a(()=>[s(M,null,{default:a(()=>[s(P,{class:"flex items-center gap-2"},{default:a(()=>[s(n(K),{class:"h-5 w-5"}),e[28]||(e[28]=g(" Delivery Summary "))]),_:1,__:[28]})]),_:1}),s(I,null,{default:a(()=>{var o,i,_,c,x;return[t("div",Ht,[t("div",Jt,[e[29]||(e[29]=t("p",{class:"text-sm text-gray-600"},"Total Deliveries",-1)),t("p",Kt,l(((o=C.value)==null?void 0:o.total)??0),1)]),t("div",Xt,[e[30]||(e[30]=t("p",{class:"text-sm text-gray-600"},"Pending",-1)),t("p",Zt,l(((i=C.value)==null?void 0:i.pending)??0),1)]),t("div",te,[e[31]||(e[31]=t("p",{class:"text-sm text-gray-600"},"Completed",-1)),t("p",ee,l(((_=C.value)==null?void 0:_.completed)??0),1)]),t("div",re,[e[32]||(e[32]=t("p",{class:"text-sm text-gray-600"},"Total Delivery Fees",-1)),t("p",se,l(p((c=C.value)==null?void 0:c.total_fee)),1)])]),t("table",le,[e[35]||(e[35]=t("thead",null,[t("tr",{class:"bg-gray-100"},[t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"ID"),t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Customer"),t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Delivery Address"),t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Contact Person"),t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Contact Phone"),t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Delivery Date"),t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Time"),t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Status"),t("th",{class:"border border-gray-300 px-4 py-2 text-right"},"Fee"),t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Invoice #")])],-1)),t("tbody",null,[(u(!0),b(R,null,V(rt.value||[],d=>(u(),b("tr",{key:d.id,class:"hover:bg-gray-50"},[t("td",oe,l(d.id),1),t("td",ae,l(d.customer_name),1),t("td",de,l(d.delivery_address),1),t("td",ne,l(d.contact_person),1),t("td",ie,l(d.contact_phone),1),t("td",pe,l(d.delivery_date),1),t("td",ue,l(d.delivery_time),1),t("td",be,l(d.status),1),t("td",ye,l(p(d.delivery_fee)),1),t("td",_e,l(d.invoice_number),1)]))),128))]),t("tfoot",null,[t("tr",ce,[e[33]||(e[33]=t("td",{colspan:"8",class:"border border-gray-300 px-4 py-2 text-right"},"Total Delivery Fees:",-1)),t("td",ge,l(p((x=C.value)==null?void 0:x.total_fee)),1),e[34]||(e[34]=t("td",{class:"border border-gray-300 px-4 py-2"},null,-1))])])])]}),_:1})]),_:1})]),_:1}),s(n(Y),{value:"transactions",class:"print-break"},{default:a(()=>[s($,null,{default:a(()=>[s(M,null,{default:a(()=>[s(P,{class:"flex items-center gap-2"},{default:a(()=>[s(n(X),{class:"h-5 w-5"}),e[36]||(e[36]=g(" Transactions Report "))]),_:1,__:[36]})]),_:1}),s(I,null,{default:a(()=>[t("p",me,"Total Transactions: "+l((j.value||[]).length),1),t("table",xe,[e[39]||(e[39]=t("thead",null,[t("tr",{class:"bg-gray-100"},[t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Invoice #"),t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Customer"),t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Company"),t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Product"),t("th",{class:"border border-gray-300 px-4 py-2 text-right"},"Quantity"),t("th",{class:"border border-gray-300 px-4 py-2 text-right"},"Amount"),t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Status"),t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Payment Method"),t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Date")])],-1)),t("tbody",null,[(u(!0),b(R,null,V(j.value||[],o=>(u(),b("tr",{key:o.id,class:"hover:bg-gray-50"},[t("td",fe,l(o.invoice_number),1),t("td",ve,l(o.customer_name),1),t("td",he,l(o.company_name||"N/A"),1),t("td",we,l(o.product_name),1),t("td",Se,l(o.quantity),1),t("td",Te,l(p(o.total_amount)),1),t("td",De,l(o.status),1),t("td",ke,l(o.payment_method),1),t("td",Ce,l(o.transaction_date),1)]))),128))]),t("tfoot",null,[t("tr",Fe,[e[37]||(e[37]=t("td",{colspan:"5",class:"border border-gray-300 px-4 py-2 text-right"},"Total:",-1)),t("td",Ae,l(p((j.value||[]).reduce((o,i)=>o+(i.total_amount||0),0))),1),e[38]||(e[38]=t("td",{colspan:"3",class:"border border-gray-300 px-4 py-2"},null,-1))])])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),Je=ft(Re,[["__scopeId","data-v-b39fd847"]]);export{Je as default};
