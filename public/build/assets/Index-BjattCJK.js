import{d as L,A as U,j as C,L as E,z as R,W as _,c as v,o as n,w as o,a as r,b as e,u as s,g as W,T as Y,B as $,t as d,J,C as q,h as u,x as B,e as g,S as y,f as p,F as G,r as K}from"./app-CHFGHI2U.js";import{_ as m}from"./index-BPZtiyvS.js";import{_ as O}from"./AppLayout.vue_vue_type_script_setup_true_lang-CiRTWXZU.js";import{_ as w,a as k}from"./CardContent.vue_vue_type_script_setup_true_lang-DKQWnTwG.js";import{_ as j}from"./Icon.vue_vue_type_script_setup_true_lang-CnlCWT1a.js";import{S as z}from"./sweetalert2.esm.all-BQIkj5Wb.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_0fe2f881_lang-D4_hQTes.js";import"./RovingFocusGroup-RbAYv2er.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-C1jxNv1I.js";import"./createLucideIcon-CVX3-DV0.js";import"./VisuallyHidden-B2gL0Z8P.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-a1xrzGkp.js";import"./chevron-right-DhIVwPtD.js";import"./square-pen-pIQKAcFZ.js";import"./trophy-CM4iH4Vt.js";import"./check-BB1u7U8H.js";import"./chevron-left-DOnarU-H.js";import"./circle-alert-CLNjjmre.js";import"./piggy-bank-CPbAGnOF.js";import"./circle-check-big-D4bVkYS1.js";import"./message-square-DI5DQ5Y1.js";import"./clock-Ba7sw4TH.js";import"./dollar-sign-CCmHwkGW.js";import"./eye-off-D4erxetw.js";import"./eye-BLluGz8j.js";import"./file-text-CTPsER1w.js";import"./loader-circle-aoHNyS2w.js";import"./sun-QrthIG4t.js";import"./printer-CRuI_uHC.js";import"./search-DDm5OKbs.js";import"./trash-2-QwGc1T6b.js";import"./trending-up-CilKElnA.js";const Q={class:"grid grid-cols-1 lg:grid-cols-4 gap-6 mt-8 mb-6"},X={class:"flex items-center justify-between"},Z={class:"text-xl font-bold text-blue-600"},ee={class:"flex items-center justify-between"},te={class:"text-xl font-bold text-green-600"},se={class:"flex items-center justify-between"},oe={class:"text-xl font-bold text-yellow-600"},re={class:"flex items-center justify-between"},le={class:"text-xl font-bold text-emerald-600"},ie={class:"flex items-center justify-between mt-4 mb-2"},ae={class:"flex gap-2 items-center"},ne={class:"flex items-center gap-2"},de={key:0},ue={key:0,class:"py-12 text-center"},pe={class:"flex items-center justify-center gap-2"},me={key:1,class:"py-12 text-center"},fe={key:0,class:"text-sm text-gray-600 mb-6"},ce={key:1},ve={class:"min-w-full divide-y divide-border"},ge={class:"px-4 py-2 font-medium"},xe={class:"px-4 py-2"},ye={class:"font-medium"},he={key:0,class:"text-sm text-gray-500"},_e={class:"px-4 py-2 font-medium"},we={class:"px-4 py-2"},ke={class:"px-4 py-2"},be={class:"px-4 py-2 text-sm text-gray-500"},Ce={class:"px-4 py-2"},je={class:"flex gap-2"},Se={key:0,class:"flex items-center justify-between mt-6"},Be={class:"text-sm text-gray-700"},ze={class:"flex gap-2"},Te={class:"fixed bottom-6 right-6 z-50"},Ie={key:0,class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Pe={key:1,class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},pt=L({__name:"Index",setup($e){var P;const l=U(),x=Array.isArray((P=l.props.auth)==null?void 0:P.userRoles)&&l.props.auth.userRoles.includes("Customer"),b=C(l.props.filters?l.props.filters:{}),c=C(typeof b.value.search=="string"?b.value.search:""),f=C(typeof b.value.status=="string"?b.value.status:""),h=C(!1),V=[{title:"Invoices",href:"/invoices"}];E(()=>{c.value=l.props.filters&&typeof l.props.filters.search=="string"?l.props.filters.search:"",f.value=l.props.filters&&typeof l.props.filters.status=="string"?l.props.filters.status:""});let S=null;R(c,a=>{S&&clearTimeout(S),S=setTimeout(()=>{_.get("/invoices",{search:a||void 0,status:f.value||void 0},{preserveState:!0,replace:!0})},400)});function T(a){_.get("/invoices",{search:c.value||void 0,status:f.value||void 0,page:a},{preserveState:!0,replace:!0})}async function D(a){(await z.fire({title:"Delete this invoice?",text:"This will remove the invoice permanently. You canâ€™t undo this.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#8f5be8",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it"})).isConfirmed&&_.delete(`/invoices/${a}`,{onSuccess:()=>{z.fire("Deleted","The invoice was deleted.","success")}})}function M(a){_.post(route("invoices.markPaid",a),{},{preserveScroll:!0,onSuccess:()=>{z.fire({toast:!0,position:"top-end",icon:"success",title:"Invoice marked as paid",showConfirmButton:!1,timer:2e3})}})}function A(a){switch(a){case"draft":return"bg-gray-100 text-gray-800";case"pending":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}function I(a){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(a)}function N(){f.value=f.value==="pending"?"":"pending",_.get("/invoices",{search:c.value||void 0,status:f.value||void 0},{preserveState:!0,replace:!0})}function F(a){return new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"2-digit"})}return(a,t)=>(n(),v(O,{breadcrumbs:V},{default:o(()=>[r(s(W),{title:"Invoices"}),r(Y,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 transform -translate-y-4","enter-to-class":"opacity-100 transform translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 transform translate-y-0","leave-to-class":"opacity-0 transform -translate-y-4"},{default:o(()=>[$(e("div",Q,[r(w,{class:"relative overflow-hidden"},{default:o(()=>[r(k,{class:"p-6"},{default:o(()=>[e("div",X,[e("div",null,[t[5]||(t[5]=e("p",{class:"text-sm font-medium text-muted-foreground"},"Total Invoices",-1)),e("p",Z,d(s(l).props.stats.totalInvoices),1)]),t[6]||(t[6]=e("div",{class:"h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1))])]),_:1})]),_:1}),r(w,{class:"relative overflow-hidden"},{default:o(()=>[r(k,{class:"p-6"},{default:o(()=>[e("div",ee,[e("div",null,[t[7]||(t[7]=e("p",{class:"text-sm font-medium text-muted-foreground"},"Total Amount",-1)),e("p",te,d(I(s(l).props.stats.totalAmount)),1)]),t[8]||(t[8]=e("div",{class:"h-12 w-12 rounded-full bg-green-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1))])]),_:1})]),_:1}),r(w,{class:"relative overflow-hidden"},{default:o(()=>[r(k,{class:"p-6"},{default:o(()=>[e("div",se,[e("div",null,[t[9]||(t[9]=e("p",{class:"text-sm font-medium text-muted-foreground"},"Pending",-1)),e("p",oe,d(s(l).props.stats.pendingInvoices),1)]),t[10]||(t[10]=e("div",{class:"h-12 w-12 rounded-full bg-yellow-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])]),_:1})]),_:1}),r(w,{class:"relative overflow-hidden"},{default:o(()=>[r(k,{class:"p-6"},{default:o(()=>[e("div",re,[e("div",null,[t[11]||(t[11]=e("p",{class:"text-sm font-medium text-muted-foreground"},"Paid",-1)),e("p",le,d(s(l).props.stats.paidInvoices),1)]),t[12]||(t[12]=e("div",{class:"h-12 w-12 rounded-full bg-emerald-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])]),_:1})]),_:1})],512),[[J,h.value]])]),_:1}),e("div",ie,[e("div",ae,[$(e("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>c.value=i),type:"text",placeholder:"Search by customer name",class:"rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[q,c.value]])]),e("div",ne,[r(s(m),{variant:"outline",class:B(f.value==="pending"?"border-yellow-400 text-yellow-600 bg-yellow-50":""),onClick:N},{default:o(()=>t[13]||(t[13]=[g(" Unpaid ")])),_:1,__:[13]},8,["class"]),s(x)?u("",!0):(n(),v(s(y),{key:0,href:a.route("invoices.create")},{default:o(()=>[r(s(m),{variant:"default"},{default:o(()=>t[14]||(t[14]=[e("span",{class:"mr-2"},"+",-1),g(" Add New Invoice ")])),_:1,__:[14]})]),_:1},8,["href"]))])]),r(w,null,{default:o(()=>[r(k,null,{default:o(()=>[s(l).props.invoices.data.length===0?(n(),p("div",de,[c.value&&c.value.trim().length||f.value&&f.value.trim().length?(n(),p("div",ue,[t[17]||(t[17]=e("div",{class:"text-xl font-semibold mb-2"},"No results found",-1)),t[18]||(t[18]=e("p",{class:"text-sm text-gray-600 mb-6"}," We couldn't find any invoices matching your search/filter. ",-1)),e("div",pe,[r(s(m),{variant:"outline",onClick:t[1]||(t[1]=i=>{c.value="",f.value=""})},{default:o(()=>t[15]||(t[15]=[g("Clear search")])),_:1,__:[15]}),s(x)?u("",!0):(n(),v(s(y),{key:0,href:a.route("invoices.create")},{default:o(()=>[r(s(m),{variant:"default"},{default:o(()=>t[16]||(t[16]=[e("span",{class:"mr-2"},"+",-1),g(" Create Invoice ")])),_:1,__:[16]})]),_:1},8,["href"]))])])):(n(),p("div",me,[t[20]||(t[20]=e("div",{class:"text-xl font-semibold mb-2"},"No invoices yet",-1)),s(x)?u("",!0):(n(),p("p",fe,"Create your first invoice to get started.")),s(x)?u("",!0):(n(),v(s(y),{key:1,href:a.route("invoices.create")},{default:o(()=>[r(s(m),{variant:"default"},{default:o(()=>t[19]||(t[19]=[e("span",{class:"mr-2"},"+",-1),g(" Create Invoice ")])),_:1,__:[19]})]),_:1},8,["href"]))]))])):(n(),p("div",ce,[e("table",ve,[t[25]||(t[25]=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 text-left"},"Reference #"),e("th",{class:"px-4 py-2 text-left"},"Customer"),e("th",{class:"px-4 py-2 text-left"},"Total"),e("th",{class:"px-4 py-2 text-left"},"Status"),e("th",{class:"px-4 py-2 text-left"},"Payment"),e("th",{class:"px-4 py-2 text-left"},"Date"),e("th",{class:"px-4 py-2 text-left"},"Actions")])],-1)),e("tbody",null,[(n(!0),p(G,null,K(s(l).props.invoices.data,i=>(n(),p("tr",{key:i.id,class:"hover:bg-muted"},[e("td",ge,[r(s(y),{href:a.route("invoices.show",i.id),class:"underline underline-offset-4"},{default:o(()=>[g(d(i.reference_number),1)]),_:2},1032,["href"])]),e("td",xe,[e("div",null,[e("div",ye,d(i.customer.name),1),i.customer.company_name?(n(),p("div",he,d(i.customer.company_name),1)):u("",!0)])]),e("td",_e,d(I(i.total_amount)),1),e("td",we,[e("span",{class:B(["px-2 py-1 rounded-full text-xs font-medium",A(i.status)])},d(i.status.charAt(0).toUpperCase()+i.status.slice(1)),3)]),e("td",ke,d(i.payment_method.replace("_"," ")),1),e("td",be,d(F(i.created_at)),1),e("td",Ce,[e("div",je,[r(s(y),{href:a.route("invoices.show",i.id)},{default:o(()=>[r(s(m),{variant:"ghost",size:"sm"},{default:o(()=>[r(j,{name:"eye",class:"h-4 w-4"}),t[21]||(t[21]=e("span",{class:"ml-1"},"View",-1))]),_:1,__:[21]})]),_:2},1032,["href"]),s(x)?u("",!0):(n(),v(s(y),{key:0,href:a.route("invoices.edit",i.id)},{default:o(()=>[r(s(m),{variant:"ghost",size:"sm"},{default:o(()=>[r(j,{name:"edit",class:"h-4 w-4"}),t[22]||(t[22]=e("span",{class:"ml-1"},"Edit",-1))]),_:1,__:[22]})]),_:2},1032,["href"])),!s(x)&&i.status==="pending"?(n(),v(s(m),{key:1,variant:"ghost",size:"sm",onClick:H=>M(i.id)},{default:o(()=>[r(j,{name:"check",class:"h-4 w-4"}),t[23]||(t[23]=e("span",{class:"ml-1"},"Mark as Paid",-1))]),_:2,__:[23]},1032,["onClick"])):u("",!0),s(x)?u("",!0):(n(),v(s(m),{key:2,variant:"ghost",size:"sm",onClick:H=>D(i.id)},{default:o(()=>[r(j,{name:"trash",class:"h-4 w-4"}),t[24]||(t[24]=e("span",{class:"ml-1"},"Delete",-1))]),_:2,__:[24]},1032,["onClick"]))])])]))),128))])]),s(l).props.invoices.last_page>1?(n(),p("div",Se,[e("div",Be," Showing "+d(s(l).props.invoices.from)+" to "+d(s(l).props.invoices.to)+" of "+d(s(l).props.invoices.total)+" results ",1),e("div",ze,[s(l).props.invoices.prev_page_url?(n(),v(s(m),{key:0,variant:"outline",size:"sm",onClick:t[2]||(t[2]=i=>T(s(l).props.invoices.current_page-1))},{default:o(()=>t[26]||(t[26]=[g(" Previous ")])),_:1,__:[26]})):u("",!0),s(l).props.invoices.next_page_url?(n(),v(s(m),{key:1,variant:"outline",size:"sm",onClick:t[3]||(t[3]=i=>T(s(l).props.invoices.current_page+1))},{default:o(()=>t[27]||(t[27]=[g(" Next ")])),_:1,__:[27]})):u("",!0)])])):u("",!0)]))]),_:1})]),_:1}),e("div",Te,[e("button",{onClick:t[4]||(t[4]=i=>h.value=!h.value),class:B(["h-12 w-12 rounded-full shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center",h.value?"bg-red-500 hover:bg-red-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"])},[h.value?(n(),p("svg",Pe,t[29]||(t[29]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)]))):(n(),p("svg",Ie,t[28]||(t[28]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},null,-1)])))],2)])]),_:1}))}});export{pt as default};
