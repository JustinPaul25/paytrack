import{g as B,u as D}from"./LocationInput.vue_vue_type_style_index_0_scoped_0fdfc5f8_lang-CmKPS-pE.js";import{m,p as A,bf as U,a0 as k,d as F,I as $,b2 as L,Q as R,s as G,K,c as V,o as j,w as y,a as z,u as w,l as Y}from"./app-CSNJKDtd.js";import{S as h,P as q}from"./index-C50IJlsn.js";import{i as H,g as x,c as Q}from"./useForwardPropsEmits-Ca66-3Sr.js";function J(e){const o=H({dir:m("ltr")});return A(()=>{var n;return(e==null?void 0:e.value)||((n=o.dir)==null?void 0:n.value)||"ltr"})}function M(){const e=m(),o=A(()=>{var n,t;return["#text","#comment"].includes((n=e.value)==null?void 0:n.$el.nodeName)?(t=e.value)==null?void 0:t.$el.nextElementSibling:B(e)});return{primitiveElement:e,currentElement:o}}const _="data-reka-collection-item";function W(e={}){const{key:o="",isProvider:n=!1}=e,t=`${o}CollectionProvider`;let r;if(n){const s=m(new Map);r={collectionRef:m(),itemMap:s},U(t,r)}else r=k(t);const C=(s=!1)=>{const a=r.collectionRef.value;if(!a)return[];const i=Array.from(a.querySelectorAll(`[${_}]`)),c=Array.from(r.itemMap.value.values()).sort((f,v)=>i.indexOf(f.ref)-i.indexOf(v.ref));return s?c:c.filter(f=>f.ref.dataset.disabled!=="")},b=F({name:"CollectionSlot",setup(s,{slots:a}){const{primitiveElement:i,currentElement:u}=M();return G(u,()=>{r.collectionRef.value=u.value}),()=>R(h,{ref:i},a)}}),S=F({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(s,{slots:a,attrs:i}){const{primitiveElement:u,currentElement:c}=M();return $(f=>{if(c.value){const v=L(c.value);r.itemMap.value.set(v,{ref:c.value,value:s.value}),f(()=>r.itemMap.value.delete(v))}}),()=>R(h,{...i,[_]:"",ref:u},a)}}),I=A(()=>Array.from(r.itemMap.value.values())),E=A(()=>r.itemMap.value.size);return{getItems:C,reactiveItems:I,itemMapSize:E,CollectionSlot:b,CollectionItem:S}}const X="rovingFocusGroup.onEntryFocus",Z={bubbles:!1,cancelable:!0},ee={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function te(e,o){return o!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function le(e,o,n){const t=te(e.key,n);if(!(o==="vertical"&&["ArrowLeft","ArrowRight"].includes(t))&&!(o==="horizontal"&&["ArrowUp","ArrowDown"].includes(t)))return ee[t]}function oe(e,o=!1){const n=x();for(const t of e)if(t===n||(t.focus({preventScroll:o}),x()!==n))return}function ue(e,o){return e.map((n,t)=>e[(o+t)%e.length])}const[ce,ne]=Q("RovingFocusGroup"),fe=F({__name:"RovingFocusGroup",props:{orientation:{default:void 0},dir:{},loop:{type:Boolean,default:!1},currentTabStopId:{},defaultCurrentTabStopId:{},preventScrollOnEntryFocus:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["entryFocus","update:currentTabStopId"],setup(e,{expose:o,emit:n}){const t=e,r=n,{loop:C,orientation:b,dir:S}=K(t),I=J(S),E=D(t,"currentTabStopId",r,{defaultValue:t.defaultCurrentTabStopId,passive:t.currentTabStopId===void 0}),s=m(!1),a=m(!1),i=m(0),{getItems:u,CollectionSlot:c}=W({isProvider:!0});function f(l){const p=!a.value;if(l.currentTarget&&l.target===l.currentTarget&&p&&!s.value){const g=new CustomEvent(X,Z);if(l.currentTarget.dispatchEvent(g),r("entryFocus",g),!g.defaultPrevented){const T=u().map(d=>d.ref).filter(d=>d.dataset.disabled!==""),P=T.find(d=>d.getAttribute("data-active")===""),O=T.find(d=>d.id===E.value),N=[P,O,...T].filter(Boolean);oe(N,t.preventScrollOnEntryFocus)}}a.value=!1}function v(){setTimeout(()=>{a.value=!1},1)}return o({getItems:u}),ne({loop:C,dir:I,orientation:b,currentTabStopId:E,onItemFocus:l=>{E.value=l},onItemShiftTab:()=>{s.value=!0},onFocusableItemAdd:()=>{i.value++},onFocusableItemRemove:()=>{i.value--}}),(l,p)=>(j(),V(w(c),null,{default:y(()=>[z(w(q),{tabindex:s.value||i.value===0?-1:0,"data-orientation":w(b),as:l.as,"as-child":l.asChild,dir:w(I),style:{outline:"none"},onMousedown:p[0]||(p[0]=g=>a.value=!0),onMouseup:v,onFocus:f,onBlur:p[1]||(p[1]=g=>s.value=!1)},{default:y(()=>[Y(l.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}});export{fe as _,W as a,M as b,oe as f,le as g,ce as i,J as u,ue as w};
