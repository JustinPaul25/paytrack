import{d as A,v as N,m as b,s as w,W as _,c,o,w as a,a as f,b as t,u as r,g as E,x as z,y as D,h as d,e as p,t as u,f as g,F,r as U,n as j}from"./app-qA0CnBWe.js";import{_ as v}from"./index-DKsLgjKN.js";import{_ as L}from"./AppLayout.vue_vue_type_script_setup_true_lang-BLollNnU.js";import{_ as R,a as W}from"./CardContent.vue_vue_type_script_setup_true_lang-DFxNC8fq.js";import{_ as Y,a as q}from"./CardTitle.vue_vue_type_script_setup_true_lang-PsohhGio.js";import{S as y}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{C as V}from"./circle-check-B9DMRNBp.js";import{C as $}from"./circle-x-DdhefOoK.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_85568d9b_lang-C02RUasq.js";import"./useForwardPropsEmits-CwUzb49y.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CLRWpV5h.js";import"./Teleport-DIfWgdf9.js";import"./RovingFocusGroup-gU1KHB92.js";import"./VisuallyHidden-qt70HzaR.js";import"./DialogPortal-BX8gIO6T.js";import"./x-Da1o-ysX.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B1dhHsl6.js";import"./chevron-down-CCBk2xD7.js";import"./chevron-right-r24-WVSv.js";const M={class:"flex items-center justify-between mt-4 mb-2 gap-4"},X={class:"flex gap-2 items-center flex-1"},G={class:"flex gap-2"},H={key:0},I={key:1},J={key:2},K={class:"text-sm font-normal text-muted-foreground ml-2"},O={class:"min-w-full divide-y divide-border"},Q={key:0},Z={class:"px-4 py-2 font-medium"},ee={class:"px-4 py-2 text-sm text-gray-500"},te={class:"px-4 py-2 text-sm text-gray-500"},se={class:"px-4 py-2 text-sm text-gray-500"},re={class:"px-4 py-2"},oe={class:"px-4 py-2 text-sm text-gray-500"},ie={class:"px-4 py-2 text-sm text-gray-500"},ne={class:"px-4 py-2"},ae={class:"flex gap-2"},le={key:1},ue={colspan:"8",class:"px-4 py-10 text-center text-sm text-gray-500"},fe={key:0,class:"flex items-center justify-between mt-6"},de={class:"text-sm text-gray-700"},pe={class:"flex gap-2"},Ee=A({__name:"CustomerVerification",setup(me){const i=N(),x=b(i.props.filters?i.props.filters:{status:"pending"}),m=b(typeof x.value.search=="string"?x.value.search:""),l=b(typeof x.value.status=="string"?x.value.status:"pending"),S=[{title:"Users",href:"/users"},{title:"Customer Verification",href:"/users/customer-verification"}];let C=null;w(m,n=>{C&&clearTimeout(C),C=setTimeout(()=>{_.get("/users/customer-verification",{search:n||void 0,status:l.value},{preserveState:!0,replace:!0})},400)}),w(l,n=>{_.get("/users/customer-verification",{search:m.value||void 0,status:n},{preserveState:!0,replace:!0})});function h(n){_.get("/users/customer-verification",{search:m.value,status:l.value,page:n},{preserveState:!0,replace:!0})}async function B(n,e){(await y.fire({title:"Verify Customer?",text:`Are you sure you want to verify ${e}?`,icon:"question",showCancelButton:!0,confirmButtonColor:"#10b981",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, verify customer"})).isConfirmed&&_.post(`/customers/${n}/verify`,{},{onSuccess:()=>{y.fire("Customer Verified","Customer has been verified successfully.","success")},onError:()=>{y.fire("Error","Failed to verify customer. Please try again.","error")}})}async function P(n,e){(await y.fire({title:"Remove Verification?",text:`Are you sure you want to remove verification for ${e}?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, remove verification"})).isConfirmed&&_.post(`/customers/${n}/unverify`,{},{onSuccess:()=>{y.fire("Verification Removed","Customer verification has been removed successfully.","success")},onError:()=>{y.fire("Error","Failed to remove verification. Please try again.","error")}})}function k(n){return n?new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"—"}return(n,e)=>(o(),c(L,{breadcrumbs:S},{default:a(()=>[f(r(E),{title:"Customer Verification"}),e[16]||(e[16]=t("div",{class:"flex items-center justify-between mb-6"},[t("h1",{class:"text-2xl font-bold"},"Customer Verification")],-1)),t("div",M,[t("div",X,[z(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>m.value=s),type:"text",placeholder:"Search customers by name, company, or email...",class:"rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 flex-1"},null,512),[[D,m.value]])]),t("div",G,[f(r(v),{onClick:e[1]||(e[1]=s=>l.value="pending"),variant:l.value==="pending"?"default":"outline"},{default:a(()=>e[7]||(e[7]=[d(" Pending ")])),_:1,__:[7]},8,["variant"]),f(r(v),{onClick:e[2]||(e[2]=s=>l.value="verified"),variant:l.value==="verified"?"default":"outline"},{default:a(()=>e[8]||(e[8]=[d(" Verified ")])),_:1,__:[8]},8,["variant"]),f(r(v),{onClick:e[3]||(e[3]=s=>l.value="all"),variant:l.value==="all"?"default":"outline"},{default:a(()=>e[9]||(e[9]=[d(" All ")])),_:1,__:[9]},8,["variant"])])]),f(R,null,{default:a(()=>[f(Y,null,{default:a(()=>[f(q,null,{default:a(()=>[l.value==="pending"?(o(),p("span",H,"Pending Verification")):l.value==="verified"?(o(),p("span",I,"Verified Customers")):(o(),p("span",J,"All Customers")),t("span",K," ("+u(r(i).props.customers.total)+") ",1)]),_:1})]),_:1}),f(W,null,{default:a(()=>[t("table",O,[e[13]||(e[13]=t("thead",null,[t("tr",null,[t("th",{class:"px-4 py-2 text-left"},"Name"),t("th",{class:"px-4 py-2 text-left"},"Company"),t("th",{class:"px-4 py-2 text-left"},"Email"),t("th",{class:"px-4 py-2 text-left"},"Phone"),t("th",{class:"px-4 py-2 text-left"},"Status"),t("th",{class:"px-4 py-2 text-left"},"Verified At"),t("th",{class:"px-4 py-2 text-left"},"Created At"),t("th",{class:"px-4 py-2 text-left"},"Actions")])],-1)),r(i).props.customers.data.length?(o(),p("tbody",Q,[(o(!0),p(F,null,U(r(i).props.customers.data,s=>(o(),p("tr",{key:s.id,class:"hover:bg-muted"},[t("td",Z,u(s.name),1),t("td",ee,u(s.company_name||"—"),1),t("td",te,u(s.email),1),t("td",se,u(s.phone||"—"),1),t("td",re,[t("span",{class:j(["px-2 py-1 text-xs font-semibold rounded flex items-center gap-1 w-fit",s.is_verified?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},[s.is_verified?(o(),c(r(V),{key:0,class:"h-3 w-3"})):(o(),c(r($),{key:1,class:"h-3 w-3"})),d(" "+u(s.is_verified?"Verified":"Pending"),1)],2)]),t("td",oe,u(k(s.verified_at)),1),t("td",ie,u(k(s.created_at)),1),t("td",ne,[t("div",ae,[s.is_verified?(o(),c(r(v),{key:1,variant:"outline",size:"sm",class:"border-red-300 text-red-700 hover:bg-red-50",onClick:T=>P(s.id,s.name)},{default:a(()=>[f(r($),{class:"h-4 w-4 mr-1"}),e[11]||(e[11]=d(" Unverify "))]),_:2,__:[11]},1032,["onClick"])):(o(),c(r(v),{key:0,variant:"default",size:"sm",class:"bg-green-600 hover:bg-green-700",onClick:T=>B(s.id,s.name)},{default:a(()=>[f(r(V),{class:"h-4 w-4 mr-1"}),e[10]||(e[10]=d(" Verify "))]),_:2,__:[10]},1032,["onClick"]))])])]))),128))])):(o(),p("tbody",le,[t("tr",null,[t("td",ue,[e[12]||(e[12]=d(" No customers found. ")),m.value&&m.value.toString().trim().length?(o(),p("button",{key:0,type:"button",class:"underline underline-offset-4 ml-1",onClick:e[4]||(e[4]=s=>m.value="")}," Clear search ")):g("",!0)])])]))]),r(i).props.customers.last_page>1?(o(),p("div",fe,[t("div",de," Showing "+u(r(i).props.customers.from)+" to "+u(r(i).props.customers.to)+" of "+u(r(i).props.customers.total)+" results ",1),t("div",pe,[r(i).props.customers.prev_page_url?(o(),c(r(v),{key:0,variant:"outline",size:"sm",onClick:e[5]||(e[5]=s=>h(r(i).props.customers.current_page-1))},{default:a(()=>e[14]||(e[14]=[d(" Previous ")])),_:1,__:[14]})):g("",!0),r(i).props.customers.next_page_url?(o(),c(r(v),{key:1,variant:"outline",size:"sm",onClick:e[6]||(e[6]=s=>h(r(i).props.customers.current_page+1))},{default:a(()=>e[15]||(e[15]=[d(" Next ")])),_:1,__:[15]})):g("",!0)])])):g("",!0)]),_:1})]),_:1})]),_:1,__:[16]}))}});export{Ee as default};
