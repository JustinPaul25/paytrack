import{d as G,I as K,l as j,z as H,c as y,o as m,u as l,w as i,a as n,b as e,e as c,t as a,f as p,h as f,B as D,C as M,q as Z,A as ee,j as te,g as se,F as A,S as z,x as B,r as I}from"./app-B8QIr-yB.js";import{_ as x}from"./index-CMa7p19_.js";import{v as oe,w as ne,x as ie,_ as le}from"./AppLayout.vue_vue_type_script_setup_true_lang-soH5-Krj.js";import{_ as C,a as P}from"./CardContent.vue_vue_type_script_setup_true_lang-aSdnrcFY.js";import{_ as $,a as X}from"./CardTitle.vue_vue_type_script_setup_true_lang-BTzcK9vs.js";import{_ as Q}from"./Select.vue_vue_type_script_setup_true_lang-Yokc8jy6.js";import{_ as re}from"./SearchSelect.vue_vue_type_script_setup_true_lang-Bw3u6K2a.js";import{_ as de,b as ae,c as ue,d as me,e as ce,a as pe}from"./DialogTitle.vue_vue_type_script_setup_true_lang-Dtb0XsBa.js";import{_ as b}from"./Label.vue_vue_type_script_setup_true_lang-BgIPOEA2.js";import{S as E}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{_ as w}from"./InputError.vue_vue_type_script_setup_true_lang-C7x7uEqI.js";import{D as fe}from"./DeliveryRouteMap-BkpJEoas.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_0fe2f881_lang-CVWryCuy.js";import"./RovingFocusGroup-Cg7u14CM.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CpXueLgs.js";import"./createLucideIcon-3f2jlhvw.js";import"./VisuallyHidden-BAokwaoo.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-C0oox_ik.js";import"./chevron-right-BFhBpJLr.js";import"./Input.vue_vue_type_script_setup_true_lang-GHTKCvWK.js";import"./search-Jjh9EsSI.js";import"./_plugin-vue_export-helper-p7Wb8UTR.js";import"./marker-icon-2x-1TirABJh.js";import"./marker-icon-B6h-nX3D.js";import"./marker-shadow-B9CpECYs.js";const _e={class:"space-y-4"},ve={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ge=["min"],ye={class:"flex gap-2 mt-1"},be={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},xe={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ke={key:0},we=G({__name:"DeliveryFormModal",props:{open:{type:Boolean},invoice:{},customers:{}},emits:["update:open"],setup(F,{emit:d}){var _,s;const g=F,h=d,r=K({customer_id:g.invoice.customer_id,invoice_id:g.invoice.id,delivery_address:((_=g.invoice.customer)==null?void 0:_.address)||"",contact_person:((s=g.invoice.customer)==null?void 0:s.name)||"",contact_phone:"",delivery_date:"",delivery_time:"",status:"pending",notes:"",delivery_fee:""}),T=new Date().toISOString().split("T")[0],L=j(()=>[{value:null,label:"Select customer"},...g.customers.map(t=>({value:t.id,label:`${t.name}${t.company_name?` (${t.company_name})`:""}`}))]),O=[{value:"pending",label:"Pending"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}],k=[{value:"09:00 AM - 12:00 PM",label:"09:00 AM - 12:00 PM"},{value:"12:00 PM - 03:00 PM",label:"12:00 PM - 03:00 PM"},{value:"03:00 PM - 06:00 PM",label:"03:00 PM - 06:00 PM"},{value:"06:00 PM - 09:00 PM",label:"06:00 PM - 09:00 PM"},{value:"Custom",label:"Custom"}],R=j(()=>{if(!r.customer_id)return null;const t=g.customers.find(u=>u.id===r.customer_id);if(!(t!=null&&t.location))return null;let o=t.location;if(typeof o=="string")try{o=JSON.parse(o)}catch{return console.warn("Failed to parse customer location string:",o),null}return o&&typeof o.lat=="number"&&typeof o.lng=="number"&&!isNaN(o.lat)&&!isNaN(o.lng)&&o.lat>=-90&&o.lat<=90&&o.lng>=-180&&o.lng<=180?o:null}),S=j(()=>r.customer_id&&g.customers.find(t=>t.id===r.customer_id)||null);H(()=>r.customer_id,t=>{if(t){const o=g.customers.find(u=>u.id===t);o!=null&&o.address&&!r.delivery_address&&(r.delivery_address=o.address)}}),H(()=>g.open,t=>{var o,u;t&&(r.reset(),r.customer_id=g.invoice.customer_id,r.invoice_id=g.invoice.id,r.delivery_address=((o=g.invoice.customer)==null?void 0:o.address)||"",r.contact_person=((u=g.invoice.customer)==null?void 0:u.name)||"",r.clearErrors())});function U(t){const o=t.target;let u=o.value;u=u.replace(/[^0-9+]/g,""),u.startsWith("+")?(u.length>1&&!u.startsWith("+63")&&(u="+63"+u.substring(1).replace(/[^0-9]/g,"")),u.length>13&&(u=u.substring(0,13))):(u.length>0&&u[0]==="0"&&u.length>1&&u[1]!=="9"&&(u="09"+u.substring(2).replace(/[^0-9]/g,"")),u.startsWith("63")&&(u="+"+u),u.length>11&&!u.startsWith("+")&&(u=u.substring(0,11))),u!==o.value&&(o.value=u),r.contact_phone=u}async function W(){try{if(!navigator.geolocation){E.fire({icon:"error",title:"Geolocation not supported",text:"Your browser does not support geolocation."});return}const t=await new Promise((Y,J)=>{navigator.geolocation.getCurrentPosition(Y,J,{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})}),{latitude:o,longitude:u}=t.coords,V=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${o}&lon=${u}&addressdetails=1`);if(!V.ok)throw new Error("Failed to get address");const v=await V.json();v.display_name&&(r.delivery_address=v.display_name,E.fire({icon:"success",title:"Location Retrieved",text:"Current location address has been filled in.",toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3}))}catch(t){console.error("Error getting location address:",t),E.fire({icon:"error",title:"Location Error",text:"Failed to get your current location address. Please enter it manually."})}}function q(){if(!/^(?:\+?63|0)9\d{9}$/.test(r.contact_phone||"")){r.setError("contact_phone","Enter a valid PH mobile number (09XXXXXXXXX or +639XXXXXXXXX).");return}r.post(route("deliveries.store"),{preserveScroll:!0,onSuccess:()=>{E.fire({toast:!0,position:"top-end",icon:"success",title:"Delivery created successfully",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}),h("update:open",!1),r.reset()}})}function N(){h("update:open",!1),r.clearErrors()}return(t,o)=>(m(),y(l(de),{open:t.open,"onUpdate:open":o[10]||(o[10]=u=>h("update:open",u))},{default:i(()=>[n(l(pe),{class:"max-w-4xl max-h-[90vh] overflow-y-auto"},{default:i(()=>{var u,V;return[n(l(ae),null,{default:i(()=>[n(l(ue),null,{default:i(()=>o[11]||(o[11]=[c("Out for Delivery")])),_:1,__:[11]}),n(l(me),null,{default:i(()=>[c(" Create a delivery for invoice "+a(t.invoice.reference_number),1)]),_:1})]),_:1}),e("form",{onSubmit:o[9]||(o[9]=Z(v=>q(),["prevent"])),class:"space-y-6"},[e("div",_e,[e("div",ve,[e("div",null,[n(b,{for:"customer_id"},{default:i(()=>o[12]||(o[12]=[c("Customer")])),_:1,__:[12]}),n(l(re),{modelValue:l(r).customer_id,"onUpdate:modelValue":o[0]||(o[0]=v=>l(r).customer_id=v),options:L.value,placeholder:"Select customer","search-placeholder":"Search customers...",class:"mt-1",required:""},null,8,["modelValue","options"]),n(w,{message:l(r).errors.customer_id},null,8,["message"])]),e("div",null,[n(b,{for:"delivery_date"},{default:i(()=>o[13]||(o[13]=[c("Delivery Date")])),_:1,__:[13]}),D(e("input",{"onUpdate:modelValue":o[1]||(o[1]=v=>l(r).delivery_date=v),type:"date",id:"delivery_date",min:l(T),class:"w-full rounded-md border border-input bg-transparent px-3 py-2 mt-1 text-foreground dark:bg-input/30 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] focus-visible:outline-none",required:""},null,8,ge),[[M,l(r).delivery_date]]),n(w,{message:l(r).errors.delivery_date},null,8,["message"])])]),e("div",null,[n(b,{for:"delivery_address"},{default:i(()=>o[14]||(o[14]=[c("Delivery Address")])),_:1,__:[14]}),e("div",ye,[D(e("textarea",{"onUpdate:modelValue":o[2]||(o[2]=v=>l(r).delivery_address=v),id:"delivery_address",class:"flex-1 rounded-md border border-input bg-transparent px-3 py-2 text-foreground dark:bg-input/30 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] focus-visible:outline-none",rows:"3",placeholder:"Enter complete delivery address",required:""},null,512),[[M,l(r).delivery_address]]),n(l(x),{type:"button",variant:"outline",onClick:W,class:"h-fit px-3 py-2"},{default:i(()=>o[15]||(o[15]=[c(" ðŸ“ Get Current Location ")])),_:1,__:[15]})]),n(w,{message:l(r).errors.delivery_address},null,8,["message"])]),e("div",be,[e("div",null,[n(b,{for:"contact_person"},{default:i(()=>o[16]||(o[16]=[c("Contact Person")])),_:1,__:[16]}),D(e("input",{"onUpdate:modelValue":o[3]||(o[3]=v=>l(r).contact_person=v),type:"text",id:"contact_person",class:"w-full rounded-md border border-input bg-transparent px-3 py-2 mt-1 text-foreground dark:bg-input/30 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] focus-visible:outline-none",placeholder:"Enter contact person name",required:""},null,512),[[M,l(r).contact_person]]),n(w,{message:l(r).errors.contact_person},null,8,["message"])]),e("div",null,[n(b,{for:"contact_phone"},{default:i(()=>o[17]||(o[17]=[c("Contact Phone")])),_:1,__:[17]}),D(e("input",{"onUpdate:modelValue":o[4]||(o[4]=v=>l(r).contact_phone=v),type:"tel",id:"contact_phone",inputmode:"numeric",pattern:"^(?:\\+?63|0)9\\d{9}$",maxlength:"13",class:"w-full rounded-md border border-input bg-transparent px-3 py-2 mt-1 text-foreground dark:bg-input/30 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] focus-visible:outline-none",placeholder:"09XXXXXXXXX or +639XXXXXXXXX",onInput:U,required:""},null,544),[[M,l(r).contact_phone]]),n(w,{message:l(r).errors.contact_phone},null,8,["message"])])]),e("div",xe,[e("div",null,[n(b,{for:"delivery_time"},{default:i(()=>o[18]||(o[18]=[c("Delivery Time")])),_:1,__:[18]}),n(l(Q),{modelValue:l(r).delivery_time,"onUpdate:modelValue":o[5]||(o[5]=v=>l(r).delivery_time=v),options:k,placeholder:"Select delivery time",class:"mt-1",required:""},null,8,["modelValue"]),n(w,{message:l(r).errors.delivery_time},null,8,["message"])]),e("div",null,[n(b,{for:"status"},{default:i(()=>o[19]||(o[19]=[c("Status")])),_:1,__:[19]}),n(l(Q),{modelValue:l(r).status,"onUpdate:modelValue":o[6]||(o[6]=v=>l(r).status=v),options:O,placeholder:"Select status",class:"mt-1",required:""},null,8,["modelValue"]),n(w,{message:l(r).errors.status},null,8,["message"])]),e("div",null,[n(b,{for:"delivery_fee"},{default:i(()=>o[20]||(o[20]=[c("Delivery Fee")])),_:1,__:[20]}),D(e("input",{"onUpdate:modelValue":o[7]||(o[7]=v=>l(r).delivery_fee=v),type:"number",id:"delivery_fee",min:"0",step:"0.01",class:"w-full rounded-md border border-input bg-transparent px-3 py-2 mt-1 text-foreground dark:bg-input/30 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] focus-visible:outline-none",placeholder:"0.00",required:""},null,512),[[M,l(r).delivery_fee]]),n(w,{message:l(r).errors.delivery_fee},null,8,["message"])])]),e("div",null,[n(b,{for:"notes"},{default:i(()=>o[21]||(o[21]=[c("Notes")])),_:1,__:[21]}),D(e("textarea",{"onUpdate:modelValue":o[8]||(o[8]=v=>l(r).notes=v),id:"notes",class:"w-full rounded-md border border-input bg-transparent px-3 py-2 mt-1 text-foreground dark:bg-input/30 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] focus-visible:outline-none",rows:"3",placeholder:"Enter any additional notes"},null,512),[[M,l(r).notes]]),n(w,{message:l(r).errors.notes},null,8,["message"])])]),R.value||l(r).delivery_address||(u=S.value)!=null&&u.address?(m(),p("div",ke,[n(b,{class:"mb-2 block"},{default:i(()=>o[22]||(o[22]=[c("Delivery Route")])),_:1,__:[22]}),n(fe,{"customer-location":R.value,"delivery-address":l(r).delivery_address||((V=S.value)==null?void 0:V.address),"map-height":"300px"},null,8,["customer-location","delivery-address"])])):f("",!0),n(l(ce),{class:"gap-2"},{default:i(()=>[n(l(x),{type:"button",variant:"ghost",onClick:N},{default:i(()=>o[23]||(o[23]=[c("Cancel")])),_:1,__:[23]}),n(l(x),{type:"submit",variant:"default",disabled:l(r).processing},{default:i(()=>o[24]||(o[24]=[c(" Create Delivery ")])),_:1,__:[24]},8,["disabled"])]),_:1})],32)]}),_:1})]),_:1},8,["open"]))}}),he={class:"flex items-center justify-between my-6"},Ce={class:"text-2xl font-bold"},Pe={class:"flex gap-2"},$e={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Xe={class:"lg:col-span-2 space-y-6"},De={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Me={class:"text-lg font-semibold"},Re={key:0},Se={key:0,class:"mt-4"},qe={class:"mt-1"},Ve={class:"overflow-x-auto"},Ae={class:"min-w-full divide-y divide-border"},Ue={class:"px-4 py-2"},Ne={class:"font-medium"},Be={class:"text-sm text-gray-500"},Ie={class:"px-4 py-2"},Ee={class:"px-4 py-2"},je={class:"px-4 py-2 font-medium"},Fe={class:"border-t"},Te={class:"px-4 py-2 font-medium"},Le={colspan:"3",class:"px-4 py-2 text-right font-medium"},Oe={class:"px-4 py-2 font-medium"},We={class:"border-t"},ze={class:"px-4 py-2 font-bold text-lg"},He={class:"space-y-6"},Qe={class:"space-y-3"},Ge={class:"flex items-center justify-between mb-2"},Ye={class:"font-medium"},Je={class:"text-sm text-gray-600 space-y-1"},Ke={key:0},Ze={key:1},et={class:"text-xs mt-0.5"},tt={key:2},st={key:3},ot={key:4},nt={key:5,class:"mt-2 pt-2 border-t"},it={class:"text-xs mt-0.5"},lt={key:6,class:"text-xs text-gray-500 mt-2"},rt={key:7,class:"mt-2 pt-2 border-t"},dt={class:"space-y-3"},at={class:"flex items-center justify-between"},ut={class:"font-medium"},mt={class:"text-sm text-gray-600"},ct={key:0},pt={class:"text-xs text-gray-500"},ft={key:1,class:"mt-1 text-xs text-red-500"},_t={key:2,class:"text-xs"},vt=["href"],gt={class:"space-y-3"},yt={class:"flex items-center justify-between"},bt={class:"font-medium"},xt={class:"text-sm text-gray-600"},kt={key:0},wt={class:"text-xs text-gray-500"},ht={class:"space-y-3"},Ct={class:"flex items-center gap-3"},Pt={class:"font-medium"},$t={key:0},Xt={key:1},Dt={key:2},Mt={class:"text-sm"},Rt={class:"mt-3"},St={class:"text-sm"},os=G({__name:"Show",props:{invoice:{},refunds:{},refundRequests:{},deliveries:{},customers:{}},setup(F){var N;const d=F,g=ee(),h=Array.isArray((N=g.props.auth)==null?void 0:N.userRoles)&&g.props.auth.userRoles.includes("Customer"),r=j(()=>Array.isArray(d.refundRequests)&&d.refundRequests.some(_=>_.status==="pending")),T=[{title:"Invoices",href:"/invoices"},{title:d.invoice.reference_number,href:`/invoices/${d.invoice.id}`}];function L(_){switch(_){case"draft":return"bg-gray-100 text-gray-800";case"pending":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}function O(_){switch(_){case"pending":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}function k(_){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(_)}function R(_){return new Date(_).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function S(){window.print()}function U(_){if(!_.media||_.media.length===0)return null;const s=_.media.find(t=>t.mime_type.startsWith("image/"));return s?s.thumb_url||s.original_url:null}function W(_){return _.name.split(" ").map(s=>s.charAt(0)).join("").toUpperCase().slice(0,2)}const q=te(!1);return(_,s)=>(m(),y(le,{breadcrumbs:T},{default:i(()=>[n(l(se),{title:d.invoice.reference_number},null,8,["title"]),e("div",he,[e("h1",Ce,a(d.invoice.reference_number),1),e("div",Pe,[n(l(x),{variant:"outline",onClick:S},{default:i(()=>s[2]||(s[2]=[c("Download PDF")])),_:1,__:[2]}),n(l(x),{variant:"outline",onClick:S},{default:i(()=>s[3]||(s[3]=[c("Print")])),_:1,__:[3]}),!l(h)&&d.invoice.status!=="completed"?(m(),y(l(x),{key:0,variant:"default",onClick:s[0]||(s[0]=t=>q.value=!0)},{default:i(()=>s[4]||(s[4]=[c("Out for Delivery")])),_:1,__:[4]})):f("",!0),l(h)&&d.invoice.status==="completed"?(m(),p(A,{key:1},[r.value?(m(),y(l(x),{key:1,variant:"outline",disabled:"",title:"You already have a pending refund request for this invoice."},{default:i(()=>s[6]||(s[6]=[c(" Request Pending ")])),_:1,__:[6]})):(m(),y(l(z),{key:0,href:_.route("refundRequests.create",d.invoice.id)},{default:i(()=>[n(l(x),{variant:"default"},{default:i(()=>s[5]||(s[5]=[c("Request Refund")])),_:1,__:[5]})]),_:1},8,["href"]))],64)):f("",!0),n(l(z),{href:_.route("invoices.index")},{default:i(()=>[n(l(x),{variant:"ghost"},{default:i(()=>s[7]||(s[7]=[c("Back")])),_:1,__:[7]})]),_:1},8,["href"])])]),e("div",$e,[e("div",Xe,[n(C,null,{default:i(()=>[n($,null,{default:i(()=>[n(X,null,{default:i(()=>s[8]||(s[8]=[c("Invoice Information")])),_:1,__:[8]})]),_:1}),n(P,null,{default:i(()=>[e("div",De,[e("div",null,[s[9]||(s[9]=e("label",{class:"text-sm font-medium text-gray-500"},"Reference Number",-1)),e("p",Me,a(d.invoice.reference_number),1)]),e("div",null,[s[10]||(s[10]=e("label",{class:"text-sm font-medium text-gray-500"},"Date Created",-1)),e("p",null,a(R(d.invoice.created_at)),1)]),e("div",null,[s[11]||(s[11]=e("label",{class:"text-sm font-medium text-gray-500"},"Status",-1)),e("span",{class:B(["px-2 py-1 rounded-full text-xs font-medium",L(d.invoice.status)])},a(d.invoice.status),3)]),e("div",null,[s[12]||(s[12]=e("label",{class:"text-sm font-medium text-gray-500"},"Payment Method",-1)),e("p",null,a(d.invoice.payment_method.replace("_"," ")),1)]),d.invoice.payment_reference?(m(),p("div",Re,[s[13]||(s[13]=e("label",{class:"text-sm font-medium text-gray-500"},"Payment Reference",-1)),e("p",null,a(d.invoice.payment_reference),1)])):f("",!0)]),d.invoice.notes?(m(),p("div",Se,[s[14]||(s[14]=e("label",{class:"text-sm font-medium text-gray-500"},"Notes",-1)),e("p",qe,a(d.invoice.notes),1)])):f("",!0)]),_:1})]),_:1}),n(C,null,{default:i(()=>[n($,null,{default:i(()=>[n(X,null,{default:i(()=>s[15]||(s[15]=[c("Invoice Items")])),_:1,__:[15]})]),_:1}),n(P,null,{default:i(()=>[e("div",Ve,[e("table",Ae,[s[18]||(s[18]=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 text-left"},"Product"),e("th",{class:"px-4 py-2 text-left"},"Quantity"),e("th",{class:"px-4 py-2 text-left"},"Price"),e("th",{class:"px-4 py-2 text-left"},"Total")])],-1)),e("tbody",null,[(m(!0),p(A,null,I(d.invoice.invoice_items,t=>(m(),p("tr",{key:t.id,class:"hover:bg-muted"},[e("td",Ue,[e("div",null,[e("div",Ne,a(t.product.name),1),e("div",Be,"SKU: "+a(t.product.id),1)])]),e("td",Ie,a(t.quantity),1),e("td",Ee,a(k(t.price)),1),e("td",je,a(k(t.total)),1)]))),128))]),e("tfoot",null,[e("tr",Fe,[s[16]||(s[16]=e("td",{colspan:"3",class:"px-4 py-2 text-right font-medium"},"Subtotal:",-1)),e("td",Te,a(k(d.invoice.subtotal_amount)),1)]),e("tr",null,[e("td",Le,"VAT ("+a(d.invoice.vat_rate)+"%):",1),e("td",Oe,a(k(d.invoice.vat_amount)),1)]),e("tr",We,[s[17]||(s[17]=e("td",{colspan:"3",class:"px-4 py-2 text-right font-bold text-lg"},"Total Amount:",-1)),e("td",ze,a(k(d.invoice.total_amount)),1)])])])])]),_:1})]),_:1})]),e("div",He,[d.deliveries&&d.deliveries.length?(m(),y(C,{key:0},{default:i(()=>[n($,null,{default:i(()=>[n(X,null,{default:i(()=>s[19]||(s[19]=[c("Deliveries")])),_:1,__:[19]})]),_:1}),n(P,null,{default:i(()=>[e("div",Qe,[(m(!0),p(A,null,I(d.deliveries,t=>(m(),p("div",{key:t.id,class:"border rounded-md p-3"},[e("div",Ge,[e("div",Ye,"Delivery #"+a(t.id),1),e("span",{class:B(["px-2 py-1 rounded-full text-xs font-medium",O(t.status)])},a(t.status),3)]),e("div",Je,[t.delivery_date?(m(),p("div",Ke,[s[20]||(s[20]=e("span",{class:"font-medium"},"Date:",-1)),c(" "+a(t.delivery_date),1)])):f("",!0),t.delivery_time?(m(),p("div",Ze,[s[21]||(s[21]=e("span",{class:"font-medium"},"Time:",-1)),c(" "+a(t.delivery_time),1)])):f("",!0),e("div",null,[s[22]||(s[22]=e("span",{class:"font-medium"},"Address:",-1)),e("p",et,a(t.delivery_address),1)]),t.contact_person?(m(),p("div",tt,[s[23]||(s[23]=e("span",{class:"font-medium"},"Contact:",-1)),c(" "+a(t.contact_person),1)])):f("",!0),t.contact_phone?(m(),p("div",st,[s[24]||(s[24]=e("span",{class:"font-medium"},"Phone:",-1)),c(" "+a(t.contact_phone),1)])):f("",!0),t.delivery_fee>0?(m(),p("div",ot,[s[25]||(s[25]=e("span",{class:"font-medium"},"Fee:",-1)),c(" "+a(k(t.delivery_fee)),1)])):f("",!0),t.notes?(m(),p("div",nt,[s[26]||(s[26]=e("span",{class:"font-medium"},"Notes:",-1)),e("p",it,a(t.notes),1)])):f("",!0),t.created_at?(m(),p("div",lt," Created: "+a(t.created_at),1)):f("",!0),l(h)?f("",!0):(m(),p("div",rt,[n(l(z),{href:_.route("deliveries.show",t.id)},{default:i(()=>[n(l(x),{variant:"outline",size:"sm",class:"w-full"},{default:i(()=>s[27]||(s[27]=[c(" View Delivery Details ")])),_:1,__:[27]})]),_:2},1032,["href"])]))])]))),128))])]),_:1})]),_:1})):f("",!0),d.refundRequests&&d.refundRequests.length?(m(),y(C,{key:1},{default:i(()=>[n($,null,{default:i(()=>[n(X,null,{default:i(()=>s[28]||(s[28]=[c("Refund Requests")])),_:1,__:[28]})]),_:1}),n(P,null,{default:i(()=>[e("div",dt,[(m(!0),p(A,null,I(d.refundRequests,t=>(m(),p("div",{key:t.id,class:"border rounded-md p-3"},[e("div",at,[e("div",ut,a(t.tracking_number),1),e("span",{class:B(["px-2 py-1 rounded-full text-xs font-medium",{"bg-yellow-100 text-yellow-800":t.status==="pending","bg-green-100 text-green-800":t.status==="approved"||t.status==="converted","bg-red-100 text-red-800":t.status==="rejected"}])},a(t.status),3)]),e("div",mt,[t.product_name?(m(),p("div",ct,"Product: "+a(t.product_name),1)):f("",!0),e("div",null,"Qty: "+a(t.quantity),1),e("div",pt,"Date: "+a(t.created_at),1),t.status==="rejected"&&t.review_notes?(m(),p("div",ft," Reason: "+a(t.review_notes),1)):f("",!0),t.media_link?(m(),p("div",_t,[e("a",{href:t.media_link,target:"_blank",class:"text-blue-500 underline"},"Media",8,vt)])):f("",!0)])]))),128))])]),_:1})]),_:1})):f("",!0),d.refunds&&d.refunds.length?(m(),y(C,{key:2},{default:i(()=>[n($,null,{default:i(()=>[n(X,null,{default:i(()=>s[29]||(s[29]=[c("Refunds")])),_:1,__:[29]})]),_:1}),n(P,null,{default:i(()=>[e("div",gt,[(m(!0),p(A,null,I(d.refunds,t=>(m(),p("div",{key:t.id,class:"border rounded-md p-3"},[e("div",yt,[e("div",bt,a(t.refund_number),1),e("span",{class:B(["px-2 py-1 rounded-full text-xs font-medium",{"bg-green-100 text-green-800":t.status==="approved"||t.status==="completed","bg-yellow-100 text-yellow-800":t.status==="pending","bg-red-100 text-red-800":t.status==="cancelled"}])},a(t.status),3)]),e("div",xt,[t.product_name?(m(),p("div",kt,"Product: "+a(t.product_name),1)):f("",!0),e("div",null,"Qty: "+a(t.quantity_refunded),1),e("div",null,"Amount: "+a(k(t.refund_amount)),1),e("div",wt,"Date: "+a(t.created_at),1)])]))),128))])]),_:1})]),_:1})):f("",!0),n(C,null,{default:i(()=>[n($,null,{default:i(()=>[n(X,null,{default:i(()=>s[30]||(s[30]=[c("Customer Information")])),_:1,__:[30]})]),_:1}),n(P,null,{default:i(()=>[e("div",ht,[e("div",Ct,[n(oe,{class:"size-12"},{default:i(()=>[U(d.invoice.customer)?(m(),y(ne,{key:0,src:U(d.invoice.customer),alt:d.invoice.customer.name},null,8,["src","alt"])):(m(),y(ie,{key:1},{default:i(()=>[c(a(W(d.invoice.customer)),1)]),_:1}))]),_:1}),e("div",null,[s[31]||(s[31]=e("label",{class:"text-sm font-medium text-gray-500"},"Name",-1)),e("p",Pt,a(d.invoice.customer.name),1)])]),d.invoice.customer.company_name?(m(),p("div",$t,[s[32]||(s[32]=e("label",{class:"text-sm font-medium text-gray-500"},"Company",-1)),e("p",null,a(d.invoice.customer.company_name),1)])):f("",!0),e("div",null,[s[33]||(s[33]=e("label",{class:"text-sm font-medium text-gray-500"},"Email",-1)),e("p",null,a(d.invoice.customer.email),1)]),d.invoice.customer.phone?(m(),p("div",Xt,[s[34]||(s[34]=e("label",{class:"text-sm font-medium text-gray-500"},"Phone",-1)),e("p",null,a(d.invoice.customer.phone),1)])):f("",!0),d.invoice.customer.address?(m(),p("div",Dt,[s[35]||(s[35]=e("label",{class:"text-sm font-medium text-gray-500"},"Address",-1)),e("p",Mt,a(d.invoice.customer.address),1)])):f("",!0)])]),_:1})]),_:1}),n(C,null,{default:i(()=>[n($,null,{default:i(()=>[n(X,null,{default:i(()=>s[36]||(s[36]=[c("Created By")])),_:1,__:[36]})]),_:1}),n(P,null,{default:i(()=>[e("div",null,[s[37]||(s[37]=e("label",{class:"text-sm font-medium text-gray-500"},"User",-1)),e("p",null,a(d.invoice.user.name),1)]),e("div",Rt,[s[38]||(s[38]=e("label",{class:"text-sm font-medium text-gray-500"},"Last Updated",-1)),e("p",St,a(R(d.invoice.updated_at)),1)])]),_:1})]),_:1})])]),d.customers?(m(),y(we,{key:0,open:q.value,"onUpdate:open":s[1]||(s[1]=t=>q.value=t),invoice:d.invoice,customers:d.customers},null,8,["open","invoice","customers"])):f("",!0)]),_:1}))}});export{os as default};
