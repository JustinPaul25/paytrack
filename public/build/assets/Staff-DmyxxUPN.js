import{d as U,v as A,m as w,s as z,W as g,c as v,o as n,w as i,a as r,b as e,u as s,g as D,S as h,e as m,x as V,y as j,f as u,h as _,F as k,r as C,t as d,l as L}from"./app-BkHalNTO.js";import{_ as f}from"./index-gl4GIWPw.js";import{_ as E}from"./AppLayout.vue_vue_type_script_setup_true_lang-CNenHwyy.js";import{_ as F,a as M}from"./CardContent.vue_vue_type_script_setup_true_lang-Dycyza_F.js";import{A as P,_ as S}from"./Icon.vue_vue_type_script_setup_true_lang-D-VIRbd_.js";import{S as $}from"./sweetalert2.esm.all-BQIkj5Wb.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_0fe2f881_lang-Bcmdzp5l.js";import"./RovingFocusGroup-hNCDy1GI.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-C9T_yUme.js";import"./createLucideIcon-b2VYfB8N.js";import"./VisuallyHidden-B2sC3urC.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-1ljwWgWY.js";import"./chevron-right-DSCzSCrA.js";import"./square-pen-JrbF0RzI.js";import"./calendar-C55Fx5OE.js";import"./check-CozkDIIo.js";import"./chevron-left-uu6mjVgE.js";import"./circle-alert-C4km0GAV.js";import"./piggy-bank-DlOM-ZIQ.js";import"./circle-check-big-ChQV6jCy.js";import"./message-square-Y8OK_O-3.js";import"./trophy-CMvs4Ku0.js";import"./plus-DL5tKTxW.js";import"./clock-Cy7xzsd6.js";import"./dollar-sign-gYj2TyXT.js";import"./eye-off-DSxkQu3i.js";import"./eye-DssUSG1k.js";import"./loader-circle--hdWDkhR.js";import"./map-pin-DtwUBG5m.js";import"./sun-D4OhEu2k.js";import"./printer-1QsdDkDl.js";import"./search-B3gocWyA.js";import"./shopping-bag-DszC2pUR.js";import"./trash-2-CHHOMJcQ.js";import"./trending-up-C5eGGOFt.js";import"./user-cog-BPd38RVz.js";const R={class:"flex items-center justify-between mb-6"},W={class:"flex gap-2"},Y={class:"flex items-center justify-between mt-4 mb-2"},q={class:"flex gap-2 items-center"},G={class:"min-w-full divide-y divide-border"},H={key:0},I={class:"px-4 py-2 font-medium"},J={class:"px-4 py-2 text-sm text-gray-500"},K={class:"px-4 py-2"},O={class:"flex gap-1 flex-wrap"},Q={class:"px-4 py-2 text-sm text-gray-500"},X={class:"px-4 py-2"},Z={class:"flex gap-2"},ee={key:1},te={colspan:"5",class:"px-4 py-10 text-center text-sm text-gray-500"},se={key:0,class:"flex items-center justify-between mt-6"},re={class:"text-sm text-gray-700"},oe={class:"flex gap-2"},We=U({__name:"Staff",setup(ae){const o=A(),y=w(o.props.filters?o.props.filters:{}),p=w(typeof y.value.search=="string"?y.value.search:""),B=[{title:"Users",href:"/users"},{title:"Staff",href:"/users/staff"}];let x=null;z(p,l=>{x&&clearTimeout(x),x=setTimeout(()=>{g.get("/users/staff",{search:l||void 0},{preserveState:!0,replace:!0})},400)});function b(l){g.get("/users/staff",{search:p.value,page:l},{preserveState:!0,replace:!0})}async function N(l){(await $.fire({title:"Delete User?",text:"Are you sure you want to delete this user? This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#8f5be8",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete user"})).isConfirmed&&g.delete(`/users/${l}`,{onSuccess:()=>{$.fire("User deleted","User deleted successfully.","success")}})}function T(l){switch(l.toLowerCase()){case"admin":return"bg-purple-100 text-purple-800";case"staff":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}}return(l,t)=>(n(),v(E,{breadcrumbs:B},{default:i(()=>[r(s(D),{title:"Staff"}),e("div",R,[t[6]||(t[6]=e("h1",{class:"text-2xl font-bold"},"Staff Management",-1)),e("div",W,[r(s(h),{href:l.route("users.archives")},{default:i(()=>[r(s(f),{variant:"outline"},{default:i(()=>[r(s(P),{class:"h-4 w-4 mr-2"}),t[4]||(t[4]=m(" Archives "))]),_:1,__:[4]})]),_:1},8,["href"]),r(s(h),{href:l.route("users.create")},{default:i(()=>[r(s(f),{variant:"default"},{default:i(()=>t[5]||(t[5]=[e("span",{class:"mr-2"},"+",-1),m(" Add New User ")])),_:1,__:[5]})]),_:1},8,["href"])])]),e("div",Y,[e("div",q,[V(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>p.value=a),type:"text",placeholder:"Search staff by name or email...",class:"rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[j,p.value]])])]),r(F,null,{default:i(()=>[r(M,null,{default:i(()=>[e("table",G,[t[8]||(t[8]=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 text-left"},"Name"),e("th",{class:"px-4 py-2 text-left"},"Email"),e("th",{class:"px-4 py-2 text-left"},"Roles"),e("th",{class:"px-4 py-2 text-left"},"Updated At"),e("th",{class:"px-4 py-2 text-left"},"Actions")])],-1)),s(o).props.users.data.length?(n(),u("tbody",H,[(n(!0),u(k,null,C(s(o).props.users.data,a=>(n(),u("tr",{key:a.id,class:"hover:bg-muted"},[e("td",I,d(a.name),1),e("td",J,d(a.email),1),e("td",K,[e("div",O,[(n(!0),u(k,null,C(a.roles,c=>(n(),u("span",{key:c,class:L(["px-2 py-1 text-xs font-semibold rounded",T(c)])},d(c),3))),128))])]),e("td",Q,d(new Date(a.updated_at).toLocaleDateString()),1),e("td",X,[e("div",Z,[r(s(h),{href:l.route("users.edit",a.id)},{default:i(()=>[r(s(f),{variant:"ghost",size:"sm"},{default:i(()=>[r(S,{name:"edit",class:"h-4 w-4"})]),_:1})]),_:2},1032,["href"]),r(s(f),{variant:"ghost",size:"sm",onClick:c=>N(a.id)},{default:i(()=>[r(S,{name:"trash",class:"h-4 w-4"})]),_:2},1032,["onClick"])])])]))),128))])):(n(),u("tbody",ee,[e("tr",null,[e("td",te,[t[7]||(t[7]=m(" No staff members found. ")),p.value&&p.value.toString().trim().length?(n(),u("button",{key:0,type:"button",class:"underline underline-offset-4 ml-1",onClick:t[1]||(t[1]=a=>p.value="")}," Clear search ")):_("",!0)])])]))]),s(o).props.users.last_page>1?(n(),u("div",se,[e("div",re," Showing "+d(s(o).props.users.from)+" to "+d(s(o).props.users.to)+" of "+d(s(o).props.users.total)+" results ",1),e("div",oe,[s(o).props.users.prev_page_url?(n(),v(s(f),{key:0,variant:"outline",size:"sm",onClick:t[2]||(t[2]=a=>b(s(o).props.users.current_page-1))},{default:i(()=>t[9]||(t[9]=[m(" Previous ")])),_:1,__:[9]})):_("",!0),s(o).props.users.next_page_url?(n(),v(s(f),{key:1,variant:"outline",size:"sm",onClick:t[3]||(t[3]=a=>b(s(o).props.users.current_page+1))},{default:i(()=>t[10]||(t[10]=[m(" Next ")])),_:1,__:[10]})):_("",!0)])])):_("",!0)]),_:1})]),_:1})]),_:1}))}});export{We as default};
