import{d as H,j as P,l as d,z as j,W as T,c as F,o as u,w as l,a as s,b as t,u as c,g as U,t as r,x as b,e as v,f as h,F as M,r as N,h as z}from"./app-CT4IrqCO.js";import{C as W,_ as q}from"./AppLayout.vue_vue_type_script_setup_true_lang-k5SYyKf6.js";import{_ as m,a as x}from"./CardContent.vue_vue_type_script_setup_true_lang-Mv4kOeHZ.js";import{_ as w,a as C}from"./CardTitle.vue_vue_type_script_setup_true_lang-FNlGPZjF.js";import{_ as G}from"./BaseChart.vue_vue_type_script_setup_true_lang-JqCVegV9.js";import{_ as V}from"./Select.vue_vue_type_script_setup_true_lang-BgNeTaWi.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_0fe2f881_lang-CNmk8A0f.js";import{T as J}from"./trending-up-BhAIXNva.js";import{P as K,a as Q,C as X}from"./piggy-bank-CifgkBsk.js";import"./index-D5THZ8q3.js";import"./RovingFocusGroup-BcGk2jGi.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CXjSZQbB.js";import"./createLucideIcon-Z6LQRTvZ.js";import"./VisuallyHidden-D2w03Dug.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DBN6QOeH.js";const Y={class:"flex items-center justify-between mb-6"},Z={class:"flex gap-4"},tt={class:"w-48"},et={class:"w-48"},st={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},lt={class:"flex items-center justify-between"},at={class:"text-2xl font-semibold text-gray-900 dark:text-gray-100"},ot={class:"h-12 w-12 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center"},rt={class:"flex items-center justify-between"},nt={class:"text-2xl font-semibold text-gray-900 dark:text-gray-100"},it={class:"h-12 w-12 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center"},dt={class:"flex items-center justify-between"},ut={class:"h-12 w-12 rounded-full bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center"},ct={class:"flex items-center justify-between"},mt={class:"text-2xl font-semibold text-gray-900 dark:text-gray-100"},xt={class:"h-12 w-12 rounded-full bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center"},pt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"},gt={class:"overflow-x-auto"},ft={class:"min-w-full divide-y divide-gray-200"},ht={class:"px-4 py-3 text-sm font-medium text-gray-700"},_t={class:"px-4 py-3 text-sm text-right text-green-600"},yt={class:"px-4 py-3 text-sm text-right text-red-600"},bt={class:"px-4 py-3 text-sm text-right text-gray-700"},vt={class:"overflow-x-auto"},wt={class:"min-w-full divide-y divide-gray-200"},Ct={key:0},kt={class:"px-4 py-3 text-sm font-medium text-gray-700"},jt={class:"px-4 py-3 text-sm text-right text-green-600"},Ft={class:"px-4 py-3 text-sm text-right text-red-600"},Pt={class:"px-4 py-3 text-sm text-right text-gray-700"},Mt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Nt={class:"rounded-lg border border-gray-200 p-4"},Vt={class:"mt-1 text-xl font-semibold text-gray-900"},$t={class:"rounded-lg border border-gray-200 p-4"},St={class:"mt-1 text-xl font-semibold text-gray-900"},At={class:"rounded-lg border border-gray-200 p-4"},Kt=H({__name:"CashFlow",props:{filters:{},historical:{},projections:{},summaries:{}},setup($){const p=$,S=[{title:"Sales",href:"/sales/analytics"},{title:"Cash Flow",href:"/finance/cash-flow"}],g=P(p.filters.months),f=P(p.filters.forecast_months),_=d(()=>p.historical),y=d(()=>p.projections),i=d(()=>p.summaries);j(()=>p.filters.months,a=>{typeof a=="number"&&g.value!==a&&(g.value=a)}),j(()=>p.filters.forecast_months,a=>{typeof a=="number"&&f.value!==a&&(f.value=a)}),j([g,f],()=>{T.get("/finance/cash-flow",{months:g.value,forecast_months:f.value},{preserveState:!0,replace:!0})});const k=d(()=>[..._.value,...y.value.map(a=>({...a,isForecast:!0}))]),A=d(()=>k.value.map(a=>a.label)),L=d(()=>_.value.map(a=>a.net)),B=d(()=>k.value.map((a,e)=>e>=_.value.length?a.net:null)),D=d(()=>k.value.map(a=>a.running_balance)),I=d(()=>({labels:A.value,datasets:[{label:"Net Cash Flow",data:[...L.value,...y.value.map(()=>null)],borderColor:"rgb(34, 197, 94)",backgroundColor:"rgba(34, 197, 94, 0.1)",tension:.35,fill:!0},{label:"Projected Net Cash Flow",data:B.value,borderColor:"rgb(234, 179, 8)",backgroundColor:"rgba(234, 179, 8, 0.1)",tension:.35,borderDash:[6,6],fill:!1},{label:"Running Cash Position",data:D.value,borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",yAxisID:"y1",tension:.3,fill:!1}]})),O=d(()=>({plugins:{legend:{position:"top"},tooltip:{mode:"index",intersect:!1}},interaction:{mode:"index",intersect:!1},scales:{y:{title:{display:!0,text:"Net Cash Flow (₱)"}},y1:{position:"right",title:{display:!0,text:"Cash Position (₱)"},grid:{drawOnChartArea:!1}}}}));function n(a){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(a)}const R=[{label:"Last 3 Months",value:3},{label:"Last 6 Months",value:6},{label:"Last 12 Months",value:12},{label:"Last 18 Months",value:18},{label:"Last 24 Months",value:24}],E=[{label:"Forecast 3 Months",value:3},{label:"Forecast 6 Months",value:6},{label:"Forecast 9 Months",value:9},{label:"Forecast 12 Months",value:12}];return(a,e)=>(u(),F(q,{breadcrumbs:S},{default:l(()=>[s(c(U),{title:"Cash Flow Projections"}),t("div",Y,[e[2]||(e[2]=t("div",null,[t("h1",{class:"text-2xl font-bold"},"Cash Flow Projections"),t("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Track actual cash performance and forecast runway across upcoming periods. ")],-1)),t("div",Z,[t("div",tt,[s(c(V),{modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=o=>g.value=o),options:R,placeholder:"History Range"},null,8,["modelValue"])]),t("div",et,[s(c(V),{modelValue:f.value,"onUpdate:modelValue":e[1]||(e[1]=o=>f.value=o),options:E,placeholder:"Forecast Range"},null,8,["modelValue"])])])]),t("div",st,[s(m,null,{default:l(()=>[s(x,{class:"p-6"},{default:l(()=>[t("div",lt,[t("div",null,[e[3]||(e[3]=t("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Average Monthly Net",-1)),t("p",at,r(n(i.value.average_net)),1)]),t("div",ot,[s(c(J),{class:"h-6 w-6 text-green-600"})])])]),_:1})]),_:1}),s(m,null,{default:l(()=>[s(x,{class:"p-6"},{default:l(()=>[t("div",rt,[t("div",null,[e[4]||(e[4]=t("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Cash Position",-1)),t("p",nt,r(n(i.value.current_cash_position)),1)]),t("div",it,[s(c(K),{class:"h-6 w-6 text-blue-600"})])])]),_:1})]),_:1}),s(m,null,{default:l(()=>[s(x,{class:"p-6"},{default:l(()=>[t("div",dt,[t("div",null,[e[5]||(e[5]=t("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Next Month Projection",-1)),t("p",{class:b(["text-2xl font-semibold",i.value.next_month_projection>=0?"text-green-600":"text-red-600"])},r(n(i.value.next_month_projection)),3)]),t("div",ut,[s(c(W),{class:"h-6 w-6 text-amber-500"})])])]),_:1})]),_:1}),s(m,null,{default:l(()=>[s(x,{class:"p-6"},{default:l(()=>[t("div",ct,[t("div",null,[e[6]||(e[6]=t("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Cash Runway",-1)),t("p",mt,r(i.value.cash_runway_months)+" months ",1)]),t("div",xt,[i.value.cash_runway_months>=6?(u(),F(c(Q),{key:0,class:"h-6 w-6 text-purple-600"})):(u(),F(c(X),{key:1,class:"h-6 w-6 text-purple-600"}))])])]),_:1})]),_:1})]),s(m,{class:"mb-8"},{default:l(()=>[s(w,null,{default:l(()=>[s(C,null,{default:l(()=>e[7]||(e[7]=[v("Net Cash Flow & Runway")])),_:1,__:[7]})]),_:1}),s(x,null,{default:l(()=>[s(G,{type:"line",data:I.value,options:O.value,height:"360px"},null,8,["data","options"])]),_:1})]),_:1}),t("div",pt,[s(m,null,{default:l(()=>[s(w,null,{default:l(()=>[s(C,null,{default:l(()=>e[8]||(e[8]=[v("Historical Performance")])),_:1,__:[8]})]),_:1}),s(x,null,{default:l(()=>[t("div",gt,[t("table",ft,[e[9]||(e[9]=t("thead",null,[t("tr",{class:"bg-gray-50"},[t("th",{class:"px-4 py-2 text-left text-sm font-semibold text-gray-600"},"Month"),t("th",{class:"px-4 py-2 text-right text-sm font-semibold text-gray-600"},"Income"),t("th",{class:"px-4 py-2 text-right text-sm font-semibold text-gray-600"},"Expenses"),t("th",{class:"px-4 py-2 text-right text-sm font-semibold text-gray-600"},"Net"),t("th",{class:"px-4 py-2 text-right text-sm font-semibold text-gray-600"},"Cash")])],-1)),t("tbody",null,[(u(!0),h(M,null,N(_.value,o=>(u(),h("tr",{key:`hist-${o.month}`,class:"border-b last:border-0"},[t("td",ht,r(o.label),1),t("td",_t,r(n(o.income)),1),t("td",yt,r(n(o.expenses)),1),t("td",{class:b(["px-4 py-3 text-sm text-right font-semibold",o.net>=0?"text-green-600":"text-red-600"])},r(n(o.net)),3),t("td",bt,r(n(o.running_balance)),1)]))),128))])])])]),_:1})]),_:1}),s(m,null,{default:l(()=>[s(w,null,{default:l(()=>[s(C,null,{default:l(()=>e[10]||(e[10]=[v("Projection Outlook")])),_:1,__:[10]})]),_:1}),s(x,null,{default:l(()=>[t("div",vt,[t("table",wt,[e[12]||(e[12]=t("thead",null,[t("tr",{class:"bg-gray-50"},[t("th",{class:"px-4 py-2 text-left text-sm font-semibold text-gray-600"},"Month"),t("th",{class:"px-4 py-2 text-right text-sm font-semibold text-gray-600"},"Projected Income"),t("th",{class:"px-4 py-2 text-right text-sm font-semibold text-gray-600"},"Projected Expenses"),t("th",{class:"px-4 py-2 text-right text-sm font-semibold text-gray-600"},"Projected Net"),t("th",{class:"px-4 py-2 text-right text-sm font-semibold text-gray-600"},"Projected Cash")])],-1)),t("tbody",null,[y.value.length?z("",!0):(u(),h("tr",Ct,e[11]||(e[11]=[t("td",{colspan:"5",class:"px-4 py-6 text-center text-sm text-gray-500"}," Not enough history to generate a forecast yet. ",-1)]))),(u(!0),h(M,null,N(y.value,o=>(u(),h("tr",{key:`proj-${o.month}`,class:"border-b last:border-0"},[t("td",kt,r(o.label),1),t("td",jt,r(n(o.income)),1),t("td",Ft,r(n(o.expenses)),1),t("td",{class:b(["px-4 py-3 text-sm text-right font-semibold",o.net>=0?"text-green-600":"text-red-600"])},r(n(o.net)),3),t("td",Pt,r(n(o.running_balance)),1)]))),128))])])])]),_:1})]),_:1})]),s(m,null,{default:l(()=>[s(w,null,{default:l(()=>[s(C,null,{default:l(()=>e[13]||(e[13]=[v("Summary Insights")])),_:1,__:[13]})]),_:1}),s(x,null,{default:l(()=>[t("div",Mt,[t("div",Nt,[e[14]||(e[14]=t("p",{class:"text-xs uppercase tracking-wide text-gray-500"},"Average Monthly Income",-1)),t("p",Vt,r(n(i.value.average_income)),1)]),t("div",$t,[e[15]||(e[15]=t("p",{class:"text-xs uppercase tracking-wide text-gray-500"},"Average Monthly Expenses",-1)),t("p",St,r(n(i.value.average_expenses)),1)]),t("div",At,[e[16]||(e[16]=t("p",{class:"text-xs uppercase tracking-wide text-gray-500"},"Projected Net (Next 3 Months)",-1)),t("p",{class:b(["mt-1 text-xl font-semibold",i.value.projected_three_month_net>=0?"text-green-600":"text-red-600"])},r(n(i.value.projected_three_month_net)),3)])])]),_:1})]),_:1})]),_:1}))}});export{Kt as default};
