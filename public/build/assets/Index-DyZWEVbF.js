import{d as J,v as Q,m as C,K as X,s as z,W as h,c as y,o as i,w as a,a as l,b as e,u as s,g as Z,T as ee,x as O,t as d,I as te,y as se,f as u,S as _,h as g,e as p,F as oe,r as ae,n as M}from"./app-qA0CnBWe.js";import{_ as v}from"./index-DKsLgjKN.js";import{_ as U}from"./Select.vue_vue_type_script_setup_true_lang-YZJXGDNS.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_85568d9b_lang-C02RUasq.js";import{_ as re}from"./AppLayout.vue_vue_type_script_setup_true_lang-BLollNnU.js";import{_ as w,a as b}from"./CardContent.vue_vue_type_script_setup_true_lang-DFxNC8fq.js";import{_ as P}from"./Icon.vue_vue_type_script_setup_true_lang-AIhq6K5q.js";import{S as $}from"./sweetalert2.esm.all-BQIkj5Wb.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CLRWpV5h.js";import"./useForwardPropsEmits-CwUzb49y.js";import"./Teleport-DIfWgdf9.js";import"./RovingFocusGroup-gU1KHB92.js";import"./chevron-down-CCBk2xD7.js";import"./VisuallyHidden-qt70HzaR.js";import"./DialogPortal-BX8gIO6T.js";import"./x-Da1o-ysX.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B1dhHsl6.js";import"./chevron-right-r24-WVSv.js";import"./square-pen-DjRAZ5Qq.js";import"./calendar-BJTiP8we.js";import"./check-BujOPtAl.js";import"./chevron-left-BeUk50d8.js";import"./circle-alert-CD7TZ1Am.js";import"./piggy-bank-C7_yl6Hw.js";import"./circle-check-big-DF-vhMGd.js";import"./circle-check-B9DMRNBp.js";import"./trophy-BBHIiUlf.js";import"./circle-x-DdhefOoK.js";import"./clock-CiNhGBx2.js";import"./dollar-sign-CbfZVek1.js";import"./eye-off-9QebG7yy.js";import"./eye-5KKko-8Q.js";import"./loader-circle-Bl4Hr2SU.js";import"./mail-Dyt5iSRM.js";import"./map-pin-kt4sBBgF.js";import"./message-square-BrTcst4h.js";import"./sun-Biu9FB4q.js";import"./plus-CBc_0-HC.js";import"./printer-I2tYkTYc.js";import"./search-CKYqMlw5.js";import"./shopping-bag-CF7dcyya.js";import"./trash-2-DM0kfT8T.js";import"./trending-up-CsAZ24Wd.js";const le={class:"grid grid-cols-1 lg:grid-cols-5 gap-6 mt-8 mb-6"},ne={class:"flex items-center justify-between"},ie={class:"text-xl font-bold text-blue-600"},de={class:"flex items-center justify-between"},ue={class:"text-xl font-bold text-green-600"},pe={class:"flex items-center justify-between"},me={class:"text-xl font-bold text-yellow-600"},ce={class:"flex items-center justify-between"},fe={class:"text-xl font-bold text-orange-600"},ve={class:"flex items-center justify-between"},ye={class:"text-xl font-bold text-emerald-600"},ge={class:"flex items-center justify-between mt-4 mb-2"},xe={class:"flex gap-2 items-center"},he={class:"w-48"},_e={class:"w-48"},we={class:"flex items-center gap-2"},be={key:0},ke={key:0,class:"py-12 text-center"},Ce={class:"flex items-center justify-center gap-2"},Se={key:1,class:"py-12 text-center"},Pe={key:0,class:"text-sm text-gray-600 mb-6"},je={key:1},Be={class:"min-w-full divide-y divide-border"},Ie={class:"px-4 py-2 font-medium"},Ve={class:"px-4 py-2"},Te={class:"font-medium"},ze={key:0,class:"text-sm text-gray-500"},Me={class:"px-4 py-2 font-medium"},$e={class:"px-4 py-2"},Ae={class:"px-4 py-2"},De={class:"px-4 py-2"},Ne={class:"text-sm"},Fe={class:"px-4 py-2 text-sm text-gray-500"},Oe={class:"px-4 py-2"},Ue={class:"flex gap-2"},Ee={key:0,class:"flex items-center justify-between mt-6"},He={class:"text-sm text-gray-700"},Re={class:"flex gap-2"},Le={class:"fixed bottom-6 right-6 z-50"},We={key:0,class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ye={key:1,class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Nt=J({__name:"Index",setup(Ke){var F;const r=Q(),j=Array.isArray((F=r.props.auth)==null?void 0:F.userRoles)?r.props.auth.userRoles:[];j.includes("Customer");const B=j.includes("Admin"),I=j.includes("Staff"),S=I&&!B,A=I&&!B,E=I&&!B,x=C(r.props.filters?r.props.filters:{}),m=C(typeof x.value.search=="string"?x.value.search:""),c=C(typeof x.value.status=="string"?x.value.status:""),f=C(typeof x.value.payment_status=="string"?x.value.payment_status:""),k=C(!1),H=[{title:"Invoices",href:"/invoices"}];X(()=>{m.value=r.props.filters&&typeof r.props.filters.search=="string"?r.props.filters.search:"",c.value=r.props.filters&&typeof r.props.filters.status=="string"?r.props.filters.status:"",f.value=r.props.filters&&typeof r.props.filters.payment_status=="string"?r.props.filters.payment_status:""});const R=[{value:"",label:"All Statuses"},{value:"draft",label:"Draft"},{value:"pending",label:"Pending"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}],L=[{value:"",label:"All Payment Status"},{value:"pending",label:"Pending Payment"},{value:"paid",label:"Paid"},{value:"Cancelled Order",label:"Cancelled Order"}];let V=null;z(m,n=>{V&&clearTimeout(V),V=setTimeout(()=>{h.get("/invoices",{search:n||void 0,status:c.value||void 0,payment_status:f.value||void 0},{preserveState:!0,replace:!0})},400)}),z(c,n=>{h.get("/invoices",{search:m.value||void 0,status:n||void 0,payment_status:f.value||void 0},{preserveState:!0,replace:!0})}),z(f,n=>{h.get("/invoices",{search:m.value||void 0,status:c.value||void 0,payment_status:n||void 0},{preserveState:!0,replace:!0})});function D(n){h.get("/invoices",{search:m.value||void 0,status:c.value||void 0,payment_status:f.value||void 0,page:n},{preserveState:!0,replace:!0})}async function W(n){(await $.fire({title:"Delete this invoice?",text:"This will remove the invoice permanently. You canâ€™t undo this.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#8f5be8",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it"})).isConfirmed&&h.delete(`/invoices/${n}`,{onSuccess:()=>{$.fire("Deleted","The invoice was deleted.","success")}})}function Y(n){h.post(route("invoices.markPaid",n),{},{preserveScroll:!0,onSuccess:()=>{$.fire({toast:!0,position:"top-end",icon:"success",title:"Invoice marked as paid",showConfirmButton:!1,timer:2e3})}})}function K(n){switch(n){case"draft":return"bg-gray-100 text-gray-800";case"pending":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}function q(n){switch(n){case"paid":return"bg-emerald-100 text-emerald-800";case"pending":return"bg-orange-100 text-orange-800";case"Cancelled Order":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}function N(n){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(n)}function G(n){return new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"2-digit"})}return(n,t)=>(i(),y(re,{breadcrumbs:H},{default:a(()=>[l(s(Z),{title:"Invoices"}),l(ee,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 transform -translate-y-4","enter-to-class":"opacity-100 transform translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 transform translate-y-0","leave-to-class":"opacity-0 transform -translate-y-4"},{default:a(()=>[O(e("div",le,[l(w,{class:"relative overflow-hidden"},{default:a(()=>[l(b,{class:"p-6"},{default:a(()=>[e("div",ne,[e("div",null,[t[7]||(t[7]=e("p",{class:"text-sm font-medium text-muted-foreground"},"Total Invoices",-1)),e("p",ie,d(s(r).props.stats.totalInvoices),1)]),t[8]||(t[8]=e("div",{class:"h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1))])]),_:1})]),_:1}),l(w,{class:"relative overflow-hidden"},{default:a(()=>[l(b,{class:"p-6"},{default:a(()=>[e("div",de,[e("div",null,[t[9]||(t[9]=e("p",{class:"text-sm font-medium text-muted-foreground"},"Total Amount",-1)),e("p",ue,d(N(s(r).props.stats.totalAmount)),1)]),t[10]||(t[10]=e("div",{class:"h-12 w-12 rounded-full bg-green-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1))])]),_:1})]),_:1}),l(w,{class:"relative overflow-hidden"},{default:a(()=>[l(b,{class:"p-6"},{default:a(()=>[e("div",pe,[e("div",null,[t[11]||(t[11]=e("p",{class:"text-sm font-medium text-muted-foreground"},"Pending",-1)),e("p",me,d(s(r).props.stats.pendingInvoices),1)]),t[12]||(t[12]=e("div",{class:"h-12 w-12 rounded-full bg-yellow-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])]),_:1})]),_:1}),l(w,{class:"relative overflow-hidden"},{default:a(()=>[l(b,{class:"p-6"},{default:a(()=>[e("div",ce,[e("div",null,[t[13]||(t[13]=e("p",{class:"text-sm font-medium text-muted-foreground"},"Pending Payment",-1)),e("p",fe,d(s(r).props.stats.pendingPaymentInvoices),1)]),t[14]||(t[14]=e("div",{class:"h-12 w-12 rounded-full bg-orange-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1))])]),_:1})]),_:1}),l(w,{class:"relative overflow-hidden"},{default:a(()=>[l(b,{class:"p-6"},{default:a(()=>[e("div",ve,[e("div",null,[t[15]||(t[15]=e("p",{class:"text-sm font-medium text-muted-foreground"},"Paid",-1)),e("p",ye,d(s(r).props.stats.paidInvoices),1)]),t[16]||(t[16]=e("div",{class:"h-12 w-12 rounded-full bg-emerald-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])]),_:1})]),_:1})],512),[[te,k.value]])]),_:1}),e("div",ge,[e("div",xe,[O(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>m.value=o),type:"text",placeholder:"Search by customer name",class:"rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[se,m.value]]),e("div",he,[l(s(U),{modelValue:c.value,"onUpdate:modelValue":t[1]||(t[1]=o=>c.value=o),options:R,placeholder:"Filter by status"},null,8,["modelValue"])]),e("div",_e,[l(s(U),{modelValue:f.value,"onUpdate:modelValue":t[2]||(t[2]=o=>f.value=o),options:L,placeholder:"Filter by payment"},null,8,["modelValue"])])]),e("div",we,[s(S)?(i(),y(s(_),{key:0,href:n.route("invoices.create")},{default:a(()=>[l(s(v),{variant:"default"},{default:a(()=>t[17]||(t[17]=[e("span",{class:"mr-2"},"+",-1),g(" Add New Invoice ")])),_:1,__:[17]})]),_:1},8,["href"])):u("",!0)])]),l(w,null,{default:a(()=>[l(b,null,{default:a(()=>[s(r).props.invoices.data.length===0?(i(),p("div",be,[m.value&&m.value.trim().length||c.value&&c.value.trim().length||f.value&&f.value.trim().length?(i(),p("div",ke,[t[20]||(t[20]=e("div",{class:"text-xl font-semibold mb-2"},"No results found",-1)),t[21]||(t[21]=e("p",{class:"text-sm text-gray-600 mb-6"}," We couldn't find any invoices matching your search/filter. ",-1)),e("div",Ce,[l(s(v),{variant:"outline",onClick:t[3]||(t[3]=o=>{m.value="",c.value="",f.value=""})},{default:a(()=>t[18]||(t[18]=[g("Clear search")])),_:1,__:[18]}),s(S)?(i(),y(s(_),{key:0,href:n.route("invoices.create")},{default:a(()=>[l(s(v),{variant:"default"},{default:a(()=>t[19]||(t[19]=[e("span",{class:"mr-2"},"+",-1),g(" Create Invoice ")])),_:1,__:[19]})]),_:1},8,["href"])):u("",!0)])])):(i(),p("div",Se,[t[23]||(t[23]=e("div",{class:"text-xl font-semibold mb-2"},"No invoices yet",-1)),s(S)?(i(),p("p",Pe,"Create your first invoice to get started.")):u("",!0),s(S)?(i(),y(s(_),{key:1,href:n.route("invoices.create")},{default:a(()=>[l(s(v),{variant:"default"},{default:a(()=>t[22]||(t[22]=[e("span",{class:"mr-2"},"+",-1),g(" Create Invoice ")])),_:1,__:[22]})]),_:1},8,["href"])):u("",!0)]))])):(i(),p("div",je,[e("table",Be,[t[24]||(t[24]=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 text-left"},"Reference #"),e("th",{class:"px-4 py-2 text-left"},"Customer"),e("th",{class:"px-4 py-2 text-left"},"Total"),e("th",{class:"px-4 py-2 text-left"},"Status"),e("th",{class:"px-4 py-2 text-left"},"Payment Status"),e("th",{class:"px-4 py-2 text-left"},"Payment Method"),e("th",{class:"px-4 py-2 text-left"},"Date"),e("th",{class:"px-4 py-2 text-left"},"Actions")])],-1)),e("tbody",null,[(i(!0),p(oe,null,ae(s(r).props.invoices.data,o=>(i(),p("tr",{key:o.id,class:"hover:bg-muted"},[e("td",Ie,[l(s(_),{href:n.route("invoices.show",o.id),class:"underline underline-offset-4"},{default:a(()=>[g(d(o.reference_number),1)]),_:2},1032,["href"])]),e("td",Ve,[e("div",null,[e("div",Te,d(o.customer.name),1),o.customer.company_name?(i(),p("div",ze,d(o.customer.company_name),1)):u("",!0)])]),e("td",Me,d(N(o.total_amount)),1),e("td",$e,[e("span",{class:M(["px-2 py-1 rounded-full text-xs font-medium",K(o.status)])},d(o.status.charAt(0).toUpperCase()+o.status.slice(1)),3)]),e("td",Ae,[e("span",{class:M(["px-2 py-1 rounded-full text-xs font-medium",q(o.payment_status)])},d(o.payment_status==="paid"?"Paid":o.payment_status==="Cancelled Order"?"Cancelled Order":"Pending Payment"),3)]),e("td",De,[e("span",Ne,d(o.payment_method.replace("_"," ").replace(/\b\w/g,T=>T.toUpperCase())),1)]),e("td",Fe,d(G(o.created_at)),1),e("td",Oe,[e("div",Ue,[l(s(_),{href:n.route("invoices.show",o.id)},{default:a(()=>[l(s(v),{variant:"ghost",size:"sm",title:"View"},{default:a(()=>[l(P,{name:"eye",class:"h-4 w-4"})]),_:1})]),_:2},1032,["href"]),s(A)?(i(),y(s(_),{key:0,href:n.route("invoices.edit",o.id)},{default:a(()=>[l(s(v),{variant:"ghost",size:"sm",title:"Edit"},{default:a(()=>[l(P,{name:"edit",class:"h-4 w-4"})]),_:1})]),_:2},1032,["href"])):u("",!0),s(A)&&o.payment_status==="pending"&&o.status!=="cancelled"?(i(),y(s(v),{key:1,variant:"ghost",size:"sm",onClick:T=>Y(o.id),title:"Mark as Paid"},{default:a(()=>[l(P,{name:"check",class:"h-4 w-4"})]),_:2},1032,["onClick"])):u("",!0),s(E)?(i(),y(s(v),{key:2,variant:"ghost",size:"sm",onClick:T=>W(o.id),title:"Delete"},{default:a(()=>[l(P,{name:"trash",class:"h-4 w-4"})]),_:2},1032,["onClick"])):u("",!0)])])]))),128))])]),s(r).props.invoices.last_page>1?(i(),p("div",Ee,[e("div",He," Showing "+d(s(r).props.invoices.from)+" to "+d(s(r).props.invoices.to)+" of "+d(s(r).props.invoices.total)+" results ",1),e("div",Re,[s(r).props.invoices.prev_page_url?(i(),y(s(v),{key:0,variant:"outline",size:"sm",onClick:t[4]||(t[4]=o=>D(s(r).props.invoices.current_page-1))},{default:a(()=>t[25]||(t[25]=[g(" Previous ")])),_:1,__:[25]})):u("",!0),s(r).props.invoices.next_page_url?(i(),y(s(v),{key:1,variant:"outline",size:"sm",onClick:t[5]||(t[5]=o=>D(s(r).props.invoices.current_page+1))},{default:a(()=>t[26]||(t[26]=[g(" Next ")])),_:1,__:[26]})):u("",!0)])])):u("",!0)]))]),_:1})]),_:1}),e("div",Le,[e("button",{onClick:t[6]||(t[6]=o=>k.value=!k.value),class:M(["h-12 w-12 rounded-full shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center",k.value?"bg-red-500 hover:bg-red-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"])},[k.value?(i(),p("svg",Ye,t[28]||(t[28]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)]))):(i(),p("svg",We,t[27]||(t[27]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},null,-1)])))],2)])]),_:1}))}});export{Nt as default};
