import{d as I,a as c,o as r,w as s,b as u,e,u as a,k as q,t as l,l as i,S as R,f as d,g as f,n as V,W as g}from"./app-CY-R8p4I.js";import{_ as p}from"./index-ZrUxBZkM.js";import{b as w,d as k,_ as Y}from"./AppLayout.vue_vue_type_script_setup_true_lang-B6LMl6Iv.js";import{_,a as y}from"./CardContent.vue_vue_type_script_setup_true_lang-CtAQy_Ha.js";import{a as x,_ as v}from"./CardTitle.vue_vue_type_script_setup_true_lang-rWRg4ec-.js";import{S as m}from"./sweetalert2.esm.all-BQIkj5Wb.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_5601c0ff_lang-BzdxL_P_.js";import"./RovingFocusGroup-BIsjPPEl.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DPhOlZ_-.js";import"./createLucideIcon-B5ntUyXr.js";import"./VisuallyHidden-C6KiMAas.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BcPEPjiy.js";const j={class:"flex items-center justify-between my-6"},E={class:"text-2xl font-bold"},U={class:"flex gap-2"},F={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},H={class:"lg:col-span-2 space-y-6"},M={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},O={class:"text-lg font-semibold"},W={key:0},z={key:0,class:"mt-4"},L={class:"mt-1"},Q={key:1,class:"mt-4"},G={class:"mt-1"},J={class:"overflow-x-auto"},K={class:"min-w-full divide-y divide-border"},X={class:"px-4 py-2"},Z={class:"font-medium"},ee={class:"text-sm text-gray-500"},te={class:"px-4 py-2"},ne={class:"px-4 py-2 font-medium"},se={class:"space-y-6"},ue={class:"flex items-center space-x-3 mb-4"},le={class:"font-medium"},oe={key:0,class:"text-sm text-gray-500"},re={class:"space-y-2 text-sm"},de={key:0},ie={key:1},ae={key:2},fe={class:"space-y-3"},me={class:"font-medium"},ce={class:"font-medium"},pe={key:0},_e={class:"space-y-2"},ye={class:"flex items-center space-x-3"},xe={class:"font-medium"},ve={class:"text-sm text-gray-500"},Ne=I({__name:"Show",props:{refund:{}},setup(B){const n=B,h=[{title:"Refunds",href:"/refunds"},{title:`Refund ${n.refund.refund_number}`,href:`/refunds/${n.refund.id}`}];function S(o){switch(o){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-blue-100 text-blue-800";case"processed":return"bg-purple-100 text-purple-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}function b(o){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(o)}function C(o){return new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function $(o){return o.name.split(" ").map(t=>t.charAt(0)).join("").toUpperCase().slice(0,2)}async function A(){(await m.fire({title:"Approve Refund?",text:"Are you sure you want to approve this refund?",icon:"question",showCancelButton:!0,confirmButtonColor:"#8f5be8",cancelButtonColor:"#d33",confirmButtonText:"Yes, approve"})).isConfirmed&&g.post(`/refunds/${n.refund.id}/approve`,{},{onSuccess:()=>{m.fire("Refund approved","Refund has been approved successfully.","success")}})}async function P(){(await m.fire({title:"Process Refund?",text:"Are you sure you want to process this refund?",icon:"question",showCancelButton:!0,confirmButtonColor:"#8f5be8",cancelButtonColor:"#d33",confirmButtonText:"Yes, process"})).isConfirmed&&g.post(`/refunds/${n.refund.id}/process`,{},{onSuccess:()=>{m.fire("Refund processed","Refund has been processed successfully.","success")}})}async function N(){(await m.fire({title:"Complete Refund?",text:"Are you sure you want to complete this refund? This will update product stock.",icon:"question",showCancelButton:!0,confirmButtonColor:"#8f5be8",cancelButtonColor:"#d33",confirmButtonText:"Yes, complete"})).isConfirmed&&g.post(`/refunds/${n.refund.id}/complete`,{},{onSuccess:()=>{m.fire("Refund completed","Refund has been completed successfully.","success")}})}async function D(){(await m.fire({title:"Cancel Refund?",text:"Are you sure you want to cancel this refund?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, cancel"})).isConfirmed&&g.post(`/refunds/${n.refund.id}/cancel`,{},{onSuccess:()=>{m.fire("Refund cancelled","Refund has been cancelled successfully.","success")}})}return(o,t)=>(r(),c(Y,{breadcrumbs:h},{default:s(()=>[u(a(q),{title:`Refund ${n.refund.refund_number}`},null,8,["title"]),e("div",j,[e("h1",E,"Refund "+l(n.refund.refund_number),1),e("div",U,[n.refund.status==="pending"?(r(),c(a(R),{key:0,href:o.route("refunds.edit",n.refund.id)},{default:s(()=>[u(a(p),{variant:"default"},{default:s(()=>t[0]||(t[0]=[d("Edit Refund")])),_:1,__:[0]})]),_:1},8,["href"])):i("",!0),u(a(R),{href:o.route("refunds.index")},{default:s(()=>[u(a(p),{variant:"ghost"},{default:s(()=>t[1]||(t[1]=[d("Back to Refunds")])),_:1,__:[1]})]),_:1},8,["href"])])]),e("div",F,[e("div",H,[u(_,null,{default:s(()=>[u(x,null,{default:s(()=>[u(v,null,{default:s(()=>t[2]||(t[2]=[d("Refund Information")])),_:1,__:[2]})]),_:1}),u(y,null,{default:s(()=>[e("div",M,[e("div",null,[t[3]||(t[3]=e("label",{class:"text-sm font-medium text-gray-500"},"Refund Number",-1)),e("p",O,l(n.refund.refund_number),1)]),e("div",null,[t[4]||(t[4]=e("label",{class:"text-sm font-medium text-gray-500"},"Date Created",-1)),e("p",null,l(C(n.refund.created_at)),1)]),e("div",null,[t[5]||(t[5]=e("label",{class:"text-sm font-medium text-gray-500"},"Status",-1)),e("span",{class:V(["px-2 py-1 rounded-full text-xs font-medium",S(n.refund.status)])},l(n.refund.status),3)]),e("div",null,[t[6]||(t[6]=e("label",{class:"text-sm font-medium text-gray-500"},"Refund Type",-1)),e("p",null,l(n.refund.refund_type.replace("_"," ")),1)]),e("div",null,[t[7]||(t[7]=e("label",{class:"text-sm font-medium text-gray-500"},"Refund Method",-1)),e("p",null,l(n.refund.refund_method.replace("_"," ")),1)]),n.refund.reference_number?(r(),f("div",W,[t[8]||(t[8]=e("label",{class:"text-sm font-medium text-gray-500"},"Reference Number",-1)),e("p",null,l(n.refund.reference_number),1)])):i("",!0)]),n.refund.reason?(r(),f("div",z,[t[9]||(t[9]=e("label",{class:"text-sm font-medium text-gray-500"},"Reason",-1)),e("p",L,l(n.refund.reason),1)])):i("",!0),n.refund.notes?(r(),f("div",Q,[t[10]||(t[10]=e("label",{class:"text-sm font-medium text-gray-500"},"Notes",-1)),e("p",G,l(n.refund.notes),1)])):i("",!0)]),_:1})]),_:1}),u(_,null,{default:s(()=>[u(x,null,{default:s(()=>[u(v,null,{default:s(()=>t[11]||(t[11]=[d("Refund Details")])),_:1,__:[11]})]),_:1}),u(y,null,{default:s(()=>[e("div",J,[e("table",K,[t[12]||(t[12]=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 text-left"},"Product"),e("th",{class:"px-4 py-2 text-left"},"Quantity Refunded"),e("th",{class:"px-4 py-2 text-left"},"Refund Amount")])],-1)),e("tbody",null,[e("tr",null,[e("td",X,[e("div",null,[e("div",Z,l(n.refund.product.name),1),e("div",ee,"Original Price: "+l(b(n.refund.product.selling_price)),1)])]),e("td",te,l(n.refund.quantity_refunded),1),e("td",ne,l(b(n.refund.refund_amount/100)),1)])])])])]),_:1})]),_:1})]),e("div",se,[u(_,null,{default:s(()=>[u(x,null,{default:s(()=>[u(v,null,{default:s(()=>t[13]||(t[13]=[d("Customer Information")])),_:1,__:[13]})]),_:1}),u(y,null,{default:s(()=>[e("div",ue,[u(w,null,{default:s(()=>[u(k,null,{default:s(()=>[d(l($(n.refund.invoice.customer)),1)]),_:1})]),_:1}),e("div",null,[e("h3",le,l(n.refund.invoice.customer.name),1),n.refund.invoice.customer.company_name?(r(),f("p",oe,l(n.refund.invoice.customer.company_name),1)):i("",!0)])]),e("div",re,[n.refund.invoice.customer.email?(r(),f("div",de,[t[14]||(t[14]=e("span",{class:"text-gray-500"},"Email:",-1)),e("p",null,l(n.refund.invoice.customer.email),1)])):i("",!0),n.refund.invoice.customer.phone?(r(),f("div",ie,[t[15]||(t[15]=e("span",{class:"text-gray-500"},"Phone:",-1)),e("p",null,l(n.refund.invoice.customer.phone),1)])):i("",!0),n.refund.invoice.customer.address?(r(),f("div",ae,[t[16]||(t[16]=e("span",{class:"text-gray-500"},"Address:",-1)),e("p",null,l(n.refund.invoice.customer.address),1)])):i("",!0)])]),_:1})]),_:1}),u(_,null,{default:s(()=>[u(x,null,{default:s(()=>[u(v,null,{default:s(()=>t[17]||(t[17]=[d("Original Invoice")])),_:1,__:[17]})]),_:1}),u(y,null,{default:s(()=>[e("div",fe,[e("div",null,[t[18]||(t[18]=e("label",{class:"text-sm font-medium text-gray-500"},"Invoice Number",-1)),e("p",me,"#"+l(n.refund.invoice.id),1)]),e("div",null,[t[19]||(t[19]=e("label",{class:"text-sm font-medium text-gray-500"},"Total Amount",-1)),e("p",ce,l(b(n.refund.invoice.total_amount/100)),1)]),e("div",null,[t[20]||(t[20]=e("label",{class:"text-sm font-medium text-gray-500"},"Payment Method",-1)),e("p",null,l(n.refund.invoice.payment_method.replace("_"," ")),1)]),n.refund.invoice.payment_reference?(r(),f("div",pe,[t[21]||(t[21]=e("label",{class:"text-sm font-medium text-gray-500"},"Payment Reference",-1)),e("p",null,l(n.refund.invoice.payment_reference),1)])):i("",!0),e("div",null,[t[22]||(t[22]=e("label",{class:"text-sm font-medium text-gray-500"},"Date",-1)),e("p",null,l(C(n.refund.invoice.created_at)),1)])])]),_:1})]),_:1}),u(_,null,{default:s(()=>[u(x,null,{default:s(()=>[u(v,null,{default:s(()=>t[23]||(t[23]=[d("Status Actions")])),_:1,__:[23]})]),_:1}),u(y,null,{default:s(()=>[e("div",_e,[n.refund.status==="pending"?(r(),c(a(p),{key:0,onClick:A,variant:"default",class:"w-full"},{default:s(()=>t[24]||(t[24]=[d(" Approve Refund ")])),_:1,__:[24]})):i("",!0),n.refund.status==="approved"?(r(),c(a(p),{key:1,onClick:P,variant:"default",class:"w-full"},{default:s(()=>t[25]||(t[25]=[d(" Process Refund ")])),_:1,__:[25]})):i("",!0),n.refund.status==="processed"?(r(),c(a(p),{key:2,onClick:N,variant:"default",class:"w-full"},{default:s(()=>t[26]||(t[26]=[d(" Complete Refund ")])),_:1,__:[26]})):i("",!0),["pending","approved"].includes(n.refund.status)?(r(),c(a(p),{key:3,onClick:D,variant:"destructive",class:"w-full"},{default:s(()=>t[27]||(t[27]=[d(" Cancel Refund ")])),_:1,__:[27]})):i("",!0)])]),_:1})]),_:1}),u(_,null,{default:s(()=>[u(x,null,{default:s(()=>[u(v,null,{default:s(()=>t[28]||(t[28]=[d("Created By")])),_:1,__:[28]})]),_:1}),u(y,null,{default:s(()=>[e("div",ye,[u(w,null,{default:s(()=>[u(k,null,{default:s(()=>[d(l(n.refund.user.name.split(" ").map(T=>T[0]).join("").toUpperCase()),1)]),_:1})]),_:1}),e("div",null,[e("h3",xe,l(n.refund.user.name),1),e("p",ve,l(C(n.refund.created_at)),1)])])]),_:1})]),_:1})])])]),_:1}))}});export{Ne as default};
