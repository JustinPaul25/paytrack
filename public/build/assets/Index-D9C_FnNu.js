import{d as K,v as Q,m as C,I as X,s as z,W as _,c as y,o as i,w as o,a as r,b as e,u as s,g as Z,T as ee,x as U,t as d,G as te,y as se,f as u,S as h,h as g,e as p,F as oe,r as ae,n as M}from"./app-CFepRPwu.js";import{_ as v}from"./index-DV2OFQX6.js";import{_ as E}from"./Select.vue_vue_type_script_setup_true_lang-CYtQqIPO.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_85568d9b_lang-BVtomLDo.js";import{_ as le}from"./AppLayout.vue_vue_type_script_setup_true_lang-DNgqyd1_.js";import{_ as w,a as b}from"./CardContent.vue_vue_type_script_setup_true_lang-C9g0iyFA.js";import{_ as P}from"./Icon.vue_vue_type_script_setup_true_lang-AyuHrNRk.js";import{S as $}from"./sweetalert2.esm.all-BQIkj5Wb.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-Bf_YxJw4.js";import"./useForwardPropsEmits-dJhCFBuM.js";import"./Teleport-Cw4jQHPm.js";import"./RovingFocusGroup-ULlmQ5Ks.js";import"./chevron-down-R92geRre.js";import"./VisuallyHidden-CWyJyYAC.js";import"./DialogPortal-DiCFzSGZ.js";import"./x-Ca8660xC.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-LUv5QWXH.js";import"./circle-check-BFRkzvLo.js";import"./chevron-right-y-5Kn7YG.js";import"./square-pen-BMBcjgQ3.js";import"./calendar-De-1Bhz1.js";import"./check-BcBRAQdP.js";import"./chevron-left-BSO8IqPG.js";import"./circle-alert-K3E2hHLl.js";import"./piggy-bank-Doi-GQER.js";import"./circle-check-big-BHAWcsCr.js";import"./trophy-hnS9isP1.js";import"./circle-x-WiqC0zvf.js";import"./clock-Bc8n26xY.js";import"./dollar-sign-DZ92aT30.js";import"./eye-off-CivNZza2.js";import"./eye-Bl_2X_f3.js";import"./loader-circle-xEBdpNX4.js";import"./mail-DKPpuCbJ.js";import"./map-pin-Dcv4o8pr.js";import"./message-square-BWW23KC_.js";import"./sun-C_uOartN.js";import"./plus-B4tPvVnr.js";import"./printer-DL7Mxwcr.js";import"./search-ctf0gLio.js";import"./shopping-bag--GIIrr0B.js";import"./trash-2-BwFT21p8.js";import"./trending-up-B4eZGJsW.js";import"./user-cog-CjFQViSq.js";const re={class:"grid grid-cols-1 lg:grid-cols-5 gap-6 mt-8 mb-6"},ne={class:"flex items-center justify-between"},ie={class:"text-xl font-bold text-blue-600"},de={class:"flex items-center justify-between"},ue={class:"text-xl font-bold text-green-600"},pe={class:"flex items-center justify-between"},me={class:"text-xl font-bold text-yellow-600"},ce={class:"flex items-center justify-between"},fe={class:"text-xl font-bold text-orange-600"},ve={class:"flex items-center justify-between"},ye={class:"text-xl font-bold text-emerald-600"},ge={class:"flex items-center justify-between mt-4 mb-2"},xe={class:"flex gap-2 items-center"},_e={class:"w-48"},he={class:"w-48"},we={class:"flex items-center gap-2"},be={key:0},ke={key:0,class:"py-12 text-center"},Ce={class:"flex items-center justify-center gap-2"},Se={key:1,class:"py-12 text-center"},Pe={key:0,class:"text-sm text-gray-600 mb-6"},je={key:1},Be={class:"min-w-full divide-y divide-border"},Ie={class:"px-4 py-2 font-medium"},Ve={class:"px-4 py-2"},Te={class:"font-medium"},ze={key:0,class:"text-sm text-gray-500"},Me={class:"px-4 py-2 font-medium"},$e={class:"px-4 py-2"},Ae={class:"px-4 py-2"},De={class:"px-4 py-2"},Ne={class:"text-sm"},Fe={class:"px-4 py-2 text-sm text-gray-500"},Ue={class:"px-4 py-2"},Ee={class:"flex gap-2"},He={key:0,class:"flex items-center justify-between mt-6"},Re={class:"text-sm text-gray-700"},Le={class:"flex gap-2"},We={class:"fixed bottom-6 right-6 z-50"},Oe={key:0,class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ye={key:1,class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ft=K({__name:"Index",setup(Ge){var F;const l=Q(),j=Array.isArray((F=l.props.auth)==null?void 0:F.userRoles)?l.props.auth.userRoles:[];j.includes("Customer");const B=j.includes("Admin"),I=j.includes("Staff"),S=I&&!B,A=I&&!B,H=I&&!B,x=C(l.props.filters?l.props.filters:{}),m=C(typeof x.value.search=="string"?x.value.search:""),c=C(typeof x.value.status=="string"?x.value.status:""),f=C(typeof x.value.payment_status=="string"?x.value.payment_status:""),k=C(!1),R=[{title:"Invoices",href:"/invoices"}];X(()=>{m.value=l.props.filters&&typeof l.props.filters.search=="string"?l.props.filters.search:"",c.value=l.props.filters&&typeof l.props.filters.status=="string"?l.props.filters.status:"",f.value=l.props.filters&&typeof l.props.filters.payment_status=="string"?l.props.filters.payment_status:""});const L=[{value:"",label:"All Statuses"},{value:"draft",label:"Draft"},{value:"pending",label:"Pending"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}],W=[{value:"",label:"All Payment Status"},{value:"pending",label:"Pending Payment"},{value:"paid",label:"Paid"}];let V=null;z(m,n=>{V&&clearTimeout(V),V=setTimeout(()=>{_.get("/invoices",{search:n||void 0,status:c.value||void 0,payment_status:f.value||void 0},{preserveState:!0,replace:!0})},400)}),z(c,n=>{_.get("/invoices",{search:m.value||void 0,status:n||void 0,payment_status:f.value||void 0},{preserveState:!0,replace:!0})}),z(f,n=>{_.get("/invoices",{search:m.value||void 0,status:c.value||void 0,payment_status:n||void 0},{preserveState:!0,replace:!0})});function D(n){_.get("/invoices",{search:m.value||void 0,status:c.value||void 0,payment_status:f.value||void 0,page:n},{preserveState:!0,replace:!0})}async function O(n){(await $.fire({title:"Delete this invoice?",text:"This will remove the invoice permanently. You canâ€™t undo this.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#8f5be8",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it"})).isConfirmed&&_.delete(`/invoices/${n}`,{onSuccess:()=>{$.fire("Deleted","The invoice was deleted.","success")}})}function Y(n){_.post(route("invoices.markPaid",n),{},{preserveScroll:!0,onSuccess:()=>{$.fire({toast:!0,position:"top-end",icon:"success",title:"Invoice marked as paid",showConfirmButton:!1,timer:2e3})}})}function G(n){switch(n){case"draft":return"bg-gray-100 text-gray-800";case"pending":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}function q(n){switch(n){case"paid":return"bg-emerald-100 text-emerald-800";case"pending":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}}function N(n){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(n)}function J(n){return new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"2-digit"})}return(n,t)=>(i(),y(le,{breadcrumbs:R},{default:o(()=>[r(s(Z),{title:"Invoices"}),r(ee,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 transform -translate-y-4","enter-to-class":"opacity-100 transform translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 transform translate-y-0","leave-to-class":"opacity-0 transform -translate-y-4"},{default:o(()=>[U(e("div",re,[r(w,{class:"relative overflow-hidden"},{default:o(()=>[r(b,{class:"p-6"},{default:o(()=>[e("div",ne,[e("div",null,[t[7]||(t[7]=e("p",{class:"text-sm font-medium text-muted-foreground"},"Total Invoices",-1)),e("p",ie,d(s(l).props.stats.totalInvoices),1)]),t[8]||(t[8]=e("div",{class:"h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1))])]),_:1})]),_:1}),r(w,{class:"relative overflow-hidden"},{default:o(()=>[r(b,{class:"p-6"},{default:o(()=>[e("div",de,[e("div",null,[t[9]||(t[9]=e("p",{class:"text-sm font-medium text-muted-foreground"},"Total Amount",-1)),e("p",ue,d(N(s(l).props.stats.totalAmount)),1)]),t[10]||(t[10]=e("div",{class:"h-12 w-12 rounded-full bg-green-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1))])]),_:1})]),_:1}),r(w,{class:"relative overflow-hidden"},{default:o(()=>[r(b,{class:"p-6"},{default:o(()=>[e("div",pe,[e("div",null,[t[11]||(t[11]=e("p",{class:"text-sm font-medium text-muted-foreground"},"Pending",-1)),e("p",me,d(s(l).props.stats.pendingInvoices),1)]),t[12]||(t[12]=e("div",{class:"h-12 w-12 rounded-full bg-yellow-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])]),_:1})]),_:1}),r(w,{class:"relative overflow-hidden"},{default:o(()=>[r(b,{class:"p-6"},{default:o(()=>[e("div",ce,[e("div",null,[t[13]||(t[13]=e("p",{class:"text-sm font-medium text-muted-foreground"},"Pending Payment",-1)),e("p",fe,d(s(l).props.stats.pendingPaymentInvoices),1)]),t[14]||(t[14]=e("div",{class:"h-12 w-12 rounded-full bg-orange-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1))])]),_:1})]),_:1}),r(w,{class:"relative overflow-hidden"},{default:o(()=>[r(b,{class:"p-6"},{default:o(()=>[e("div",ve,[e("div",null,[t[15]||(t[15]=e("p",{class:"text-sm font-medium text-muted-foreground"},"Paid",-1)),e("p",ye,d(s(l).props.stats.paidInvoices),1)]),t[16]||(t[16]=e("div",{class:"h-12 w-12 rounded-full bg-emerald-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])]),_:1})]),_:1})],512),[[te,k.value]])]),_:1}),e("div",ge,[e("div",xe,[U(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>m.value=a),type:"text",placeholder:"Search by customer name",class:"rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[se,m.value]]),e("div",_e,[r(s(E),{modelValue:c.value,"onUpdate:modelValue":t[1]||(t[1]=a=>c.value=a),options:L,placeholder:"Filter by status"},null,8,["modelValue"])]),e("div",he,[r(s(E),{modelValue:f.value,"onUpdate:modelValue":t[2]||(t[2]=a=>f.value=a),options:W,placeholder:"Filter by payment"},null,8,["modelValue"])])]),e("div",we,[s(S)?(i(),y(s(h),{key:0,href:n.route("invoices.create")},{default:o(()=>[r(s(v),{variant:"default"},{default:o(()=>t[17]||(t[17]=[e("span",{class:"mr-2"},"+",-1),g(" Add New Invoice ")])),_:1,__:[17]})]),_:1},8,["href"])):u("",!0)])]),r(w,null,{default:o(()=>[r(b,null,{default:o(()=>[s(l).props.invoices.data.length===0?(i(),p("div",be,[m.value&&m.value.trim().length||c.value&&c.value.trim().length||f.value&&f.value.trim().length?(i(),p("div",ke,[t[20]||(t[20]=e("div",{class:"text-xl font-semibold mb-2"},"No results found",-1)),t[21]||(t[21]=e("p",{class:"text-sm text-gray-600 mb-6"}," We couldn't find any invoices matching your search/filter. ",-1)),e("div",Ce,[r(s(v),{variant:"outline",onClick:t[3]||(t[3]=a=>{m.value="",c.value="",f.value=""})},{default:o(()=>t[18]||(t[18]=[g("Clear search")])),_:1,__:[18]}),s(S)?(i(),y(s(h),{key:0,href:n.route("invoices.create")},{default:o(()=>[r(s(v),{variant:"default"},{default:o(()=>t[19]||(t[19]=[e("span",{class:"mr-2"},"+",-1),g(" Create Invoice ")])),_:1,__:[19]})]),_:1},8,["href"])):u("",!0)])])):(i(),p("div",Se,[t[23]||(t[23]=e("div",{class:"text-xl font-semibold mb-2"},"No invoices yet",-1)),s(S)?(i(),p("p",Pe,"Create your first invoice to get started.")):u("",!0),s(S)?(i(),y(s(h),{key:1,href:n.route("invoices.create")},{default:o(()=>[r(s(v),{variant:"default"},{default:o(()=>t[22]||(t[22]=[e("span",{class:"mr-2"},"+",-1),g(" Create Invoice ")])),_:1,__:[22]})]),_:1},8,["href"])):u("",!0)]))])):(i(),p("div",je,[e("table",Be,[t[28]||(t[28]=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 text-left"},"Reference #"),e("th",{class:"px-4 py-2 text-left"},"Customer"),e("th",{class:"px-4 py-2 text-left"},"Total"),e("th",{class:"px-4 py-2 text-left"},"Status"),e("th",{class:"px-4 py-2 text-left"},"Payment Status"),e("th",{class:"px-4 py-2 text-left"},"Payment Method"),e("th",{class:"px-4 py-2 text-left"},"Date"),e("th",{class:"px-4 py-2 text-left"},"Actions")])],-1)),e("tbody",null,[(i(!0),p(oe,null,ae(s(l).props.invoices.data,a=>(i(),p("tr",{key:a.id,class:"hover:bg-muted"},[e("td",Ie,[r(s(h),{href:n.route("invoices.show",a.id),class:"underline underline-offset-4"},{default:o(()=>[g(d(a.reference_number),1)]),_:2},1032,["href"])]),e("td",Ve,[e("div",null,[e("div",Te,d(a.customer.name),1),a.customer.company_name?(i(),p("div",ze,d(a.customer.company_name),1)):u("",!0)])]),e("td",Me,d(N(a.total_amount)),1),e("td",$e,[e("span",{class:M(["px-2 py-1 rounded-full text-xs font-medium",G(a.status)])},d(a.status.charAt(0).toUpperCase()+a.status.slice(1)),3)]),e("td",Ae,[e("span",{class:M(["px-2 py-1 rounded-full text-xs font-medium",q(a.payment_status)])},d(a.payment_status==="paid"?"Paid":"Pending Payment"),3)]),e("td",De,[e("span",Ne,d(a.payment_method.replace("_"," ").replace(/\b\w/g,T=>T.toUpperCase())),1)]),e("td",Fe,d(J(a.created_at)),1),e("td",Ue,[e("div",Ee,[r(s(h),{href:n.route("invoices.show",a.id)},{default:o(()=>[r(s(v),{variant:"ghost",size:"sm"},{default:o(()=>[r(P,{name:"eye",class:"h-4 w-4"}),t[24]||(t[24]=e("span",{class:"ml-1"},"View",-1))]),_:1,__:[24]})]),_:2},1032,["href"]),s(A)?(i(),y(s(h),{key:0,href:n.route("invoices.edit",a.id)},{default:o(()=>[r(s(v),{variant:"ghost",size:"sm"},{default:o(()=>[r(P,{name:"edit",class:"h-4 w-4"}),t[25]||(t[25]=e("span",{class:"ml-1"},"Edit",-1))]),_:1,__:[25]})]),_:2},1032,["href"])):u("",!0),s(A)&&a.payment_status==="pending"?(i(),y(s(v),{key:1,variant:"ghost",size:"sm",onClick:T=>Y(a.id)},{default:o(()=>[r(P,{name:"check",class:"h-4 w-4"}),t[26]||(t[26]=e("span",{class:"ml-1"},"Mark as Paid",-1))]),_:2,__:[26]},1032,["onClick"])):u("",!0),s(H)?(i(),y(s(v),{key:2,variant:"ghost",size:"sm",onClick:T=>O(a.id)},{default:o(()=>[r(P,{name:"trash",class:"h-4 w-4"}),t[27]||(t[27]=e("span",{class:"ml-1"},"Delete",-1))]),_:2,__:[27]},1032,["onClick"])):u("",!0)])])]))),128))])]),s(l).props.invoices.last_page>1?(i(),p("div",He,[e("div",Re," Showing "+d(s(l).props.invoices.from)+" to "+d(s(l).props.invoices.to)+" of "+d(s(l).props.invoices.total)+" results ",1),e("div",Le,[s(l).props.invoices.prev_page_url?(i(),y(s(v),{key:0,variant:"outline",size:"sm",onClick:t[4]||(t[4]=a=>D(s(l).props.invoices.current_page-1))},{default:o(()=>t[29]||(t[29]=[g(" Previous ")])),_:1,__:[29]})):u("",!0),s(l).props.invoices.next_page_url?(i(),y(s(v),{key:1,variant:"outline",size:"sm",onClick:t[5]||(t[5]=a=>D(s(l).props.invoices.current_page+1))},{default:o(()=>t[30]||(t[30]=[g(" Next ")])),_:1,__:[30]})):u("",!0)])])):u("",!0)]))]),_:1})]),_:1}),e("div",We,[e("button",{onClick:t[6]||(t[6]=a=>k.value=!k.value),class:M(["h-12 w-12 rounded-full shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center",k.value?"bg-red-500 hover:bg-red-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"])},[k.value?(i(),p("svg",Ye,t[32]||(t[32]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)]))):(i(),p("svg",Oe,t[31]||(t[31]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},null,-1)])))],2)])]),_:1}))}});export{Ft as default};
