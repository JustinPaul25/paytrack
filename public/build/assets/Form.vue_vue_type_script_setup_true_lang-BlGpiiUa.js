import{d as j,D as q,f as N,o as w,b as o,a as n,w as s,e as i,u as l,x as E,y as F,h as O,k as T,t as L,E as A}from"./app-Brdzsmmd.js";import{_ as m}from"./InputError.vue_vue_type_script_setup_true_lang-BntfVB2k.js";import{_ as d}from"./Label.vue_vue_type_script_setup_true_lang-BDfRCgV_.js";import{_ as u}from"./Input.vue_vue_type_script_setup_true_lang-B9XSH01p.js";import{_ as D}from"./PhoneInput.vue_vue_type_script_setup_true_lang-CUObcAOw.js";import{_ as J}from"./Select.vue_vue_type_script_setup_true_lang-D-l-_HIa.js";import{_ as R}from"./index-qS1kyX4C.js";import z from"./LocationInput-6HXZ1apc.js";import{S as p}from"./sweetalert2.esm.all-BQIkj5Wb.js";const G={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},H={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},K={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Q={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},W={key:0,class:"mt-2"},Y=["src"],Z={class:"flex gap-2 justify-end"},me=j({__name:"Form",props:{branch:Object,branchImageUrl:String},setup(f){var c,_,b,V,v,h,x,y,X,U,B,S,C;const t=f,$=[{value:"",label:"Select Status"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"maintenance",label:"Maintenance"}],k=()=>{var g;if((g=t.branch)!=null&&g.location){const e=t.branch.location;if(typeof e=="string")try{return JSON.parse(e)}catch{return{lat:0,lng:0}}else if(typeof e=="object"&&e!==null){const r=parseFloat(e.lat),I=parseFloat(e.lng);if(!isNaN(r)&&!isNaN(I))return{lat:r,lng:I}}}return{lat:0,lng:0}},a=q({name:((c=t.branch)==null?void 0:c.name)||"",code:((_=t.branch)==null?void 0:_.code)||"",address:((b=t.branch)==null?void 0:b.address)||"",phone:((V=t.branch)==null?void 0:V.phone)||"",email:((v=t.branch)==null?void 0:v.email)||"",description:((h=t.branch)==null?void 0:h.description)||"",status:((x=t.branch)==null?void 0:x.status)||"active",manager_name:((y=t.branch)==null?void 0:y.manager_name)||"",manager_phone:((X=t.branch)==null?void 0:X.manager_phone)||"",manager_email:((U=t.branch)==null?void 0:U.manager_email)||"",opening_time:((B=t.branch)==null?void 0:B.opening_time)||"",closing_time:((S=t.branch)==null?void 0:S.closing_time)||"",branch_image:null,branchId:((C=t.branch)==null?void 0:C.id)||null,location:k()});function M(g){const e=g.target;e.files&&e.files.length>0?a.branch_image=e.files[0]:a.branch_image=null}function P(){a.branchId?a.post(route("branches.update",a.branchId),{forceFormData:!0,onSuccess:()=>{a.reset("branch_image"),p.fire({title:"Success!",text:"Branch updated successfully.",icon:"success",confirmButtonColor:"#8f5be8"})},onError:()=>{p.fire({title:"Error!",text:"Failed to update branch. Please check the form and try again.",icon:"error",confirmButtonColor:"#8f5be8"})}}):a.post(route("branches.store"),{forceFormData:!0,onSuccess:()=>{a.reset("branch_image"),p.fire({title:"Success!",text:"Branch created successfully.",icon:"success",confirmButtonColor:"#8f5be8"})},onError:()=>{p.fire({title:"Error!",text:"Failed to create branch. Please check the form and try again.",icon:"error",confirmButtonColor:"#8f5be8"})}})}return(g,e)=>(w(),N("form",{onSubmit:A(P,["prevent"]),class:"space-y-6",enctype:"multipart/form-data"},[o("div",G,[o("div",null,[n(d,{for:"name"},{default:s(()=>e[13]||(e[13]=[i("Branch Name *")])),_:1,__:[13]}),n(u,{id:"name",modelValue:l(a).name,"onUpdate:modelValue":e[0]||(e[0]=r=>l(a).name=r),required:""},null,8,["modelValue"]),n(m,{message:l(a).errors.name},null,8,["message"])]),o("div",null,[n(d,{for:"code"},{default:s(()=>e[14]||(e[14]=[i("Branch Code *")])),_:1,__:[14]}),n(u,{id:"code",modelValue:l(a).code,"onUpdate:modelValue":e[1]||(e[1]=r=>l(a).code=r),placeholder:"e.g., BR001",required:""},null,8,["modelValue"]),n(m,{message:l(a).errors.code},null,8,["message"])])]),o("div",null,[n(d,{for:"address"},{default:s(()=>e[15]||(e[15]=[i("Address *")])),_:1,__:[15]}),E(o("textarea",{id:"address","onUpdate:modelValue":e[2]||(e[2]=r=>l(a).address=r),class:"w-full rounded border px-3 py-2 mt-1",rows:"3",required:""},null,512),[[F,l(a).address]]),n(m,{message:l(a).errors.address},null,8,["message"])]),o("div",H,[o("div",null,[n(d,{for:"phone"},{default:s(()=>e[16]||(e[16]=[i("Phone")])),_:1,__:[16]}),n(D,{id:"phone",modelValue:l(a).phone,"onUpdate:modelValue":e[3]||(e[3]=r=>l(a).phone=r),placeholder:"XXXXXXXXXX"},null,8,["modelValue"]),e[17]||(e[17]=o("p",{class:"text-xs text-muted-foreground mt-1"},"Enter 10-digit Philippine mobile number.",-1)),n(m,{message:l(a).errors.phone},null,8,["message"])]),o("div",null,[n(d,{for:"email"},{default:s(()=>e[18]||(e[18]=[i("Email")])),_:1,__:[18]}),n(u,{id:"email",modelValue:l(a).email,"onUpdate:modelValue":e[4]||(e[4]=r=>l(a).email=r),type:"email"},null,8,["modelValue"]),n(m,{message:l(a).errors.email},null,8,["message"])])]),o("div",null,[n(d,{for:"description"},{default:s(()=>e[19]||(e[19]=[i("Description")])),_:1,__:[19]}),E(o("textarea",{id:"description","onUpdate:modelValue":e[5]||(e[5]=r=>l(a).description=r),class:"w-full rounded border px-3 py-2 mt-1",rows:"3"},null,512),[[F,l(a).description]]),n(m,{message:l(a).errors.description},null,8,["message"])]),o("div",null,[n(d,{for:"status"},{default:s(()=>e[20]||(e[20]=[i("Status *")])),_:1,__:[20]}),n(J,{modelValue:l(a).status,"onUpdate:modelValue":e[6]||(e[6]=r=>l(a).status=r),options:$,required:""},null,8,["modelValue"]),n(m,{message:l(a).errors.status},null,8,["message"])]),o("div",K,[o("div",null,[n(d,{for:"opening_time"},{default:s(()=>e[21]||(e[21]=[i("Opening Time")])),_:1,__:[21]}),n(u,{id:"opening_time",modelValue:l(a).opening_time,"onUpdate:modelValue":e[7]||(e[7]=r=>l(a).opening_time=r),type:"time"},null,8,["modelValue"]),n(m,{message:l(a).errors.opening_time},null,8,["message"])]),o("div",null,[n(d,{for:"closing_time"},{default:s(()=>e[22]||(e[22]=[i("Closing Time")])),_:1,__:[22]}),n(u,{id:"closing_time",modelValue:l(a).closing_time,"onUpdate:modelValue":e[8]||(e[8]=r=>l(a).closing_time=r),type:"time"},null,8,["modelValue"]),n(m,{message:l(a).errors.closing_time},null,8,["message"])])]),o("div",Q,[o("div",null,[n(d,{for:"manager_name"},{default:s(()=>e[23]||(e[23]=[i("Manager Name")])),_:1,__:[23]}),n(u,{id:"manager_name",modelValue:l(a).manager_name,"onUpdate:modelValue":e[9]||(e[9]=r=>l(a).manager_name=r)},null,8,["modelValue"]),n(m,{message:l(a).errors.manager_name},null,8,["message"])]),o("div",null,[n(d,{for:"manager_phone"},{default:s(()=>e[24]||(e[24]=[i("Manager Phone")])),_:1,__:[24]}),n(D,{id:"manager_phone",modelValue:l(a).manager_phone,"onUpdate:modelValue":e[10]||(e[10]=r=>l(a).manager_phone=r),placeholder:"XXXXXXXXXX"},null,8,["modelValue"]),e[25]||(e[25]=o("p",{class:"text-xs text-muted-foreground mt-1"},"Enter 10-digit Philippine mobile number.",-1)),n(m,{message:l(a).errors.manager_phone},null,8,["message"])]),o("div",null,[n(d,{for:"manager_email"},{default:s(()=>e[26]||(e[26]=[i("Manager Email")])),_:1,__:[26]}),n(u,{id:"manager_email",modelValue:l(a).manager_email,"onUpdate:modelValue":e[11]||(e[11]=r=>l(a).manager_email=r),type:"email"},null,8,["modelValue"]),n(m,{message:l(a).errors.manager_email},null,8,["message"])])]),o("div",null,[n(d,{for:"location"},{default:s(()=>e[27]||(e[27]=[i("Location")])),_:1,__:[27]}),n(z,{modelValue:l(a).location,"onUpdate:modelValue":e[12]||(e[12]=r=>l(a).location=r)},null,8,["modelValue"]),n(m,{message:l(a).errors.location},null,8,["message"])]),o("div",null,[n(d,{for:"branch_image"},{default:s(()=>e[28]||(e[28]=[i("Branch Image")])),_:1,__:[28]}),n(u,{id:"branch_image",type:"file",accept:"image/*",onChange:M}),n(m,{message:l(a).errors.branch_image},null,8,["message"]),f.branchImageUrl?(w(),N("div",W,[o("img",{src:f.branchImageUrl,alt:"Branch Image",class:"w-24 h-24 object-cover rounded"},null,8,Y)])):O("",!0)]),o("div",Z,[n(l(R),{type:"submit",variant:"default"},{default:s(()=>[i(L(l(a).branchId?"Update Branch":"Create Branch"),1)]),_:1}),T(g.$slots,"footer")])],32))}});export{me as _};
