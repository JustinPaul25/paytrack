import{d as G,v as O,m as C,I as q,s as A,W as h,c as v,o as n,w as o,a as l,b as e,u as s,g as J,T as K,x as M,t as d,G as Q,y as X,h as u,S as g,e as x,f as p,F as Z,r as ee,l as N}from"./app-1A5YSak6.js";import{_ as m}from"./index-BWU88cBJ.js";import{_ as te}from"./Select.vue_vue_type_script_setup_true_lang-CbSJUwQ_.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_0fe2f881_lang-BHJz_n_j.js";import{_ as se}from"./AppLayout.vue_vue_type_script_setup_true_lang-BCVanqXE.js";import{_,a as w}from"./CardContent.vue_vue_type_script_setup_true_lang-DYhZIIS0.js";import{_ as S}from"./Icon.vue_vue_type_script_setup_true_lang-flTDBxmC.js";import{S as V}from"./sweetalert2.esm.all-BQIkj5Wb.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CY5h4SiE.js";import"./createLucideIcon-BqpLk_z0.js";import"./useForwardPropsEmits-DLwOjtLV.js";import"./Teleport-BHg1vLCi.js";import"./RovingFocusGroup-hZDTo2Q6.js";import"./VisuallyHidden-B3oxVUhX.js";import"./x-CQ3Uca_e.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-D1Pjj9RT.js";import"./square-pen-BS6Xnm9n.js";import"./calendar-qv685zaw.js";import"./check-DMn0FHCi.js";import"./chevron-left-Bc645Og1.js";import"./circle-alert-CROhcxf1.js";import"./piggy-bank-ZuqNsUAH.js";import"./circle-check-big-lY0QRHxl.js";import"./message-square-CHDbq2Eg.js";import"./trophy-E-tjK3Tz.js";import"./plus-BCG3_SPN.js";import"./clock-B4iQhvPa.js";import"./dollar-sign-B75RIFQf.js";import"./eye-off-CRisQl_z.js";import"./eye-DK1-wXw8.js";import"./loader-circle-DtUinoa7.js";import"./map-pin-yBrkEEER.js";import"./sun-DdHjRAgS.js";import"./printer-DkbOmKbZ.js";import"./search-DcUo4BKy.js";import"./shopping-bag-0tl0XeKA.js";import"./trash-2-CgBDqNSu.js";import"./trending-up-dp-sioP1.js";import"./user-cog-C-sRS4Kg.js";const oe={class:"grid grid-cols-1 lg:grid-cols-4 gap-6 mt-8 mb-6"},re={class:"flex items-center justify-between"},le={class:"text-xl font-bold text-blue-600"},ae={class:"flex items-center justify-between"},ie={class:"text-xl font-bold text-green-600"},ne={class:"flex items-center justify-between"},de={class:"text-xl font-bold text-yellow-600"},ue={class:"flex items-center justify-between"},pe={class:"text-xl font-bold text-emerald-600"},me={class:"flex items-center justify-between mt-4 mb-2"},ce={class:"flex gap-2 items-center"},fe={class:"w-48"},ve={class:"flex items-center gap-2"},xe={key:0},ge={key:0,class:"py-12 text-center"},ye={class:"flex items-center justify-center gap-2"},he={key:1,class:"py-12 text-center"},_e={key:0,class:"text-sm text-gray-600 mb-6"},we={key:1},be={class:"min-w-full divide-y divide-border"},ke={class:"px-4 py-2 font-medium"},Ce={class:"px-4 py-2"},Se={class:"font-medium"},je={key:0,class:"text-sm text-gray-500"},Ie={class:"px-4 py-2 font-medium"},Be={class:"px-4 py-2"},Te={class:"px-4 py-2"},Ve={class:"px-4 py-2 text-sm text-gray-500"},ze={class:"px-4 py-2"},$e={class:"flex gap-2"},De={key:0,class:"flex items-center justify-between mt-6"},Pe={class:"text-sm text-gray-700"},Ae={class:"flex gap-2"},Me={class:"fixed bottom-6 right-6 z-50"},Ne={key:0,class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Fe={key:1,class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},St=G({__name:"Index",setup(Ee){var P;const a=O(),j=Array.isArray((P=a.props.auth)==null?void 0:P.userRoles)?a.props.auth.userRoles:[];j.includes("Customer");const I=j.includes("Admin"),B=j.includes("Staff"),b=B&&!I,z=B&&!I,F=B&&!I,k=C(a.props.filters?a.props.filters:{}),c=C(typeof k.value.search=="string"?k.value.search:""),f=C(typeof k.value.status=="string"?k.value.status:""),y=C(!1),E=[{title:"Invoices",href:"/invoices"}];q(()=>{c.value=a.props.filters&&typeof a.props.filters.search=="string"?a.props.filters.search:"",f.value=a.props.filters&&typeof a.props.filters.status=="string"?a.props.filters.status:""});const H=[{value:"",label:"All Statuses"},{value:"draft",label:"Draft"},{value:"pending",label:"Pending"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}];let T=null;A(c,i=>{T&&clearTimeout(T),T=setTimeout(()=>{h.get("/invoices",{search:i||void 0,status:f.value||void 0},{preserveState:!0,replace:!0})},400)}),A(f,i=>{h.get("/invoices",{search:c.value||void 0,status:i||void 0},{preserveState:!0,replace:!0})});function $(i){h.get("/invoices",{search:c.value||void 0,status:f.value||void 0,page:i},{preserveState:!0,replace:!0})}async function R(i){(await V.fire({title:"Delete this invoice?",text:"This will remove the invoice permanently. You canâ€™t undo this.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#8f5be8",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it"})).isConfirmed&&h.delete(`/invoices/${i}`,{onSuccess:()=>{V.fire("Deleted","The invoice was deleted.","success")}})}function U(i){h.post(route("invoices.markPaid",i),{},{preserveScroll:!0,onSuccess:()=>{V.fire({toast:!0,position:"top-end",icon:"success",title:"Invoice marked as paid",showConfirmButton:!1,timer:2e3})}})}function L(i){switch(i){case"draft":return"bg-gray-100 text-gray-800";case"pending":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}function D(i){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(i)}function W(i){return new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"2-digit"})}return(i,t)=>(n(),v(se,{breadcrumbs:E},{default:o(()=>[l(s(J),{title:"Invoices"}),l(K,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 transform -translate-y-4","enter-to-class":"opacity-100 transform translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 transform translate-y-0","leave-to-class":"opacity-0 transform -translate-y-4"},{default:o(()=>[M(e("div",oe,[l(_,{class:"relative overflow-hidden"},{default:o(()=>[l(w,{class:"p-6"},{default:o(()=>[e("div",re,[e("div",null,[t[6]||(t[6]=e("p",{class:"text-sm font-medium text-muted-foreground"},"Total Invoices",-1)),e("p",le,d(s(a).props.stats.totalInvoices),1)]),t[7]||(t[7]=e("div",{class:"h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1))])]),_:1})]),_:1}),l(_,{class:"relative overflow-hidden"},{default:o(()=>[l(w,{class:"p-6"},{default:o(()=>[e("div",ae,[e("div",null,[t[8]||(t[8]=e("p",{class:"text-sm font-medium text-muted-foreground"},"Total Amount",-1)),e("p",ie,d(D(s(a).props.stats.totalAmount)),1)]),t[9]||(t[9]=e("div",{class:"h-12 w-12 rounded-full bg-green-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1))])]),_:1})]),_:1}),l(_,{class:"relative overflow-hidden"},{default:o(()=>[l(w,{class:"p-6"},{default:o(()=>[e("div",ne,[e("div",null,[t[10]||(t[10]=e("p",{class:"text-sm font-medium text-muted-foreground"},"Pending",-1)),e("p",de,d(s(a).props.stats.pendingInvoices),1)]),t[11]||(t[11]=e("div",{class:"h-12 w-12 rounded-full bg-yellow-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])]),_:1})]),_:1}),l(_,{class:"relative overflow-hidden"},{default:o(()=>[l(w,{class:"p-6"},{default:o(()=>[e("div",ue,[e("div",null,[t[12]||(t[12]=e("p",{class:"text-sm font-medium text-muted-foreground"},"Paid",-1)),e("p",pe,d(s(a).props.stats.paidInvoices),1)]),t[13]||(t[13]=e("div",{class:"h-12 w-12 rounded-full bg-emerald-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])]),_:1})]),_:1})],512),[[Q,y.value]])]),_:1}),e("div",me,[e("div",ce,[M(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>c.value=r),type:"text",placeholder:"Search by customer name",class:"rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[X,c.value]]),e("div",fe,[l(s(te),{modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=r=>f.value=r),options:H,placeholder:"Filter by status"},null,8,["modelValue"])])]),e("div",ve,[s(b)?(n(),v(s(g),{key:0,href:i.route("invoices.create")},{default:o(()=>[l(s(m),{variant:"default"},{default:o(()=>t[14]||(t[14]=[e("span",{class:"mr-2"},"+",-1),x(" Add New Invoice ")])),_:1,__:[14]})]),_:1},8,["href"])):u("",!0)])]),l(_,null,{default:o(()=>[l(w,null,{default:o(()=>[s(a).props.invoices.data.length===0?(n(),p("div",xe,[c.value&&c.value.trim().length||f.value&&f.value.trim().length?(n(),p("div",ge,[t[17]||(t[17]=e("div",{class:"text-xl font-semibold mb-2"},"No results found",-1)),t[18]||(t[18]=e("p",{class:"text-sm text-gray-600 mb-6"}," We couldn't find any invoices matching your search/filter. ",-1)),e("div",ye,[l(s(m),{variant:"outline",onClick:t[2]||(t[2]=r=>{c.value="",f.value=""})},{default:o(()=>t[15]||(t[15]=[x("Clear search")])),_:1,__:[15]}),s(b)?(n(),v(s(g),{key:0,href:i.route("invoices.create")},{default:o(()=>[l(s(m),{variant:"default"},{default:o(()=>t[16]||(t[16]=[e("span",{class:"mr-2"},"+",-1),x(" Create Invoice ")])),_:1,__:[16]})]),_:1},8,["href"])):u("",!0)])])):(n(),p("div",he,[t[20]||(t[20]=e("div",{class:"text-xl font-semibold mb-2"},"No invoices yet",-1)),s(b)?(n(),p("p",_e,"Create your first invoice to get started.")):u("",!0),s(b)?(n(),v(s(g),{key:1,href:i.route("invoices.create")},{default:o(()=>[l(s(m),{variant:"default"},{default:o(()=>t[19]||(t[19]=[e("span",{class:"mr-2"},"+",-1),x(" Create Invoice ")])),_:1,__:[19]})]),_:1},8,["href"])):u("",!0)]))])):(n(),p("div",we,[e("table",be,[t[25]||(t[25]=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 text-left"},"Reference #"),e("th",{class:"px-4 py-2 text-left"},"Customer"),e("th",{class:"px-4 py-2 text-left"},"Total"),e("th",{class:"px-4 py-2 text-left"},"Status"),e("th",{class:"px-4 py-2 text-left"},"Payment"),e("th",{class:"px-4 py-2 text-left"},"Date"),e("th",{class:"px-4 py-2 text-left"},"Actions")])],-1)),e("tbody",null,[(n(!0),p(Z,null,ee(s(a).props.invoices.data,r=>(n(),p("tr",{key:r.id,class:"hover:bg-muted"},[e("td",ke,[l(s(g),{href:i.route("invoices.show",r.id),class:"underline underline-offset-4"},{default:o(()=>[x(d(r.reference_number),1)]),_:2},1032,["href"])]),e("td",Ce,[e("div",null,[e("div",Se,d(r.customer.name),1),r.customer.company_name?(n(),p("div",je,d(r.customer.company_name),1)):u("",!0)])]),e("td",Ie,d(D(r.total_amount)),1),e("td",Be,[e("span",{class:N(["px-2 py-1 rounded-full text-xs font-medium",L(r.status)])},d(r.status.charAt(0).toUpperCase()+r.status.slice(1)),3)]),e("td",Te,d(r.payment_method.replace("_"," ")),1),e("td",Ve,d(W(r.created_at)),1),e("td",ze,[e("div",$e,[l(s(g),{href:i.route("invoices.show",r.id)},{default:o(()=>[l(s(m),{variant:"ghost",size:"sm"},{default:o(()=>[l(S,{name:"eye",class:"h-4 w-4"}),t[21]||(t[21]=e("span",{class:"ml-1"},"View",-1))]),_:1,__:[21]})]),_:2},1032,["href"]),s(z)?(n(),v(s(g),{key:0,href:i.route("invoices.edit",r.id)},{default:o(()=>[l(s(m),{variant:"ghost",size:"sm"},{default:o(()=>[l(S,{name:"edit",class:"h-4 w-4"}),t[22]||(t[22]=e("span",{class:"ml-1"},"Edit",-1))]),_:1,__:[22]})]),_:2},1032,["href"])):u("",!0),s(z)&&r.status==="pending"?(n(),v(s(m),{key:1,variant:"ghost",size:"sm",onClick:Y=>U(r.id)},{default:o(()=>[l(S,{name:"check",class:"h-4 w-4"}),t[23]||(t[23]=e("span",{class:"ml-1"},"Mark as Paid",-1))]),_:2,__:[23]},1032,["onClick"])):u("",!0),s(F)?(n(),v(s(m),{key:2,variant:"ghost",size:"sm",onClick:Y=>R(r.id)},{default:o(()=>[l(S,{name:"trash",class:"h-4 w-4"}),t[24]||(t[24]=e("span",{class:"ml-1"},"Delete",-1))]),_:2,__:[24]},1032,["onClick"])):u("",!0)])])]))),128))])]),s(a).props.invoices.last_page>1?(n(),p("div",De,[e("div",Pe," Showing "+d(s(a).props.invoices.from)+" to "+d(s(a).props.invoices.to)+" of "+d(s(a).props.invoices.total)+" results ",1),e("div",Ae,[s(a).props.invoices.prev_page_url?(n(),v(s(m),{key:0,variant:"outline",size:"sm",onClick:t[3]||(t[3]=r=>$(s(a).props.invoices.current_page-1))},{default:o(()=>t[26]||(t[26]=[x(" Previous ")])),_:1,__:[26]})):u("",!0),s(a).props.invoices.next_page_url?(n(),v(s(m),{key:1,variant:"outline",size:"sm",onClick:t[4]||(t[4]=r=>$(s(a).props.invoices.current_page+1))},{default:o(()=>t[27]||(t[27]=[x(" Next ")])),_:1,__:[27]})):u("",!0)])])):u("",!0)]))]),_:1})]),_:1}),e("div",Me,[e("button",{onClick:t[5]||(t[5]=r=>y.value=!y.value),class:N(["h-12 w-12 rounded-full shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center",y.value?"bg-red-500 hover:bg-red-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"])},[y.value?(n(),p("svg",Fe,t[29]||(t[29]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)]))):(n(),p("svg",Ne,t[28]||(t[28]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},null,-1)])))],2)])]),_:1}))}});export{St as default};
