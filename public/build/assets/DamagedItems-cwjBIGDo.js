import{d as G,v as J,m as W,c as m,o as n,w as l,a as d,b as t,f as c,e as u,u as o,g as K,t as a,n as C,h as p,F as T,r as z,S as $,H as O,W as h}from"./app-qA0CnBWe.js";import{n as U,_ as X}from"./AppLayout.vue_vue_type_script_setup_true_lang-BLollNnU.js";import{_ as q,a as R}from"./CardContent.vue_vue_type_script_setup_true_lang-DFxNC8fq.js";import{_ as A,a as I}from"./CardTitle.vue_vue_type_script_setup_true_lang-PsohhGio.js";import{_}from"./index-DKsLgjKN.js";import{S}from"./sweetalert2.esm.all-BQIkj5Wb.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_85568d9b_lang-C02RUasq.js";import"./useForwardPropsEmits-CwUzb49y.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CLRWpV5h.js";import"./Teleport-DIfWgdf9.js";import"./RovingFocusGroup-gU1KHB92.js";import"./VisuallyHidden-qt70HzaR.js";import"./DialogPortal-BX8gIO6T.js";import"./x-Da1o-ysX.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B1dhHsl6.js";import"./chevron-down-CCBk2xD7.js";import"./chevron-right-r24-WVSv.js";const Z={class:"flex items-center justify-between my-6"},ee={class:"flex items-center gap-3"},te={class:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6"},se={class:"text-2xl font-bold mt-1"},oe={class:"text-2xl font-bold mt-1"},ae={class:"text-2xl font-bold mt-1 text-orange-600"},le={class:"text-2xl font-bold mt-1 text-red-600"},ne={class:"text-2xl font-bold mt-1"},ie={class:"border-b border-gray-200 mb-6"},re={class:"-mb-px flex space-x-8"},de={class:"flex items-center justify-between"},ue=["value"],pe={key:0,class:"py-8 text-center text-sm text-gray-500"},fe={key:1},ce={class:"min-w-full divide-y divide-border"},me={class:"px-4 py-2 font-medium"},xe={class:"px-4 py-2"},_e={key:1},ve={class:"px-4 py-2"},ge={class:"flex items-center gap-2"},ye={class:"px-4 py-2"},be={class:"px-4 py-2 font-medium"},he={class:"px-4 py-2"},ke={class:"px-4 py-2"},we={class:"flex gap-2"},Ce={key:0,class:"mt-4 flex items-center justify-between"},qe={class:"text-sm text-gray-500"},Re={class:"flex gap-2"},$e={class:"flex items-center justify-between"},De=["value"],Pe={key:0,class:"py-8 text-center text-sm text-gray-500"},Se={key:1},Be={class:"min-w-full divide-y divide-border"},Te={class:"px-4 py-2 font-medium"},ze={class:"px-4 py-2"},Ae={class:"px-4 py-2"},Ie={key:1},Ne={class:"px-4 py-2"},je={class:"flex items-center gap-2"},Ve={class:"px-4 py-2"},We={class:"px-4 py-2"},Ee={class:"px-4 py-2"},Fe={class:"flex gap-2"},Le={key:0,class:"mt-4 flex items-center justify-between"},Me={class:"text-sm text-gray-500"},Qe={class:"flex gap-2"},He={key:0,class:"py-8 text-center text-sm text-gray-500"},Ye={key:1},Ge={class:"min-w-full divide-y divide-border"},Je={class:"px-4 py-2 text-sm"},Ke={class:"text-xs text-gray-500"},Oe={class:"px-4 py-2"},Ue={class:"font-medium"},Xe={class:"px-4 py-2"},Ze={key:1,class:"text-gray-400"},et={class:"px-4 py-2"},tt={key:1,class:"text-gray-400"},st={class:"px-4 py-2"},ot={class:"px-4 py-2"},at={class:"px-4 py-2 text-sm"},lt={class:"px-4 py-2 text-sm"},nt={class:"px-4 py-2 text-sm"},it=["title"],rt={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},dt={class:"p-6"},ut={class:"flex items-center justify-between mb-4"},pt={key:0,class:"space-y-4"},ft={class:"text-sm font-medium"},ct={class:"text-sm"},mt={key:0,class:"text-xs text-gray-500"},xt={key:1,class:"text-xs text-gray-500"},_t={key:0},vt={class:"text-sm"},gt={class:"text-sm"},yt={key:1},bt={class:"text-sm whitespace-pre-wrap"},ht={key:2},kt={class:"text-sm whitespace-pre-wrap bg-yellow-50 p-3 rounded-md border border-yellow-200"},wt={key:3},Ct={class:"text-sm whitespace-pre-wrap"},qt={key:4},Rt={class:"text-sm whitespace-pre-wrap"},$t={class:"mt-6 pt-4 border-t flex justify-end gap-2"},Yt=G({__name:"DamagedItems",setup(Dt){function N(r){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(r)}const D=J(),f=D.props.filters||{},P=D.props.stats||{},x=D.props.refunds||{data:[],current_page:1,last_page:1,total:0,from:0,to:0,prev_page_url:null,next_page_url:null},v=D.props.refundRequests||{data:[],current_page:1,last_page:1,total:0,from:0,to:0,prev_page_url:null,next_page_url:null},b=W("refunds"),i=W(null),B=D.props.stockMovements||[];route("refunds.damaged-items");function E(r){S.fire({title:"Mark as Processed",html:`
        <div style="text-align:left">
            <label style="display:block;margin-bottom:4px;font-size:12px">Method</label>
            <select id="method" class="swal2-input" style="width:100%">
                <option value="cash">cash</option>
                <option value="bank_transfer">bank_transfer</option>
                <option value="e-wallet">e-wallet</option>
                <option value="credit_note">credit_note</option>
            </select>
            <label style="display:block;margin:10px 0 4px;font-size:12px">Reference #</label>
            <input id="ref" class="swal2-input" placeholder="Reference number (optional)" />
            <label style="display:block;margin:10px 0 4px;font-size:12px">Notes</label>
            <textarea id="notes" class="swal2-textarea" placeholder="Notes (optional)"></textarea>
        </div>
        `,showCancelButton:!0,confirmButtonText:"Save",preConfirm:()=>{const e=document.getElementById("method").value,y=document.getElementById("ref").value,g=document.getElementById("notes").value;return{refund_method:e,reference_number:y||void 0,notes:g||void 0}}}).then(e=>{e.isConfirmed&&h.post(route("refunds.process",r),e.value,{preserveScroll:!0})})}function F(r){const e=x.data.find(g=>g.id===r),y=(e==null?void 0:e.is_damaged)??!1;S.fire({title:"Complete refund",html:`
        <div style="text-align:left">
            ${y?'<div style="background:#fef3c7;border:1px solid #fbbf24;padding:8px;border-radius:4px;margin-bottom:12px;font-size:13px;color:#92400e;"><strong>⚠️ Damaged Items:</strong> These items will not be returned to inventory stock.</div>':""}
            <label style="display:flex;align-items:center;gap:8px;">
                <input id="return" type="checkbox" ${y?"":"checked"} ${y?"disabled":""} />
                Return to stock
            </label>
            ${y?'<p style="font-size:11px;color:#6b7280;margin-top:4px;margin-left:24px;">Disabled for damaged items</p>':""}
            <label style="display:block;margin:10px 0 4px;font-size:12px">Inspection notes</label>
            <textarea id="notes" class="swal2-textarea" placeholder="Notes (optional)"></textarea>
        </div>
        `,showCancelButton:!0,confirmButtonText:"Complete",confirmButtonColor:"#10b981",preConfirm:()=>{const g=y?!1:document.getElementById("return").checked,s=document.getElementById("notes").value;return{return_to_stock:g,notes:s||void 0}}}).then(g=>{g.isConfirmed&&h.post(route("refunds.complete",r),g.value,{preserveScroll:!0})})}function L(r){S.fire({title:"Cancel this refund?",text:"This will mark the refund as cancelled. A short reason is required.",icon:"warning",showCancelButton:!0,confirmButtonText:"Cancel refund",confirmButtonColor:"#ef4444",input:"textarea",inputLabel:"Reason (required)",inputPlaceholder:"Provide a brief reason...",inputAttributes:{"aria-label":"Reason (required)"},inputValidator:e=>{if(!e||!e.trim())return"Please provide a brief reason."}}).then(e=>{e.isConfirmed&&h.post(route("refunds.cancel",r),{review_notes:e.value},{preserveScroll:!0})})}function M(r){S.fire({title:"Approve this refund request?",icon:"question",showCancelButton:!0,confirmButtonText:"Approve",confirmButtonColor:"#10b981",input:"textarea",inputLabel:"Approval notes (optional)",inputPlaceholder:"Notes for this approval...",inputAttributes:{"aria-label":"Approval notes (optional)"}}).then(e=>{e.isConfirmed&&h.post(route("refundRequests.approve",r),{review_notes:e.value||void 0},{preserveScroll:!0})})}function Q(r){S.fire({title:"Decline this refund request?",text:"This will mark the request as rejected. You can't undo this.",icon:"warning",showCancelButton:!0,confirmButtonText:"Decline",confirmButtonColor:"#ef4444",input:"textarea",inputLabel:"Reason (required)",inputPlaceholder:"Provide a reason for declining...",inputAttributes:{"aria-label":"Reason (required)"},inputValidator:e=>{if(!e||!e.trim())return"Please provide a brief reason."}}).then(e=>{e.isConfirmed&&h.post(route("refundRequests.reject",r),{review_notes:e.value},{preserveScroll:!0})})}function j(r){const e={refunds_page:r};f.status&&f.status!=="all"&&(e.status=f.status),f.request_status&&f.request_status!=="all"&&(e.request_status=f.request_status),h.get(route("refunds.damaged-items"),e,{preserveState:!0,replace:!0})}function V(r){const e={requests_page:r};f.status&&f.status!=="all"&&(e.status=f.status),f.request_status&&f.request_status!=="all"&&(e.request_status=f.request_status),h.get(route("refunds.damaged-items"),e,{preserveState:!0,replace:!0})}function H(r){const e={};r&&r!=="all"&&(e.status=r),f.request_status&&f.request_status!=="all"&&(e.request_status=f.request_status),h.get(route("refunds.damaged-items"),e,{preserveState:!0,replace:!0})}function Y(r){const e={};f.status&&f.status!=="all"&&(e.status=f.status),r&&r!=="all"&&(e.request_status=r),h.get(route("refunds.damaged-items"),e,{preserveState:!0,replace:!0})}return(r,e)=>(n(),m(X,null,{default:l(()=>{var y,g;return[d(o(K),{title:"Damaged Items"}),t("div",Z,[t("div",ee,[d(o(U),{class:"h-8 w-8 text-orange-500"}),e[12]||(e[12]=t("h1",{class:"text-2xl font-bold"},"Damaged Items",-1))])]),t("div",te,[d(q,null,{default:l(()=>[d(R,{class:"pt-6"},{default:l(()=>[e[13]||(e[13]=t("div",{class:"text-sm font-medium text-gray-500"},"Total Damaged Refunds",-1)),t("div",se,a(o(P).total_damaged_refunds||0),1)]),_:1,__:[13]})]),_:1}),d(q,null,{default:l(()=>[d(R,{class:"pt-6"},{default:l(()=>[e[14]||(e[14]=t("div",{class:"text-sm font-medium text-gray-500"},"Total Damaged Requests",-1)),t("div",oe,a(o(P).total_damaged_requests||0),1)]),_:1,__:[14]})]),_:1}),d(q,null,{default:l(()=>[d(R,{class:"pt-6"},{default:l(()=>[e[15]||(e[15]=t("div",{class:"text-sm font-medium text-gray-500"},"Pending Requests",-1)),t("div",ae,a(o(P).pending_requests||0),1)]),_:1,__:[15]})]),_:1}),d(q,null,{default:l(()=>[d(R,{class:"pt-6"},{default:l(()=>[e[16]||(e[16]=t("div",{class:"text-sm font-medium text-gray-500"},"Total Writeoffs",-1)),t("div",le,a(o(P).total_writeoffs||0),1)]),_:1,__:[16]})]),_:1}),d(q,null,{default:l(()=>[d(R,{class:"pt-6"},{default:l(()=>[e[17]||(e[17]=t("div",{class:"text-sm font-medium text-gray-500"},"Total Damaged Value",-1)),t("div",ne,a(N(o(P).total_damaged_value||0)),1)]),_:1,__:[17]})]),_:1})]),t("div",ie,[t("nav",re,[t("button",{onClick:e[0]||(e[0]=s=>b.value="refunds"),class:C(["py-4 px-1 border-b-2 font-medium text-sm",b.value==="refunds"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Refunds ("+a(o(x).total)+") ",3),t("button",{onClick:e[1]||(e[1]=s=>b.value="requests"),class:C(["py-4 px-1 border-b-2 font-medium text-sm",b.value==="requests"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Refund Requests ("+a(o(v).total)+") ",3),t("button",{onClick:e[2]||(e[2]=s=>b.value="disposition"),class:C(["py-4 px-1 border-b-2 font-medium text-sm",b.value==="disposition"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Where Products Went ("+a(o(B).length)+") ",3)])]),b.value==="refunds"?(n(),m(q,{key:0},{default:l(()=>[d(A,null,{default:l(()=>[t("div",de,[d(I,null,{default:l(()=>e[18]||(e[18]=[p("Damaged Refunds")])),_:1,__:[18]}),t("select",{class:"rounded-md border border-input bg-background px-3 py-2 text-sm",value:o(f).status||"all",onChange:e[3]||(e[3]=s=>H(s.target.value))},e[19]||(e[19]=[t("option",{value:"all"},"All Status",-1),t("option",{value:"approved"},"Approved",-1),t("option",{value:"processed"},"Processed",-1),t("option",{value:"completed"},"Completed",-1),t("option",{value:"cancelled"},"Cancelled",-1)]),40,ue)])]),_:1}),d(R,null,{default:l(()=>[o(x).data.length?(n(),u("div",fe,[t("table",ce,[e[24]||(e[24]=t("thead",null,[t("tr",null,[t("th",{class:"px-4 py-2 text-left"},"Refund #"),t("th",{class:"px-4 py-2 text-left"},"Invoice"),t("th",{class:"px-4 py-2 text-left"},"Product"),t("th",{class:"px-4 py-2 text-left"},"Qty"),t("th",{class:"px-4 py-2 text-left"},"Amount"),t("th",{class:"px-4 py-2 text-left"},"Status"),t("th",{class:"px-4 py-2 text-left"},"Actions")])],-1)),t("tbody",null,[(n(!0),u(T,null,z(o(x).data,s=>{var k;return n(),u("tr",{key:s.id,class:"hover:bg-muted"},[t("td",me,a(s.refund_number),1),t("td",xe,[s.invoice_id?(n(),m(o($),{key:0,href:r.route("invoices.show",s.invoice_id),class:"text-blue-500 underline"},{default:l(()=>[p(" #"+a(s.invoice_id),1)]),_:2},1032,["href"])):(n(),u("span",_e,"—"))]),t("td",ve,[t("div",ge,[t("span",null,a(((k=s.product)==null?void 0:k.name)||"—"),1),e[20]||(e[20]=t("span",{class:"px-2 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800"}," ⚠️ Damaged ",-1))])]),t("td",ye,a(s.quantity_refunded),1),t("td",be,a(N(s.refund_amount)),1),t("td",he,[t("span",{class:C(["px-2 py-1 rounded-full text-xs font-medium",{"bg-blue-100 text-blue-800":s.status==="approved","bg-yellow-100 text-yellow-800":s.status==="processed","bg-green-100 text-green-800":s.status==="completed","bg-red-100 text-red-800":s.status==="cancelled"}])},a(s.status),3)]),t("td",ke,[t("div",we,[s.status==="approved"||s.status==="processed"?(n(),m(o(_),{key:0,size:"sm",variant:"outline",onClick:w=>E(s.id)},{default:l(()=>e[21]||(e[21]=[p(" Process ")])),_:2,__:[21]},1032,["onClick"])):c("",!0),s.status==="approved"||s.status==="processed"?(n(),m(o(_),{key:1,size:"sm",variant:"default",onClick:w=>F(s.id)},{default:l(()=>e[22]||(e[22]=[p(" Complete ")])),_:2,__:[22]},1032,["onClick"])):c("",!0),s.status!=="completed"&&s.status!=="cancelled"?(n(),m(o(_),{key:2,size:"sm",variant:"destructive",onClick:w=>L(s.id)},{default:l(()=>e[23]||(e[23]=[p(" Cancel ")])),_:2,__:[23]},1032,["onClick"])):c("",!0)])])])}),128))])]),o(x).last_page>1?(n(),u("div",Ce,[t("div",qe," Showing "+a(o(x).from)+" to "+a(o(x).to)+" of "+a(o(x).total)+" results ",1),t("div",Re,[d(o(_),{variant:"outline",size:"sm",disabled:o(x).current_page===1,onClick:e[4]||(e[4]=s=>j(o(x).current_page-1))},{default:l(()=>e[25]||(e[25]=[p(" Previous ")])),_:1,__:[25]},8,["disabled"]),d(o(_),{variant:"outline",size:"sm",disabled:o(x).current_page===o(x).last_page,onClick:e[5]||(e[5]=s=>j(o(x).current_page+1))},{default:l(()=>e[26]||(e[26]=[p(" Next ")])),_:1,__:[26]},8,["disabled"])])])):c("",!0)])):(n(),u("div",pe," No damaged refunds found. "))]),_:1})]),_:1})):c("",!0),b.value==="requests"?(n(),m(q,{key:1},{default:l(()=>[d(A,null,{default:l(()=>[t("div",$e,[d(I,null,{default:l(()=>e[27]||(e[27]=[p("Damaged Refund Requests")])),_:1,__:[27]}),t("select",{class:"rounded-md border border-input bg-background px-3 py-2 text-sm",value:o(f).request_status||"all",onChange:e[6]||(e[6]=s=>Y(s.target.value))},e[28]||(e[28]=[t("option",{value:"all"},"All Status",-1),t("option",{value:"pending"},"Pending",-1),t("option",{value:"approved"},"Approved",-1),t("option",{value:"rejected"},"Rejected",-1),t("option",{value:"completed"},"Completed",-1)]),40,De)])]),_:1}),d(R,null,{default:l(()=>[o(v).data.length?(n(),u("div",Se,[t("table",Be,[e[33]||(e[33]=t("thead",null,[t("tr",null,[t("th",{class:"px-4 py-2 text-left"},"Tracking #"),t("th",{class:"px-4 py-2 text-left"},"Customer"),t("th",{class:"px-4 py-2 text-left"},"Invoice"),t("th",{class:"px-4 py-2 text-left"},"Product"),t("th",{class:"px-4 py-2 text-left"},"Qty"),t("th",{class:"px-4 py-2 text-left"},"Status"),t("th",{class:"px-4 py-2 text-left"},"Actions")])],-1)),t("tbody",null,[(n(!0),u(T,null,z(o(v).data,s=>{var k;return n(),u("tr",{key:s.id,class:"hover:bg-muted"},[t("td",Te,a(s.tracking_number),1),t("td",ze,a(s.customer_name),1),t("td",Ae,[s.invoice_id?(n(),m(o($),{key:0,href:r.route("invoices.show",s.invoice_id),class:"text-blue-500 underline"},{default:l(()=>[p(a(s.invoice_reference||`#${s.invoice_id}`),1)]),_:2},1032,["href"])):(n(),u("span",Ie,"—"))]),t("td",Ne,[t("div",je,[t("span",null,a(((k=s.product)==null?void 0:k.name)||s.product_name||"—"),1),e[29]||(e[29]=t("span",{class:"px-2 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800"}," ⚠️ Damaged ",-1))])]),t("td",Ve,a(s.quantity),1),t("td",We,[t("span",{class:C(["px-2 py-1 rounded-full text-xs font-medium",{"bg-yellow-100 text-yellow-800":s.status==="pending","bg-green-100 text-green-800":s.status==="approved","bg-red-100 text-red-800":s.status==="rejected","bg-blue-100 text-blue-800":s.status==="completed"}])},a(s.status),3)]),t("td",Ee,[t("div",Fe,[s.status==="pending"?(n(),m(o(_),{key:0,size:"sm",variant:"default",onClick:w=>M(s.id)},{default:l(()=>e[30]||(e[30]=[p(" Approve ")])),_:2,__:[30]},1032,["onClick"])):c("",!0),s.status==="pending"?(n(),m(o(_),{key:1,size:"sm",variant:"destructive",onClick:w=>Q(s.id)},{default:l(()=>e[31]||(e[31]=[p(" Reject ")])),_:2,__:[31]},1032,["onClick"])):c("",!0),d(o(_),{size:"sm",variant:"outline",onClick:w=>i.value=s},{default:l(()=>e[32]||(e[32]=[p(" View ")])),_:2,__:[32]},1032,["onClick"])])])])}),128))])]),o(v).last_page>1?(n(),u("div",Le,[t("div",Me," Showing "+a(o(v).from)+" to "+a(o(v).to)+" of "+a(o(v).total)+" results ",1),t("div",Qe,[d(o(_),{variant:"outline",size:"sm",disabled:o(v).current_page===1,onClick:e[7]||(e[7]=s=>V(o(v).current_page-1))},{default:l(()=>e[34]||(e[34]=[p(" Previous ")])),_:1,__:[34]},8,["disabled"]),d(o(_),{variant:"outline",size:"sm",disabled:o(v).current_page===o(v).last_page,onClick:e[8]||(e[8]=s=>V(o(v).current_page+1))},{default:l(()=>e[35]||(e[35]=[p(" Next ")])),_:1,__:[35]},8,["disabled"])])])):c("",!0)])):(n(),u("div",Pe," No damaged refund requests found. "))]),_:1})]),_:1})):c("",!0),b.value==="disposition"?(n(),m(q,{key:2},{default:l(()=>[d(A,null,{default:l(()=>[d(I,null,{default:l(()=>e[36]||(e[36]=[p("Where Damaged Products Went")])),_:1,__:[36]}),e[37]||(e[37]=t("p",{class:"text-sm text-gray-500 mt-1"},"Track the disposition of damaged items through stock movements",-1))]),_:1,__:[37]}),d(R,null,{default:l(()=>[o(B).length?(n(),u("div",Ye,[t("table",Ge,[e[38]||(e[38]=t("thead",null,[t("tr",null,[t("th",{class:"px-4 py-2 text-left"},"Date"),t("th",{class:"px-4 py-2 text-left"},"Product"),t("th",{class:"px-4 py-2 text-left"},"Refund #"),t("th",{class:"px-4 py-2 text-left"},"Invoice"),t("th",{class:"px-4 py-2 text-left"},"Type"),t("th",{class:"px-4 py-2 text-left"},"Quantity"),t("th",{class:"px-4 py-2 text-left"},"Stock Before"),t("th",{class:"px-4 py-2 text-left"},"Stock After"),t("th",{class:"px-4 py-2 text-left"},"Processed By"),t("th",{class:"px-4 py-2 text-left"},"Notes")])],-1)),t("tbody",null,[(n(!0),u(T,null,z(o(B),s=>{var k,w;return n(),u("tr",{key:s.id,class:"hover:bg-muted"},[t("td",Je,[p(a(new Date(s.created_at).toLocaleDateString())+" ",1),t("div",Ke,a(new Date(s.created_at).toLocaleTimeString()),1)]),t("td",Oe,[t("div",Ue,a(((k=s.product)==null?void 0:k.name)||"—"),1)]),t("td",Xe,[s.refund_id&&s.refund?(n(),m(o($),{key:0,href:r.route("refunds.index"),class:"text-blue-500 underline"},{default:l(()=>[p(a(s.refund.refund_number),1)]),_:2},1032,["href"])):(n(),u("span",Ze,"—"))]),t("td",et,[s.invoice_id&&s.invoice?(n(),m(o($),{key:0,href:r.route("invoices.show",s.invoice_id),class:"text-blue-500 underline"},{default:l(()=>[p(a(s.invoice.reference_number||`#${s.invoice_id}`),1)]),_:2},1032,["href"])):(n(),u("span",tt,"—"))]),t("td",st,[t("span",{class:C(["px-2 py-1 rounded-full text-xs font-medium",{"bg-red-100 text-red-800":s.type==="writeoff","bg-orange-100 text-orange-800":s.type==="refund","bg-blue-100 text-blue-800":s.type==="sale"}])},a(s.type==="writeoff"?"⚠️ Writeoff":s.type),3)]),t("td",ot,[t("span",{class:C(s.quantity<0?"text-red-600 font-medium":"text-green-600 font-medium")},a(s.quantity>0?"+":"")+a(s.quantity),3)]),t("td",at,a(s.quantity_before??"—"),1),t("td",lt,a(s.quantity_after??"—"),1),t("td",nt,a(((w=s.user)==null?void 0:w.name)||"—"),1),t("td",{class:"px-4 py-2 text-sm text-gray-600 max-w-xs truncate",title:s.notes},a(s.notes||"—"),9,it)])}),128))])])])):(n(),u("div",He," No stock movements found for damaged items. "))]),_:1})]),_:1})):c("",!0),i.value?(n(),u("div",{key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e[11]||(e[11]=O(s=>i.value=null,["self"]))},[t("div",rt,[t("div",dt,[t("div",ut,[e[40]||(e[40]=t("h3",{class:"text-lg font-semibold"},"Refund Request Details",-1)),d(o(_),{variant:"ghost",size:"sm",onClick:e[9]||(e[9]=s=>i.value=null)},{default:l(()=>e[39]||(e[39]=[p("×")])),_:1,__:[39]})]),i.value?(n(),u("div",pt,[t("div",null,[e[41]||(e[41]=t("div",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1"},"Tracking Number",-1)),t("div",ft,a(i.value.tracking_number),1)]),t("div",null,[e[42]||(e[42]=t("div",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1"},"Customer",-1)),t("div",ct,a(i.value.customer_name),1),i.value.email?(n(),u("div",mt,a(i.value.email),1)):c("",!0),i.value.phone?(n(),u("div",xt,a(i.value.phone),1)):c("",!0)]),i.value.invoice_id?(n(),u("div",_t,[e[43]||(e[43]=t("div",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1"},"Invoice",-1)),d(o($),{href:r.route("invoices.show",i.value.invoice_id),class:"text-sm text-blue-500 underline"},{default:l(()=>[p(a(i.value.invoice_reference||`#${i.value.invoice_id}`),1)]),_:1},8,["href"])])):c("",!0),t("div",null,[e[44]||(e[44]=t("div",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1"},"Product",-1)),t("div",vt,a(((y=i.value.product)==null?void 0:y.name)||i.value.product_name||"—"),1)]),t("div",null,[e[45]||(e[45]=t("div",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1"},"Quantity",-1)),t("div",gt,a(i.value.quantity),1)]),t("div",null,[e[46]||(e[46]=t("div",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1"},"Status",-1)),t("span",{class:C(["px-2 py-1 rounded-full text-xs font-medium",{"bg-yellow-100 text-yellow-800":i.value.status==="pending","bg-green-100 text-green-800":i.value.status==="approved","bg-red-100 text-red-800":i.value.status==="rejected","bg-blue-100 text-blue-800":i.value.status==="completed"}])},a(i.value.status),3)]),i.value.reason?(n(),u("div",yt,[e[47]||(e[47]=t("div",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1"},"Reason",-1)),t("div",bt,a(i.value.reason),1)])):c("",!0),i.value.damaged_items_terms?(n(),u("div",ht,[e[48]||(e[48]=t("div",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1"},"Damaged Items Terms",-1)),t("div",kt,a(i.value.damaged_items_terms),1)])):c("",!0),i.value.notes?(n(),u("div",wt,[e[49]||(e[49]=t("div",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1"},"Notes",-1)),t("div",Ct,a(i.value.notes),1)])):c("",!0),i.value.review_notes?(n(),u("div",qt,[e[50]||(e[50]=t("div",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1"},"Review Notes",-1)),t("div",Rt,a(i.value.review_notes),1)])):c("",!0)])):c("",!0),t("div",$t,[d(o(_),{variant:"outline",onClick:e[10]||(e[10]=s=>i.value=null)},{default:l(()=>e[51]||(e[51]=[p("Close")])),_:1,__:[51]}),(g=i.value)!=null&&g.invoice_id?(n(),m(o($),{key:0,href:r.route("invoices.show",i.value.invoice_id)},{default:l(()=>[d(o(_),{variant:"default"},{default:l(()=>e[52]||(e[52]=[p("View Invoice")])),_:1,__:[52]})]),_:1},8,["href"])):c("",!0)])])])])):c("",!0)]}),_:1}))}});export{Yt as default};
