import{d as U,D as R,s as _,p as v,c as N,o as b,w as n,a as r,b as o,u as i,g as O,E as M,h as d,e as c,f as w,x as f,y as g,S as L}from"./app-qILHOVOR.js";import{_ as $}from"./index-CwKxeFAr.js";import{_ as y}from"./Select.vue_vue_type_script_setup_true_lang-B-jKtaQi.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_0fdfc5f8_lang-qOUWYnwy.js";import{_ as q}from"./AppLayout.vue_vue_type_script_setup_true_lang-GpGFHloG.js";import{_ as V,a as E}from"./CardContent.vue_vue_type_script_setup_true_lang-Cli7n1dX.js";import{_ as A,a as j}from"./CardTitle.vue_vue_type_script_setup_true_lang-CKyCcVv4.js";import{_ as F}from"./CardFooter.vue_vue_type_script_setup_true_lang-CwnZ-eGF.js";import{_ as a}from"./Label.vue_vue_type_script_setup_true_lang-B8OWZdbV.js";import{_ as u}from"./InputError.vue_vue_type_script_setup_true_lang-B2TMFQPF.js";import{S as H}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{C as W}from"./calendar-Bp4SsuYv.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DhBISZBL.js";import"./createLucideIcon-BnHCfrxd.js";import"./useForwardPropsEmits-DOl1PTJP.js";import"./Teleport-C3FR6f0f.js";import"./RovingFocusGroup-DXnuhdVJ.js";import"./VisuallyHidden-CZgjK68G.js";import"./x-C0sfuU9f.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CKzHIYx1.js";const z={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},G={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},J={class:"relative"},K={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Q={key:1,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ye=U({__name:"Create",props:{customers:{},expenses:{}},setup(C){const p=C,S=[{title:"Reminders",href:"/reminders"},{title:"Create Reminder",href:"/reminders/create"}],D=[{value:"bill_payment",label:"Bill Payment"},{value:"customer_due",label:"Customer Due"},{value:"credit_term",label:"Credit Term"}],k=[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"}],t=R({type:"bill_payment",title:"",description:"",due_date:"",amount:"",currency:"USD",priority:"medium",customer_id:"",expense_id:""});_([()=>t.type,()=>t.expense_id],([l,e])=>{if(l==="bill_payment"&&e){const s=p.expenses.find(m=>m.id===Number(e));s&&(t.title=`Bill Payment: ${s.expense_type}`,t.amount=s.amount.toString(),t.description=`Monthly payment for ${s.expense_type}`)}else if(l==="customer_due"&&t.customer_id){const s=p.customers.find(m=>m.id===Number(t.customer_id));s&&(t.title=`Customer Payment Due: ${s.name}`)}else if(l==="credit_term"&&t.customer_id){const s=p.customers.find(m=>m.id===Number(t.customer_id));s&&(t.title=`Credit Term Payment Due: ${s.name}`)}}),_(()=>t.due_date,l=>{if(l){const e=new Date,m=new Date(l).getTime()-e.getTime(),x=Math.ceil(m/(1e3*60*60*24));x<=7?t.priority="high":x<=14?t.priority="medium":t.priority="low"}});const B=v(()=>p.customers.map(l=>({value:l.id.toString(),label:l.company_name?`${l.name} (${l.company_name})`:l.name}))),T=v(()=>p.expenses.map(l=>({value:l.id.toString(),label:`${l.expense_type} - $${l.amount.toFixed(2)} (${new Date(l.date).toLocaleDateString()})`})));function P(){t.post(route("reminders.store"),{preserveScroll:!0,onSuccess:()=>{H.fire({toast:!0,position:"top-end",icon:"success",title:"Reminder created successfully",showConfirmButton:!1,timer:3e3,timerProgressBar:!0})}})}return(l,e)=>(b(),N(q,{breadcrumbs:S},{default:n(()=>[r(i(O),{title:"Create Reminder"}),e[28]||(e[28]=o("div",{class:"flex items-center justify-between mb-6"},[o("h1",{class:"text-2xl font-bold"},"Create Reminder")],-1)),o("form",{onSubmit:e[8]||(e[8]=M(s=>P(),["prevent"])),class:"space-y-6"},[r(V,null,{default:n(()=>[r(A,null,{default:n(()=>[r(j,null,{default:n(()=>e[9]||(e[9]=[d("Reminder Details")])),_:1,__:[9]})]),_:1}),r(E,{class:"space-y-6"},{default:n(()=>[o("div",z,[o("div",null,[r(a,{for:"type"},{default:n(()=>e[10]||(e[10]=[d("Reminder Type")])),_:1,__:[10]}),r(i(y),{modelValue:i(t).type,"onUpdate:modelValue":e[0]||(e[0]=s=>i(t).type=s),options:D,placeholder:"Select reminder type",class:"mt-1",required:""},null,8,["modelValue"]),e[11]||(e[11]=o("div",{class:"text-[11px] text-gray-500 mt-1"}," Bill Payment: For recurring bills like electricity, water, etc. ",-1)),r(u,{message:i(t).errors.type},null,8,["message"])]),o("div",null,[r(a,{for:"priority"},{default:n(()=>e[12]||(e[12]=[d("Priority")])),_:1,__:[12]}),r(i(y),{modelValue:i(t).priority,"onUpdate:modelValue":e[1]||(e[1]=s=>i(t).priority=s),options:k,placeholder:"Select priority",class:"mt-1",required:""},null,8,["modelValue"]),e[13]||(e[13]=o("div",{class:"text-[11px] text-gray-500 mt-1"}," Priority is auto-calculated based on due date, but you can override it. ",-1)),r(u,{message:i(t).errors.priority},null,8,["message"])])]),o("div",null,[r(a,{for:"title"},{default:n(()=>e[14]||(e[14]=[d("Title")])),_:1,__:[14]}),f(o("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>i(t).title=s),type:"text",id:"title",class:"w-full rounded-md border border-input bg-transparent px-3 py-2 mt-1 text-foreground dark:bg-input/30 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] focus-visible:outline-none",placeholder:"e.g., Electricity Bill Payment",required:""},null,512),[[g,i(t).title]]),e[15]||(e[15]=o("div",{class:"text-[11px] text-gray-500 mt-1"}," A clear, descriptive title for this reminder. ",-1)),r(u,{message:i(t).errors.title},null,8,["message"])]),o("div",null,[r(a,{for:"description"},{default:n(()=>e[16]||(e[16]=[d("Description")])),_:1,__:[16]}),f(o("textarea",{"onUpdate:modelValue":e[3]||(e[3]=s=>i(t).description=s),id:"description",rows:"3",class:"w-full rounded-md border border-input bg-transparent px-3 py-2 mt-1 text-foreground dark:bg-input/30 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] focus-visible:outline-none",placeholder:"e.g., Monthly electricity bill payment for main office"},null,512),[[g,i(t).description]]),e[17]||(e[17]=o("div",{class:"text-[11px] text-gray-500 mt-1"}," Additional details about this reminder (optional). ",-1)),r(u,{message:i(t).errors.description},null,8,["message"])]),o("div",G,[o("div",null,[r(a,{for:"due_date"},{default:n(()=>e[18]||(e[18]=[d("Due Date")])),_:1,__:[18]}),o("div",J,[f(o("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>i(t).due_date=s),type:"date",id:"due_date",class:"w-full rounded-md border border-input bg-transparent px-3 py-2 mt-1 text-foreground dark:bg-input/30 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] focus-visible:outline-none",required:""},null,512),[[g,i(t).due_date]]),r(i(W),{class:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]),e[19]||(e[19]=o("div",{class:"text-[11px] text-gray-500 mt-1"}," When is this reminder due? ",-1)),r(u,{message:i(t).errors.due_date},null,8,["message"])]),o("div",null,[r(a,{for:"amount"},{default:n(()=>e[20]||(e[20]=[d("Amount (Optional)")])),_:1,__:[20]}),f(o("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>i(t).amount=s),type:"number",id:"amount",min:"0",step:"0.01",class:"w-full rounded-md border border-input bg-transparent px-3 py-2 mt-1 text-foreground dark:bg-input/30 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] focus-visible:outline-none",placeholder:"e.g., 1500.00"},null,512),[[g,i(t).amount]]),e[21]||(e[21]=o("div",{class:"text-[11px] text-gray-500 mt-1"}," The amount due (if applicable). ",-1)),r(u,{message:i(t).errors.amount},null,8,["message"])])]),i(t).type==="bill_payment"?(b(),c("div",K,[o("div",null,[r(a,{for:"expense_id"},{default:n(()=>e[22]||(e[22]=[d("Link to Expense (Optional)")])),_:1,__:[22]}),r(i(y),{modelValue:i(t).expense_id,"onUpdate:modelValue":e[6]||(e[6]=s=>i(t).expense_id=s),options:T.value,placeholder:"Select an expense",class:"mt-1"},null,8,["modelValue","options"]),e[23]||(e[23]=o("div",{class:"text-[11px] text-gray-500 mt-1"}," Link this reminder to an existing expense to auto-fill details. ",-1)),r(u,{message:i(t).errors.expense_id},null,8,["message"])])])):w("",!0),i(t).type==="customer_due"||i(t).type==="credit_term"?(b(),c("div",Q,[o("div",null,[r(a,{for:"customer_id"},{default:n(()=>e[24]||(e[24]=[d("Customer (Optional)")])),_:1,__:[24]}),r(i(y),{modelValue:i(t).customer_id,"onUpdate:modelValue":e[7]||(e[7]=s=>i(t).customer_id=s),options:B.value,placeholder:"Select a customer",class:"mt-1"},null,8,["modelValue","options"]),e[25]||(e[25]=o("div",{class:"text-[11px] text-gray-500 mt-1"}," Link this reminder to a customer. ",-1)),r(u,{message:i(t).errors.customer_id},null,8,["message"])])])):w("",!0)]),_:1})]),_:1}),r(V,null,{default:n(()=>[r(F,{class:"flex gap-2 justify-end"},{default:n(()=>[r(i($),{type:"submit",variant:"default"},{default:n(()=>e[26]||(e[26]=[d("Create Reminder")])),_:1,__:[26]}),r(i(L),{href:l.route("reminders.index")},{default:n(()=>[r(i($),{type:"button",variant:"ghost"},{default:n(()=>e[27]||(e[27]=[d("Cancel")])),_:1,__:[27]})]),_:1},8,["href"])]),_:1})]),_:1})],32)]),_:1,__:[28]}))}});export{ye as default};
