import{d as E,D as F,e as P,o as C,b as t,a as s,w as r,h as n,u as l,x as M,y as $,f as j,l as D,t as A,E as G}from"./app-Dsysobr5.js";import{_ as d}from"./InputError.vue_vue_type_script_setup_true_lang-DUxwYj4y.js";import{_ as m}from"./Label.vue_vue_type_script_setup_true_lang-BYXhyyHZ.js";import{_ as u}from"./Input.vue_vue_type_script_setup_true_lang-DyS-fVwM.js";import{_ as L}from"./PhoneInput.vue_vue_type_script_setup_true_lang-Bn21p3I0.js";import{_ as T}from"./index-b3uWlJkI.js";import{_ as z}from"./CardFooter.vue_vue_type_script_setup_true_lang-XTUsz7Yc.js";import J from"./LocationInput-BM5TnJlK.js";const O={class:"flex gap-4"},q={class:"flex-1"},h={class:"flex gap-4"},H={class:"flex-1"},W={class:"flex gap-4"},K={class:"flex-1"},Q={class:"flex gap-4"},R={class:"flex-1"},Y={class:"flex gap-4"},Z={class:"flex-1"},ee={class:"flex gap-4"},oe={class:"flex-1"},se={class:"flex gap-4"},le={class:"flex-1"},te={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ae={class:"flex gap-4"},re={class:"flex-1"},ie={class:"flex gap-4"},ne={class:"flex-1"},me={key:0,class:"mt-2"},de=["src"],ve=E({__name:"Form",props:{customer:Object,profileImageUrl:String},setup(g){var c,_,y,x,v,V,b,U,k,N;const i=g,S=()=>{var p;if((p=i.customer)!=null&&p.location){const e=i.customer.location;if(typeof e=="string")try{return JSON.parse(e)}catch{return{lat:0,lng:0}}else if(typeof e=="object"&&e!==null){const a=parseFloat(e.lat),f=parseFloat(e.lng);if(!isNaN(a)&&!isNaN(f))return{lat:a,lng:f}}}return{lat:0,lng:0}},o=F({name:((c=i.customer)==null?void 0:c.name)||"",company_name:((_=i.customer)==null?void 0:_.company_name)||"",email:((y=i.customer)==null?void 0:y.email)||"",phone:((x=i.customer)==null?void 0:x.phone)||"",address:((v=i.customer)==null?void 0:v.address)||"",purok:((V=i.customer)==null?void 0:V.purok)||"",barangay:((b=i.customer)==null?void 0:b.barangay)||"",city_municipality:((U=i.customer)==null?void 0:U.city_municipality)||"",province:((k=i.customer)==null?void 0:k.province)||"",profile_image:null,customerId:((N=i.customer)==null?void 0:N.id)||null,location:S()});function X(p){const e=p.target;if(e.files&&e.files.length>0){const a=e.files[0],f=["image/jpeg","image/png"].includes(a.type),I=a.size<=2*1024*1024;if(!f||!I){o.profile_image=null,e.value="";const B=f?"File is too large. Max size is 2MB.":"Please select a JPG or PNG image.";window.alert(B);return}o.profile_image=a}else o.profile_image=null}function w(){o.customerId?o.post(route("customers.update",o.customerId),{forceFormData:!0,onSuccess:()=>o.reset("profile_image")}):o.post(route("customers.store"),{forceFormData:!0,onSuccess:()=>o.reset("profile_image")})}return(p,e)=>(C(),P("form",{onSubmit:G(w,["prevent"]),class:"space-y-6",enctype:"multipart/form-data"},[t("div",O,[t("div",q,[s(m,{for:"name"},{default:r(()=>e[10]||(e[10]=[n("Full name")])),_:1,__:[10]}),s(u,{id:"name",modelValue:l(o).name,"onUpdate:modelValue":e[0]||(e[0]=a=>l(o).name=a),placeholder:"e.g., Aisha Bello",required:""},null,8,["modelValue"]),e[11]||(e[11]=t("p",{class:"text-xs text-muted-foreground mt-1"},"This is the customer’s name.",-1)),s(d,{message:l(o).errors.name},null,8,["message"])])]),t("div",h,[t("div",H,[s(m,{for:"company_name"},{default:r(()=>e[12]||(e[12]=[n("Company (optional)")])),_:1,__:[12]}),s(u,{id:"company_name",modelValue:l(o).company_name,"onUpdate:modelValue":e[1]||(e[1]=a=>l(o).company_name=a),placeholder:"e.g., Bright Ventures Ltd."},null,8,["modelValue"]),e[13]||(e[13]=t("p",{class:"text-xs text-muted-foreground mt-1"},"Add if this customer represents a company.",-1)),s(d,{message:l(o).errors.company_name},null,8,["message"])])]),t("div",W,[t("div",K,[s(m,{for:"email"},{default:r(()=>e[14]||(e[14]=[n("Email address")])),_:1,__:[14]}),s(u,{id:"email",modelValue:l(o).email,"onUpdate:modelValue":e[2]||(e[2]=a=>l(o).email=a),type:"email",placeholder:"name@company.com",required:""},null,8,["modelValue"]),e[15]||(e[15]=t("p",{class:"text-xs text-muted-foreground mt-1"},"We’ll use this to send receipts.",-1)),s(d,{message:l(o).errors.email},null,8,["message"])])]),t("div",Q,[t("div",R,[s(m,{for:"phone"},{default:r(()=>e[16]||(e[16]=[n("Phone number (optional)")])),_:1,__:[16]}),s(L,{id:"phone",modelValue:l(o).phone,"onUpdate:modelValue":e[3]||(e[3]=a=>l(o).phone=a),placeholder:"XXXXXXXXXX"},null,8,["modelValue"]),e[17]||(e[17]=t("p",{class:"text-xs text-muted-foreground mt-1"},"Enter 10-digit Philippine mobile number.",-1)),s(d,{message:l(o).errors.phone},null,8,["message"])])]),t("div",Y,[t("div",Z,[s(m,{for:"address"},{default:r(()=>e[18]||(e[18]=[n("Street Address (Optional)")])),_:1,__:[18]}),M(t("textarea",{id:"address","onUpdate:modelValue":e[4]||(e[4]=a=>l(o).address=a),placeholder:"House/Unit number, Street name",class:"w-full rounded border px-3 py-2 mt-1",rows:"2"},null,512),[[$,l(o).address]]),e[19]||(e[19]=t("p",{class:"text-xs text-muted-foreground mt-1"},"Additional address details if needed.",-1)),s(d,{message:l(o).errors.address},null,8,["message"])])]),t("div",ee,[t("div",oe,[s(m,{for:"purok"},{default:r(()=>e[20]||(e[20]=[n("Purok")])),_:1,__:[20]}),s(u,{id:"purok",modelValue:l(o).purok,"onUpdate:modelValue":e[5]||(e[5]=a=>l(o).purok=a),placeholder:"Enter purok"},null,8,["modelValue"]),s(d,{message:l(o).errors.purok},null,8,["message"])])]),t("div",se,[t("div",le,[s(m,{for:"barangay"},{default:r(()=>e[21]||(e[21]=[n("Barangay")])),_:1,__:[21]}),s(u,{id:"barangay",modelValue:l(o).barangay,"onUpdate:modelValue":e[6]||(e[6]=a=>l(o).barangay=a),placeholder:"Enter barangay"},null,8,["modelValue"]),s(d,{message:l(o).errors.barangay},null,8,["message"])])]),t("div",te,[t("div",null,[s(m,{for:"city_municipality"},{default:r(()=>e[22]||(e[22]=[n("City/Municipality")])),_:1,__:[22]}),s(u,{id:"city_municipality",modelValue:l(o).city_municipality,"onUpdate:modelValue":e[7]||(e[7]=a=>l(o).city_municipality=a),placeholder:"Enter city or municipality"},null,8,["modelValue"]),s(d,{message:l(o).errors.city_municipality},null,8,["message"])]),t("div",null,[s(m,{for:"province"},{default:r(()=>e[23]||(e[23]=[n("Province")])),_:1,__:[23]}),s(u,{id:"province",modelValue:l(o).province,"onUpdate:modelValue":e[8]||(e[8]=a=>l(o).province=a),placeholder:"Enter province"},null,8,["modelValue"]),s(d,{message:l(o).errors.province},null,8,["message"])])]),t("div",ae,[t("div",re,[s(m,{for:"location"},{default:r(()=>e[24]||(e[24]=[n("Location")])),_:1,__:[24]}),s(J,{modelValue:l(o).location,"onUpdate:modelValue":e[9]||(e[9]=a=>l(o).location=a)},null,8,["modelValue"])])]),t("div",ie,[t("div",ne,[s(m,{for:"profile_image"},{default:r(()=>e[25]||(e[25]=[n("Profile picture (optional)")])),_:1,__:[25]}),s(u,{id:"profile_image",type:"file",accept:"image/jpeg,image/png",onChange:X}),e[26]||(e[26]=t("p",{class:"text-xs text-muted-foreground mt-1"},"Max 2MB, JPG or PNG.",-1)),s(d,{message:l(o).errors.profile_image},null,8,["message"]),g.profileImageUrl?(C(),P("div",me,[t("img",{src:g.profileImageUrl,alt:"Profile Image",class:"w-24 h-24 object-cover rounded-full"},null,8,de)])):j("",!0)])]),s(z,{class:"flex gap-2 justify-end"},{default:r(()=>[s(l(T),{type:"submit",variant:"default"},{default:r(()=>[n(A(l(o).customerId?"Update Customer":"Create Customer"),1)]),_:1}),D(p.$slots,"footer")]),_:3})],32))}});export{ve as _};
