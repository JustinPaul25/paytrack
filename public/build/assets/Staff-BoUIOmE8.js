import{d as U,v as A,m as w,s as z,W as g,c as v,o as n,w as i,a as r,b as e,u as s,g as D,S as h,h as m,x as V,y as j,e as p,f as _,F as k,r as C,t as d,n as L}from"./app-DPCeYuSk.js";import{_ as f}from"./index-DA4gOIol.js";import{_ as E}from"./AppLayout.vue_vue_type_script_setup_true_lang-ByE8zZPf.js";import{_ as F,a as M}from"./CardContent.vue_vue_type_script_setup_true_lang-CLIz8oga.js";import{A as P,_ as S}from"./Icon.vue_vue_type_script_setup_true_lang-BatWyrku.js";import{S as $}from"./sweetalert2.esm.all-BQIkj5Wb.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_0fdfc5f8_lang-DDmsov4g.js";import"./useForwardPropsEmits-ClaRWLiW.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-D0FbTyaM.js";import"./createLucideIcon-NfRvGErl.js";import"./Teleport-CSwlsPeB.js";import"./RovingFocusGroup-CqScvX7t.js";import"./VisuallyHidden-CMNQhR59.js";import"./x-Ca1YYSwP.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Cc2Xhbk7.js";import"./square-pen-BiICsMts.js";import"./calendar-C9o9J4Z6.js";import"./check-31vxPYeY.js";import"./chevron-left-D_2h64tZ.js";import"./circle-alert-CpE-mHcr.js";import"./piggy-bank-BOAQEYuA.js";import"./circle-check-big-qAMb97eY.js";import"./message-square-C9zGnrIz.js";import"./trophy-CRq3vmCC.js";import"./plus-BDGwvNUF.js";import"./clock-p-SX3S9y.js";import"./dollar-sign-t5l9azmB.js";import"./eye-off-DgzZxaQN.js";import"./eye-DQqmNye9.js";import"./loader-circle-Fb_VvMz7.js";import"./map-pin-DMIrPWw5.js";import"./sun-zrGCEPRF.js";import"./printer-CHtRKO2y.js";import"./search-hRFkqRWp.js";import"./shopping-bag-D6tUmkb0.js";import"./trash-2-1OWoEMYG.js";import"./trending-up-BTqBJJjS.js";import"./user-cog-21S3kDqh.js";const R={class:"flex items-center justify-between mb-6"},W={class:"flex gap-2"},Y={class:"flex items-center justify-between mt-4 mb-2"},q={class:"flex gap-2 items-center"},G={class:"min-w-full divide-y divide-border"},H={key:0},I={class:"px-4 py-2 font-medium"},J={class:"px-4 py-2 text-sm text-gray-500"},K={class:"px-4 py-2"},O={class:"flex gap-1 flex-wrap"},Q={class:"px-4 py-2 text-sm text-gray-500"},X={class:"px-4 py-2"},Z={class:"flex gap-2"},ee={key:1},te={colspan:"5",class:"px-4 py-10 text-center text-sm text-gray-500"},se={key:0,class:"flex items-center justify-between mt-6"},re={class:"text-sm text-gray-700"},oe={class:"flex gap-2"},qe=U({__name:"Staff",setup(ae){const o=A(),y=w(o.props.filters?o.props.filters:{}),u=w(typeof y.value.search=="string"?y.value.search:""),B=[{title:"Users",href:"/users"},{title:"Staff",href:"/users/staff"}];let x=null;z(u,l=>{x&&clearTimeout(x),x=setTimeout(()=>{g.get("/users/staff",{search:l||void 0},{preserveState:!0,replace:!0})},400)});function b(l){g.get("/users/staff",{search:u.value,page:l},{preserveState:!0,replace:!0})}async function N(l){(await $.fire({title:"Delete User?",text:"Are you sure you want to delete this user? This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#8f5be8",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete user"})).isConfirmed&&g.delete(`/users/${l}`,{onSuccess:()=>{$.fire("User deleted","User deleted successfully.","success")}})}function T(l){switch(l.toLowerCase()){case"admin":return"bg-purple-100 text-purple-800";case"staff":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}}return(l,t)=>(n(),v(E,{breadcrumbs:B},{default:i(()=>[r(s(D),{title:"Staff"}),e("div",R,[t[6]||(t[6]=e("h1",{class:"text-2xl font-bold"},"Staff Management",-1)),e("div",W,[r(s(h),{href:l.route("users.archives")},{default:i(()=>[r(s(f),{variant:"outline"},{default:i(()=>[r(s(P),{class:"h-4 w-4 mr-2"}),t[4]||(t[4]=m(" Archives "))]),_:1,__:[4]})]),_:1},8,["href"]),r(s(h),{href:l.route("users.create")},{default:i(()=>[r(s(f),{variant:"default"},{default:i(()=>t[5]||(t[5]=[e("span",{class:"mr-2"},"+",-1),m(" Add New User ")])),_:1,__:[5]})]),_:1},8,["href"])])]),e("div",Y,[e("div",q,[V(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>u.value=a),type:"text",placeholder:"Search staff by name or email...",class:"rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[j,u.value]])])]),r(F,null,{default:i(()=>[r(M,null,{default:i(()=>[e("table",G,[t[8]||(t[8]=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 text-left"},"Name"),e("th",{class:"px-4 py-2 text-left"},"Email"),e("th",{class:"px-4 py-2 text-left"},"Roles"),e("th",{class:"px-4 py-2 text-left"},"Updated At"),e("th",{class:"px-4 py-2 text-left"},"Actions")])],-1)),s(o).props.users.data.length?(n(),p("tbody",H,[(n(!0),p(k,null,C(s(o).props.users.data,a=>(n(),p("tr",{key:a.id,class:"hover:bg-muted"},[e("td",I,d(a.name),1),e("td",J,d(a.email),1),e("td",K,[e("div",O,[(n(!0),p(k,null,C(a.roles,c=>(n(),p("span",{key:c,class:L(["px-2 py-1 text-xs font-semibold rounded",T(c)])},d(c),3))),128))])]),e("td",Q,d(new Date(a.updated_at).toLocaleDateString()),1),e("td",X,[e("div",Z,[r(s(h),{href:l.route("users.edit",a.id)},{default:i(()=>[r(s(f),{variant:"ghost",size:"sm"},{default:i(()=>[r(S,{name:"edit",class:"h-4 w-4"})]),_:1})]),_:2},1032,["href"]),r(s(f),{variant:"ghost",size:"sm",onClick:c=>N(a.id)},{default:i(()=>[r(S,{name:"trash",class:"h-4 w-4"})]),_:2},1032,["onClick"])])])]))),128))])):(n(),p("tbody",ee,[e("tr",null,[e("td",te,[t[7]||(t[7]=m(" No staff members found. ")),u.value&&u.value.toString().trim().length?(n(),p("button",{key:0,type:"button",class:"underline underline-offset-4 ml-1",onClick:t[1]||(t[1]=a=>u.value="")}," Clear search ")):_("",!0)])])]))]),s(o).props.users.last_page>1?(n(),p("div",se,[e("div",re," Showing "+d(s(o).props.users.from)+" to "+d(s(o).props.users.to)+" of "+d(s(o).props.users.total)+" results ",1),e("div",oe,[s(o).props.users.prev_page_url?(n(),v(s(f),{key:0,variant:"outline",size:"sm",onClick:t[2]||(t[2]=a=>b(s(o).props.users.current_page-1))},{default:i(()=>t[9]||(t[9]=[m(" Previous ")])),_:1,__:[9]})):_("",!0),s(o).props.users.next_page_url?(n(),v(s(f),{key:1,variant:"outline",size:"sm",onClick:t[3]||(t[3]=a=>b(s(o).props.users.current_page+1))},{default:i(()=>t[10]||(t[10]=[m(" Next ")])),_:1,__:[10]})):_("",!0)])])):_("",!0)]),_:1})]),_:1})]),_:1}))}});export{qe as default};
