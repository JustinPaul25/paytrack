import{d as Q,D as H,p as B,s as L,c as v,o as u,u as l,w as n,a as o,b as t,e as m,t as d,f as p,h as c,x as q,y as R,E as J,v as K,m as W,g as Y,F as V,S as j,l as N,r as A}from"./app-DLGUJSur.js";import{_ as b}from"./index-CbeL7bQp.js";import{w as G,x as Z,y as ee,_ as te}from"./AppLayout.vue_vue_type_script_setup_true_lang-TGItx7cK.js";import{_ as w,a as P}from"./CardContent.vue_vue_type_script_setup_true_lang-DGEoivaK.js";import{_ as C,a as $}from"./CardTitle.vue_vue_type_script_setup_true_lang-CA3flqiV.js";import{_ as z}from"./Select.vue_vue_type_script_setup_true_lang-BmMAiM-x.js";import{_ as se}from"./SearchSelect.vue_vue_type_script_setup_true_lang-DODuTYTX.js";import{_ as oe,b as ne,c as le,d as ie,e as re,a as de}from"./DialogTitle.vue_vue_type_script_setup_true_lang-zZZdk4Ax.js";import{_ as y}from"./Label.vue_vue_type_script_setup_true_lang-s53qzNoi.js";import{_ as ae}from"./PhoneInput.vue_vue_type_script_setup_true_lang-DIcpvEul.js";import{S as ue}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{_ as x}from"./InputError.vue_vue_type_script_setup_true_lang-Biwlb9eG.js";import{D as me}from"./DeliveryRouteMap-gJbZXGmH.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_0fe2f881_lang-fGrSInQY.js";import"./RovingFocusGroup-B2V0LqPJ.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-0k-ecodo.js";import"./createLucideIcon-DFeQ1_P7.js";import"./VisuallyHidden-e3nHpJ_I.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CCqgexjF.js";import"./chevron-right-BFHvTSNm.js";import"./Input.vue_vue_type_script_setup_true_lang-BhSvFCK4.js";import"./search-DX6CV7Ks.js";import"./vue-leaflet.es-Dv-ZYNQx.js";import"./marker-icon-2x-1TirABJh.js";import"./marker-icon-B6h-nX3D.js";import"./marker-shadow-B9CpECYs.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const pe={class:"space-y-4"},ce={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},fe=["min"],_e={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ve={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ye={key:0},ge=Q({__name:"DeliveryFormModal",props:{open:{type:Boolean},invoice:{},customers:{}},emits:["update:open"],setup(E,{emit:i}){var D,S;const _=E,k=i,r=H({customer_id:_.invoice.customer_id,invoice_id:_.invoice.id,delivery_address:((D=_.invoice.customer)==null?void 0:D.address)||"",contact_person:((S=_.invoice.customer)==null?void 0:S.name)||"",contact_phone:"",delivery_date:"",delivery_time:"",status:"pending",notes:"",delivery_fee:""}),I=new Date().toISOString().split("T")[0],X=B(()=>[{value:null,label:"Select customer"},..._.customers.map(a=>({value:a.id,label:`${a.name}${a.company_name?` (${a.company_name})`:""}`}))]),F=[{value:"pending",label:"Pending"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}],g=[{value:"09:00 AM - 12:00 PM",label:"09:00 AM - 12:00 PM"},{value:"12:00 PM - 03:00 PM",label:"12:00 PM - 03:00 PM"},{value:"03:00 PM - 06:00 PM",label:"03:00 PM - 06:00 PM"},{value:"06:00 PM - 09:00 PM",label:"06:00 PM - 09:00 PM"},{value:"Custom",label:"Custom"}],h=B(()=>{if(!r.customer_id)return null;const a=_.customers.find(s=>s.id===r.customer_id);if(!(a!=null&&a.location))return null;let e=a.location;if(typeof e=="string")try{e=JSON.parse(e)}catch{return console.warn("Failed to parse customer location string:",e),null}return e&&typeof e.lat=="number"&&typeof e.lng=="number"&&!isNaN(e.lat)&&!isNaN(e.lng)&&e.lat>=-90&&e.lat<=90&&e.lng>=-180&&e.lng<=180?e:null}),M=B(()=>r.customer_id&&_.customers.find(a=>a.id===r.customer_id)||null);L(()=>r.customer_id,a=>{if(a){const e=_.customers.find(s=>s.id===a);e!=null&&e.address&&!r.delivery_address&&(r.delivery_address=e.address)}}),L(()=>_.open,a=>{var e,s;a&&(r.reset(),r.customer_id=_.invoice.customer_id,r.invoice_id=_.invoice.id,r.delivery_address=((e=_.invoice.customer)==null?void 0:e.address)||"",r.contact_person=((s=_.invoice.customer)==null?void 0:s.name)||"",r.clearErrors())});function U(){const a=/^\+63\d{10}$/;if(r.contact_phone&&!a.test(r.contact_phone)){r.setError("contact_phone","Enter a valid 10-digit Philippine mobile number.");return}r.post(route("deliveries.store"),{preserveScroll:!0,onSuccess:()=>{ue.fire({toast:!0,position:"top-end",icon:"success",title:"Delivery created successfully",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}),k("update:open",!1),r.reset()}})}function T(){k("update:open",!1),r.clearErrors()}return(a,e)=>(u(),v(l(oe),{open:a.open,"onUpdate:open":e[10]||(e[10]=s=>k("update:open",s))},{default:n(()=>[o(l(de),{class:"max-w-4xl max-h-[90vh] overflow-y-auto"},{default:n(()=>{var s,O;return[o(l(ne),null,{default:n(()=>[o(l(le),null,{default:n(()=>e[11]||(e[11]=[m("Out for Delivery")])),_:1,__:[11]}),o(l(ie),null,{default:n(()=>[m(" Create a delivery for invoice "+d(a.invoice.reference_number),1)]),_:1})]),_:1}),t("form",{onSubmit:e[9]||(e[9]=J(f=>U(),["prevent"])),class:"space-y-6"},[t("div",pe,[t("div",ce,[t("div",null,[o(y,{for:"customer_id"},{default:n(()=>e[12]||(e[12]=[m("Customer")])),_:1,__:[12]}),o(l(se),{modelValue:l(r).customer_id,"onUpdate:modelValue":e[0]||(e[0]=f=>l(r).customer_id=f),options:X.value,placeholder:"Select customer","search-placeholder":"Search customers...",class:"mt-1",required:""},null,8,["modelValue","options"]),o(x,{message:l(r).errors.customer_id},null,8,["message"])]),t("div",null,[o(y,{for:"delivery_date"},{default:n(()=>e[13]||(e[13]=[m("Delivery Date")])),_:1,__:[13]}),q(t("input",{"onUpdate:modelValue":e[1]||(e[1]=f=>l(r).delivery_date=f),type:"date",id:"delivery_date",min:l(I),class:"w-full rounded-md border border-input bg-transparent px-3 py-2 mt-1 text-foreground dark:bg-input/30 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] focus-visible:outline-none",required:""},null,8,fe),[[R,l(r).delivery_date]]),o(x,{message:l(r).errors.delivery_date},null,8,["message"])])]),t("div",null,[o(y,{for:"delivery_address"},{default:n(()=>e[14]||(e[14]=[m("Delivery Address")])),_:1,__:[14]}),q(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=f=>l(r).delivery_address=f),id:"delivery_address",class:"w-full rounded-md border border-input bg-transparent px-3 py-2 mt-1 text-foreground dark:bg-input/30 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] focus-visible:outline-none",rows:"3",placeholder:"Enter complete delivery address",required:""},null,512),[[R,l(r).delivery_address]]),o(x,{message:l(r).errors.delivery_address},null,8,["message"])]),t("div",_e,[t("div",null,[o(y,{for:"contact_person"},{default:n(()=>e[15]||(e[15]=[m("Contact Person")])),_:1,__:[15]}),q(t("input",{"onUpdate:modelValue":e[3]||(e[3]=f=>l(r).contact_person=f),type:"text",id:"contact_person",class:"w-full rounded-md border border-input bg-transparent px-3 py-2 mt-1 text-foreground dark:bg-input/30 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] focus-visible:outline-none",placeholder:"Enter contact person name",required:""},null,512),[[R,l(r).contact_person]]),o(x,{message:l(r).errors.contact_person},null,8,["message"])]),t("div",null,[o(y,{for:"contact_phone"},{default:n(()=>e[16]||(e[16]=[m("Contact Phone")])),_:1,__:[16]}),o(ae,{modelValue:l(r).contact_phone,"onUpdate:modelValue":e[4]||(e[4]=f=>l(r).contact_phone=f),id:"contact_phone",placeholder:"XXXXXXXXXX",required:"",class:"mt-1"},null,8,["modelValue"]),o(x,{message:l(r).errors.contact_phone},null,8,["message"])])]),t("div",ve,[t("div",null,[o(y,{for:"delivery_time"},{default:n(()=>e[17]||(e[17]=[m("Delivery Time")])),_:1,__:[17]}),o(l(z),{modelValue:l(r).delivery_time,"onUpdate:modelValue":e[5]||(e[5]=f=>l(r).delivery_time=f),options:g,placeholder:"Select delivery time",class:"mt-1",required:""},null,8,["modelValue"]),o(x,{message:l(r).errors.delivery_time},null,8,["message"])]),t("div",null,[o(y,{for:"status"},{default:n(()=>e[18]||(e[18]=[m("Status")])),_:1,__:[18]}),o(l(z),{modelValue:l(r).status,"onUpdate:modelValue":e[6]||(e[6]=f=>l(r).status=f),options:F,placeholder:"Select status",class:"mt-1",required:""},null,8,["modelValue"]),o(x,{message:l(r).errors.status},null,8,["message"])]),t("div",null,[o(y,{for:"delivery_fee"},{default:n(()=>e[19]||(e[19]=[m("Delivery Fee")])),_:1,__:[19]}),q(t("input",{"onUpdate:modelValue":e[7]||(e[7]=f=>l(r).delivery_fee=f),type:"number",id:"delivery_fee",min:"0",step:"0.01",class:"w-full rounded-md border border-input bg-transparent px-3 py-2 mt-1 text-foreground dark:bg-input/30 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] focus-visible:outline-none",placeholder:"0.00",required:""},null,512),[[R,l(r).delivery_fee]]),o(x,{message:l(r).errors.delivery_fee},null,8,["message"])])]),t("div",null,[o(y,{for:"notes"},{default:n(()=>e[20]||(e[20]=[m("Notes")])),_:1,__:[20]}),q(t("textarea",{"onUpdate:modelValue":e[8]||(e[8]=f=>l(r).notes=f),id:"notes",class:"w-full rounded-md border border-input bg-transparent px-3 py-2 mt-1 text-foreground dark:bg-input/30 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] focus-visible:outline-none",rows:"3",placeholder:"Enter any additional notes"},null,512),[[R,l(r).notes]]),o(x,{message:l(r).errors.notes},null,8,["message"])])]),h.value||l(r).delivery_address||(s=M.value)!=null&&s.address?(u(),p("div",ye,[o(y,{class:"mb-2 block"},{default:n(()=>e[21]||(e[21]=[m("Delivery Route")])),_:1,__:[21]}),o(me,{"customer-location":h.value,"delivery-address":l(r).delivery_address||((O=M.value)==null?void 0:O.address),"map-height":"300px"},null,8,["customer-location","delivery-address"])])):c("",!0),o(l(re),{class:"gap-2"},{default:n(()=>[o(l(b),{type:"button",variant:"ghost",onClick:T},{default:n(()=>e[22]||(e[22]=[m("Cancel")])),_:1,__:[22]}),o(l(b),{type:"submit",variant:"default",disabled:l(r).processing},{default:n(()=>e[23]||(e[23]=[m(" Create Delivery ")])),_:1,__:[23]},8,["disabled"])]),_:1})],32)]}),_:1})]),_:1},8,["open"]))}}),xe={class:"flex items-center justify-between my-6"},be={class:"text-2xl font-bold"},ke={class:"flex gap-2"},we={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Pe={class:"lg:col-span-2 space-y-6"},Ce={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},$e={class:"text-lg font-semibold"},De={key:0},he={key:0,class:"mt-4"},Me={class:"mt-1"},Se={class:"overflow-x-auto"},qe={class:"min-w-full divide-y divide-border"},Re={class:"px-4 py-2"},Ve={class:"font-medium"},Ue={class:"text-sm text-gray-500"},Ne={class:"px-4 py-2"},Ae={class:"px-4 py-2"},Be={class:"px-4 py-2 font-medium"},Ee={class:"border-t"},Ie={class:"px-4 py-2 font-medium"},Xe={colspan:"3",class:"px-4 py-2 text-right font-medium"},Fe={class:"px-4 py-2 font-medium"},Te={class:"border-t"},je={class:"px-4 py-2 font-bold text-lg"},Oe={class:"space-y-6"},Le={class:"space-y-3"},ze={class:"flex items-center justify-between mb-2"},Qe={class:"font-medium"},He={class:"text-sm text-gray-600 space-y-1"},Je={key:0},Ke={key:1},We={class:"text-xs mt-0.5"},Ye={key:2},Ge={key:3},Ze={key:4},et={key:5,class:"mt-2 pt-2 border-t"},tt={class:"text-xs mt-0.5"},st={key:6,class:"text-xs text-gray-500 mt-2"},ot={key:7,class:"mt-2 pt-2 border-t"},nt={class:"space-y-3"},lt={class:"flex items-center justify-between"},it={class:"font-medium"},rt={class:"text-sm text-gray-600"},dt={key:0},at={class:"text-xs text-gray-500"},ut={key:1,class:"mt-1 text-xs text-red-500"},mt={key:2,class:"text-xs"},pt=["href"],ct={class:"space-y-3"},ft={class:"flex items-center justify-between"},_t={class:"font-medium"},vt={class:"text-sm text-gray-600"},yt={key:0},gt={class:"text-xs text-gray-500"},xt={class:"space-y-3"},bt={class:"flex items-center gap-3"},kt={class:"font-medium"},wt={key:0},Pt={key:1},Ct={key:2},$t={class:"text-sm"},Dt={class:"mt-3"},ht={class:"text-sm"},ts=Q({__name:"Show",props:{invoice:{},refunds:{},refundRequests:{},deliveries:{},customers:{}},setup(E){var S;const i=E,_=K(),k=Array.isArray((S=_.props.auth)==null?void 0:S.userRoles)&&_.props.auth.userRoles.includes("Customer"),r=B(()=>Array.isArray(i.refundRequests)&&i.refundRequests.some(a=>a.status==="pending")),I=[{title:"Invoices",href:"/invoices"},{title:i.invoice.reference_number,href:`/invoices/${i.invoice.id}`}];function X(a){switch(a){case"draft":return"bg-gray-100 text-gray-800";case"pending":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}function F(a){switch(a){case"pending":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}function g(a){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(a)}function h(a){return new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function M(){window.print()}function U(a){if(!a.media||a.media.length===0)return null;const e=a.media.find(s=>s.mime_type.startsWith("image/"));return e?e.thumb_url||e.original_url:null}function T(a){return a.name.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2)}const D=W(!1);return(a,e)=>(u(),v(te,{breadcrumbs:I},{default:n(()=>[o(l(Y),{title:i.invoice.reference_number},null,8,["title"]),t("div",xe,[t("h1",be,d(i.invoice.reference_number),1),t("div",ke,[o(l(b),{variant:"outline",onClick:M},{default:n(()=>e[2]||(e[2]=[m("Download PDF")])),_:1,__:[2]}),o(l(b),{variant:"outline",onClick:M},{default:n(()=>e[3]||(e[3]=[m("Print")])),_:1,__:[3]}),!l(k)&&i.invoice.status!=="completed"?(u(),v(l(b),{key:0,variant:"default",onClick:e[0]||(e[0]=s=>D.value=!0)},{default:n(()=>e[4]||(e[4]=[m("Out for Delivery")])),_:1,__:[4]})):c("",!0),l(k)&&i.invoice.status==="completed"?(u(),p(V,{key:1},[r.value?(u(),v(l(b),{key:1,variant:"outline",disabled:"",title:"You already have a pending refund request for this invoice."},{default:n(()=>e[6]||(e[6]=[m(" Request Pending ")])),_:1,__:[6]})):(u(),v(l(j),{key:0,href:a.route("refundRequests.create",i.invoice.id)},{default:n(()=>[o(l(b),{variant:"default"},{default:n(()=>e[5]||(e[5]=[m("Request Refund")])),_:1,__:[5]})]),_:1},8,["href"]))],64)):c("",!0),o(l(j),{href:a.route("invoices.index")},{default:n(()=>[o(l(b),{variant:"ghost"},{default:n(()=>e[7]||(e[7]=[m("Back")])),_:1,__:[7]})]),_:1},8,["href"])])]),t("div",we,[t("div",Pe,[o(w,null,{default:n(()=>[o(C,null,{default:n(()=>[o($,null,{default:n(()=>e[8]||(e[8]=[m("Invoice Information")])),_:1,__:[8]})]),_:1}),o(P,null,{default:n(()=>[t("div",Ce,[t("div",null,[e[9]||(e[9]=t("label",{class:"text-sm font-medium text-gray-500"},"Reference Number",-1)),t("p",$e,d(i.invoice.reference_number),1)]),t("div",null,[e[10]||(e[10]=t("label",{class:"text-sm font-medium text-gray-500"},"Date Created",-1)),t("p",null,d(h(i.invoice.created_at)),1)]),t("div",null,[e[11]||(e[11]=t("label",{class:"text-sm font-medium text-gray-500"},"Status",-1)),t("span",{class:N(["px-2 py-1 rounded-full text-xs font-medium",X(i.invoice.status)])},d(i.invoice.status),3)]),t("div",null,[e[12]||(e[12]=t("label",{class:"text-sm font-medium text-gray-500"},"Payment Method",-1)),t("p",null,d(i.invoice.payment_method.replace("_"," ")),1)]),i.invoice.payment_reference?(u(),p("div",De,[e[13]||(e[13]=t("label",{class:"text-sm font-medium text-gray-500"},"Payment Reference",-1)),t("p",null,d(i.invoice.payment_reference),1)])):c("",!0)]),i.invoice.notes?(u(),p("div",he,[e[14]||(e[14]=t("label",{class:"text-sm font-medium text-gray-500"},"Notes",-1)),t("p",Me,d(i.invoice.notes),1)])):c("",!0)]),_:1})]),_:1}),o(w,null,{default:n(()=>[o(C,null,{default:n(()=>[o($,null,{default:n(()=>e[15]||(e[15]=[m("Invoice Items")])),_:1,__:[15]})]),_:1}),o(P,null,{default:n(()=>[t("div",Se,[t("table",qe,[e[18]||(e[18]=t("thead",null,[t("tr",null,[t("th",{class:"px-4 py-2 text-left"},"Product"),t("th",{class:"px-4 py-2 text-left"},"Quantity"),t("th",{class:"px-4 py-2 text-left"},"Price"),t("th",{class:"px-4 py-2 text-left"},"Total")])],-1)),t("tbody",null,[(u(!0),p(V,null,A(i.invoice.invoice_items,s=>(u(),p("tr",{key:s.id,class:"hover:bg-muted"},[t("td",Re,[t("div",null,[t("div",Ve,d(s.product.name),1),t("div",Ue,"SKU: "+d(s.product.id),1)])]),t("td",Ne,d(s.quantity),1),t("td",Ae,d(g(s.price)),1),t("td",Be,d(g(s.total)),1)]))),128))]),t("tfoot",null,[t("tr",Ee,[e[16]||(e[16]=t("td",{colspan:"3",class:"px-4 py-2 text-right font-medium"},"Subtotal:",-1)),t("td",Ie,d(g(i.invoice.subtotal_amount)),1)]),t("tr",null,[t("td",Xe,"VAT ("+d(i.invoice.vat_rate)+"%):",1),t("td",Fe,d(g(i.invoice.vat_amount)),1)]),t("tr",Te,[e[17]||(e[17]=t("td",{colspan:"3",class:"px-4 py-2 text-right font-bold text-lg"},"Total Amount:",-1)),t("td",je,d(g(i.invoice.total_amount)),1)])])])])]),_:1})]),_:1})]),t("div",Oe,[i.deliveries&&i.deliveries.length?(u(),v(w,{key:0},{default:n(()=>[o(C,null,{default:n(()=>[o($,null,{default:n(()=>e[19]||(e[19]=[m("Deliveries")])),_:1,__:[19]})]),_:1}),o(P,null,{default:n(()=>[t("div",Le,[(u(!0),p(V,null,A(i.deliveries,s=>(u(),p("div",{key:s.id,class:"border rounded-md p-3"},[t("div",ze,[t("div",Qe,"Delivery #"+d(s.id),1),t("span",{class:N(["px-2 py-1 rounded-full text-xs font-medium",F(s.status)])},d(s.status),3)]),t("div",He,[s.delivery_date?(u(),p("div",Je,[e[20]||(e[20]=t("span",{class:"font-medium"},"Date:",-1)),m(" "+d(s.delivery_date),1)])):c("",!0),s.delivery_time?(u(),p("div",Ke,[e[21]||(e[21]=t("span",{class:"font-medium"},"Time:",-1)),m(" "+d(s.delivery_time),1)])):c("",!0),t("div",null,[e[22]||(e[22]=t("span",{class:"font-medium"},"Address:",-1)),t("p",We,d(s.delivery_address),1)]),s.contact_person?(u(),p("div",Ye,[e[23]||(e[23]=t("span",{class:"font-medium"},"Contact:",-1)),m(" "+d(s.contact_person),1)])):c("",!0),s.contact_phone?(u(),p("div",Ge,[e[24]||(e[24]=t("span",{class:"font-medium"},"Phone:",-1)),m(" "+d(s.contact_phone),1)])):c("",!0),s.delivery_fee>0?(u(),p("div",Ze,[e[25]||(e[25]=t("span",{class:"font-medium"},"Fee:",-1)),m(" "+d(g(s.delivery_fee)),1)])):c("",!0),s.notes?(u(),p("div",et,[e[26]||(e[26]=t("span",{class:"font-medium"},"Notes:",-1)),t("p",tt,d(s.notes),1)])):c("",!0),s.created_at?(u(),p("div",st," Created: "+d(s.created_at),1)):c("",!0),l(k)?c("",!0):(u(),p("div",ot,[o(l(j),{href:a.route("deliveries.show",s.id)},{default:n(()=>[o(l(b),{variant:"outline",size:"sm",class:"w-full"},{default:n(()=>e[27]||(e[27]=[m(" View Delivery Details ")])),_:1,__:[27]})]),_:2},1032,["href"])]))])]))),128))])]),_:1})]),_:1})):c("",!0),i.refundRequests&&i.refundRequests.length?(u(),v(w,{key:1},{default:n(()=>[o(C,null,{default:n(()=>[o($,null,{default:n(()=>e[28]||(e[28]=[m("Refund Requests")])),_:1,__:[28]})]),_:1}),o(P,null,{default:n(()=>[t("div",nt,[(u(!0),p(V,null,A(i.refundRequests,s=>(u(),p("div",{key:s.id,class:"border rounded-md p-3"},[t("div",lt,[t("div",it,d(s.tracking_number),1),t("span",{class:N(["px-2 py-1 rounded-full text-xs font-medium",{"bg-yellow-100 text-yellow-800":s.status==="pending","bg-green-100 text-green-800":s.status==="approved"||s.status==="converted","bg-red-100 text-red-800":s.status==="rejected"}])},d(s.status),3)]),t("div",rt,[s.product_name?(u(),p("div",dt,"Product: "+d(s.product_name),1)):c("",!0),t("div",null,"Qty: "+d(s.quantity),1),t("div",at,"Date: "+d(s.created_at),1),s.status==="rejected"&&s.review_notes?(u(),p("div",ut," Reason: "+d(s.review_notes),1)):c("",!0),s.media_link?(u(),p("div",mt,[t("a",{href:s.media_link,target:"_blank",class:"text-blue-500 underline"},"Media",8,pt)])):c("",!0)])]))),128))])]),_:1})]),_:1})):c("",!0),i.refunds&&i.refunds.length?(u(),v(w,{key:2},{default:n(()=>[o(C,null,{default:n(()=>[o($,null,{default:n(()=>e[29]||(e[29]=[m("Refunds")])),_:1,__:[29]})]),_:1}),o(P,null,{default:n(()=>[t("div",ct,[(u(!0),p(V,null,A(i.refunds,s=>(u(),p("div",{key:s.id,class:"border rounded-md p-3"},[t("div",ft,[t("div",_t,d(s.refund_number),1),t("span",{class:N(["px-2 py-1 rounded-full text-xs font-medium",{"bg-green-100 text-green-800":s.status==="approved"||s.status==="completed","bg-yellow-100 text-yellow-800":s.status==="pending","bg-red-100 text-red-800":s.status==="cancelled"}])},d(s.status),3)]),t("div",vt,[s.product_name?(u(),p("div",yt,"Product: "+d(s.product_name),1)):c("",!0),t("div",null,"Qty: "+d(s.quantity_refunded),1),t("div",null,"Amount: "+d(g(s.refund_amount)),1),t("div",gt,"Date: "+d(s.created_at),1)])]))),128))])]),_:1})]),_:1})):c("",!0),o(w,null,{default:n(()=>[o(C,null,{default:n(()=>[o($,null,{default:n(()=>e[30]||(e[30]=[m("Customer Information")])),_:1,__:[30]})]),_:1}),o(P,null,{default:n(()=>[t("div",xt,[t("div",bt,[o(G,{class:"size-12"},{default:n(()=>[U(i.invoice.customer)?(u(),v(Z,{key:0,src:U(i.invoice.customer),alt:i.invoice.customer.name},null,8,["src","alt"])):(u(),v(ee,{key:1},{default:n(()=>[m(d(T(i.invoice.customer)),1)]),_:1}))]),_:1}),t("div",null,[e[31]||(e[31]=t("label",{class:"text-sm font-medium text-gray-500"},"Name",-1)),t("p",kt,d(i.invoice.customer.name),1)])]),i.invoice.customer.company_name?(u(),p("div",wt,[e[32]||(e[32]=t("label",{class:"text-sm font-medium text-gray-500"},"Company",-1)),t("p",null,d(i.invoice.customer.company_name),1)])):c("",!0),t("div",null,[e[33]||(e[33]=t("label",{class:"text-sm font-medium text-gray-500"},"Email",-1)),t("p",null,d(i.invoice.customer.email),1)]),i.invoice.customer.phone?(u(),p("div",Pt,[e[34]||(e[34]=t("label",{class:"text-sm font-medium text-gray-500"},"Phone",-1)),t("p",null,d(i.invoice.customer.phone),1)])):c("",!0),i.invoice.customer.address?(u(),p("div",Ct,[e[35]||(e[35]=t("label",{class:"text-sm font-medium text-gray-500"},"Address",-1)),t("p",$t,d(i.invoice.customer.address),1)])):c("",!0)])]),_:1})]),_:1}),o(w,null,{default:n(()=>[o(C,null,{default:n(()=>[o($,null,{default:n(()=>e[36]||(e[36]=[m("Created By")])),_:1,__:[36]})]),_:1}),o(P,null,{default:n(()=>[t("div",null,[e[37]||(e[37]=t("label",{class:"text-sm font-medium text-gray-500"},"User",-1)),t("p",null,d(i.invoice.user.name),1)]),t("div",Dt,[e[38]||(e[38]=t("label",{class:"text-sm font-medium text-gray-500"},"Last Updated",-1)),t("p",ht,d(h(i.invoice.updated_at)),1)])]),_:1})]),_:1})])]),i.customers?(u(),v(ge,{key:0,open:D.value,"onUpdate:open":e[1]||(e[1]=s=>D.value=s),invoice:i.invoice,customers:i.customers},null,8,["open","invoice","customers"])):c("",!0)]),_:1}))}});export{ts as default};
