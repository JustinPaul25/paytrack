import{d as U,p as C,f as d,o as n,k as N,l as P,v as z,m as V,s as $,W as g,c as x,w as a,a as i,b as t,u,g as R,S as j,e as c,x as E,y as L,h as y,F as S,r as T,t as f}from"./app-BkHalNTO.js";import{c as W,_ as p}from"./index-gl4GIWPw.js";import{k as Y,_ as q}from"./AppLayout.vue_vue_type_script_setup_true_lang-CNenHwyy.js";import{_ as F,a as M}from"./CardContent.vue_vue_type_script_setup_true_lang-Dycyza_F.js";import{_ as G,a as H}from"./CardTitle.vue_vue_type_script_setup_true_lang-B7TTAUx0.js";import{_ as I}from"./Icon.vue_vue_type_script_setup_true_lang-D-VIRbd_.js";import{S as h}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{T as J}from"./trash-2-CHHOMJcQ.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_0fe2f881_lang-Bcmdzp5l.js";import"./RovingFocusGroup-hNCDy1GI.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-C9T_yUme.js";import"./createLucideIcon-b2VYfB8N.js";import"./VisuallyHidden-B2sC3urC.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-1ljwWgWY.js";import"./chevron-right-DSCzSCrA.js";import"./square-pen-JrbF0RzI.js";import"./calendar-C55Fx5OE.js";import"./check-CozkDIIo.js";import"./chevron-left-uu6mjVgE.js";import"./circle-alert-C4km0GAV.js";import"./piggy-bank-DlOM-ZIQ.js";import"./circle-check-big-ChQV6jCy.js";import"./message-square-Y8OK_O-3.js";import"./trophy-CMvs4Ku0.js";import"./plus-DL5tKTxW.js";import"./clock-Cy7xzsd6.js";import"./dollar-sign-gYj2TyXT.js";import"./eye-off-DSxkQu3i.js";import"./eye-DssUSG1k.js";import"./loader-circle--hdWDkhR.js";import"./map-pin-DtwUBG5m.js";import"./sun-D4OhEu2k.js";import"./printer-1QsdDkDl.js";import"./search-B3gocWyA.js";import"./shopping-bag-DszC2pUR.js";import"./trending-up-C5eGGOFt.js";import"./user-cog-BPd38RVz.js";const K=U({__name:"Badge",props:{variant:{default:"default"},class:{}},setup(k){const m=k,s={default:"bg-primary text-primary-foreground hover:bg-primary/80",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground"},v=C(()=>W("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",s[m.variant],m.class));return(l,w)=>(n(),d("div",{class:P(v.value)},[N(l.$slots,"default")],2))}}),O={class:"flex items-center justify-between mb-6"},Q={class:"flex items-center justify-between mt-4 mb-2"},X={class:"min-w-full divide-y divide-border"},Z={key:0},ee={class:"px-4 py-2 font-medium"},te={class:"px-4 py-2 text-sm text-gray-500"},se={class:"px-4 py-2"},re={class:"flex gap-1"},oe={class:"px-4 py-2 text-sm text-gray-500"},ae={class:"px-4 py-2"},ie={class:"flex gap-2"},ne={key:1},le={colspan:"5",class:"px-4 py-10 text-center text-sm text-gray-500"},ue={key:0,class:"flex items-center justify-between mt-6"},ce={class:"text-sm text-gray-700"},de={class:"flex gap-2"},Ke=U({__name:"Archives",setup(k){const m=z(),s=C(()=>m.props.users),v=C(()=>m.props.filters?m.props.filters:{}),l=V(typeof v.value.search=="string"?v.value.search:""),w=[{title:"Users",href:"/users"},{title:"Archives",href:"/users/archives"}];$(()=>m.props.filters,r=>{if(r){const e=r;l.value=typeof e.search=="string"?e.search:""}},{immediate:!0});let b=null;$(l,r=>{b&&clearTimeout(b),b=setTimeout(()=>{g.get("/users/archives",{search:r},{preserveState:!0,replace:!0})},400)});function B(r){g.get("/users/archives",{search:l.value,page:r},{preserveState:!0,replace:!0})}async function A(r){(await h.fire({title:"Restore User?",text:"Are you sure you want to restore this user?",icon:"question",showCancelButton:!0,confirmButtonColor:"#8f5be8",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, restore user"})).isConfirmed&&g.post(`/users/${r}/restore`,{},{onSuccess:()=>{h.fire({toast:!0,position:"top-end",icon:"success",title:"User restored successfully",showConfirmButton:!1,timer:3e3,timerProgressBar:!0})}})}async function D(r){(await h.fire({title:"Permanently Delete User?",text:"Are you sure you want to permanently delete this user? This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, delete permanently"})).isConfirmed&&g.delete(`/users/${r}/force-delete`,{onSuccess:()=>{h.fire({toast:!0,position:"top-end",icon:"success",title:"User permanently deleted",showConfirmButton:!1,timer:3e3,timerProgressBar:!0})}})}return(r,e)=>(n(),x(q,{breadcrumbs:w},{default:a(()=>[i(u(R),{title:"Archived Users"}),t("div",O,[e[5]||(e[5]=t("h1",{class:"text-2xl font-bold"},"Archived Users",-1)),i(u(j),{href:r.route("users.staff")},{default:a(()=>[i(u(p),{variant:"outline"},{default:a(()=>[i(I,{name:"arrow-left",class:"h-4 w-4 mr-2"}),e[4]||(e[4]=c(" Back to Staff "))]),_:1,__:[4]})]),_:1},8,["href"])]),t("div",Q,[E(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>l.value=o),type:"text",placeholder:"Search archived users by name or email...",class:"rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[L,l.value]])]),i(F,null,{default:a(()=>[i(G,null,{default:a(()=>[i(H,null,{default:a(()=>e[6]||(e[6]=[c("Deleted Users")])),_:1,__:[6]})]),_:1}),i(M,null,{default:a(()=>[t("table",X,[e[10]||(e[10]=t("thead",null,[t("tr",null,[t("th",{class:"px-4 py-2 text-left"},"Name"),t("th",{class:"px-4 py-2 text-left"},"Email"),t("th",{class:"px-4 py-2 text-left"},"Roles"),t("th",{class:"px-4 py-2 text-left"},"Deleted At"),t("th",{class:"px-4 py-2 text-left"},"Actions")])],-1)),s.value.value.data.length?(n(),d("tbody",Z,[(n(!0),d(S,null,T(s.value.value.data,o=>(n(),d("tr",{key:o.id,class:"hover:bg-muted"},[t("td",ee,f(o.name),1),t("td",te,f(o.email),1),t("td",se,[t("div",re,[(n(!0),d(S,null,T(o.roles,_=>(n(),x(u(K),{key:_,variant:"secondary"},{default:a(()=>[c(f(_),1)]),_:2},1024))),128))])]),t("td",oe,f(new Date(o.deleted_at).toLocaleString()),1),t("td",ae,[t("div",ie,[i(u(p),{variant:"ghost",size:"sm",onClick:_=>A(o.id)},{default:a(()=>[i(u(Y),{class:"h-4 w-4 mr-1"}),e[7]||(e[7]=c(" Restore "))]),_:2,__:[7]},1032,["onClick"]),i(u(p),{variant:"ghost",size:"sm",onClick:_=>D(o.id),class:"text-red-600 hover:text-red-700"},{default:a(()=>[i(u(J),{class:"h-4 w-4 mr-1"}),e[8]||(e[8]=c(" Delete Permanently "))]),_:2,__:[8]},1032,["onClick"])])])]))),128))])):(n(),d("tbody",ne,[t("tr",null,[t("td",le,[e[9]||(e[9]=c(" No archived users found. ")),l.value&&l.value.toString().trim().length?(n(),d("button",{key:0,type:"button",class:"underline underline-offset-4 ml-1",onClick:e[1]||(e[1]=o=>l.value="")}," Clear search ")):y("",!0)])])]))]),s.value.value.last_page>1?(n(),d("div",ue,[t("div",ce," Showing "+f(s.value.value.from)+" to "+f(s.value.value.to)+" of "+f(s.value.value.total)+" results ",1),t("div",de,[s.value.value.prev_page_url?(n(),x(u(p),{key:0,variant:"outline",size:"sm",onClick:e[2]||(e[2]=o=>B(s.value.value.current_page-1))},{default:a(()=>e[11]||(e[11]=[c(" Previous ")])),_:1,__:[11]})):y("",!0),s.value.value.next_page_url?(n(),x(u(p),{key:1,variant:"outline",size:"sm",onClick:e[3]||(e[3]=o=>B(s.value.value.current_page+1))},{default:a(()=>e[12]||(e[12]=[c(" Next ")])),_:1,__:[12]})):y("",!0)])])):y("",!0)]),_:1})]),_:1})]),_:1}))}});export{Ke as default};
