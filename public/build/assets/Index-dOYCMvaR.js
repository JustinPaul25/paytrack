import{d as bt,v as yt,p as S,m as F,s as z,W as _t,c as ct,o as b,w as a,a as s,b as t,u as d,g as gt,h as _,e as y,f as U,x as Q,y as G,t as o,F as R,r as V,n as H}from"./app-CrKto25Q.js";import{F as J,e as K,g as X,_ as mt}from"./AppLayout.vue_vue_type_script_setup_true_lang-CKNWY6Mw.js";import{_ as $,a as P}from"./CardContent.vue_vue_type_script_setup_true_lang-DzcSYOUF.js";import{_ as I,a as M}from"./CardTitle.vue_vue_type_script_setup_true_lang-BennipjZ.js";import{_ as Z}from"./index-DuOHn2HM.js";import{_ as O}from"./Select.vue_vue_type_script_setup_true_lang-Cd-W32VW.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_0fdfc5f8_lang-iGDb-D_T.js";import{_ as xt,a as ft,b as N,c as Y}from"./TabsContent.vue_vue_type_script_setup_true_lang-Dia4uhhr.js";import{P as tt}from"./printer-DoBw6BYV.js";import{T as et}from"./trending-up-DmhGbGpk.js";import{_ as vt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useForwardPropsEmits-Bf6VlluX.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DEiOv4M-.js";import"./createLucideIcon-dhjp4BwZ.js";import"./Teleport-CFhB88zU.js";import"./RovingFocusGroup-CaVUWYM1.js";import"./VisuallyHidden-D5iCH1fL.js";import"./x-CU1m96rY.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BKfYc9XQ.js";import"./RovingFocusItem-CdQ5Co9S.js";const ht={class:"no-print flex items-center justify-between mb-6"},wt={class:"flex gap-2"},St={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4"},Tt={key:0},kt={key:1},Dt={key:2},Ct={key:3},At={class:"mb-4 grid grid-cols-3 gap-4"},Ft={class:"bg-blue-50 p-3 rounded"},Rt={class:"text-xl font-bold text-blue-600"},Vt={class:"bg-green-50 p-3 rounded"},$t={class:"text-xl font-bold text-green-600"},Pt={class:"bg-purple-50 p-3 rounded"},It={class:"text-xl font-bold text-purple-600"},Mt={class:"min-w-full border-collapse border border-gray-300"},Ut={class:"border border-gray-300 px-4 py-2"},Nt={class:"border border-gray-300 px-4 py-2"},Yt={class:"border border-gray-300 px-4 py-2 text-right"},jt={class:"border border-gray-300 px-4 py-2 text-right"},Bt={class:"min-w-full border-collapse border border-gray-300"},Ot={class:"border border-gray-300 px-4 py-2"},Et={class:"border border-gray-300 px-4 py-2 text-right"},Lt={class:"border border-gray-300 px-4 py-2 text-right"},qt={class:"min-w-full border-collapse border border-gray-300"},Wt={class:"border border-gray-300 px-4 py-2"},zt={class:"border border-gray-300 px-4 py-2 text-right"},Qt={class:"border border-gray-300 px-4 py-2 text-right"},Gt={class:"bg-gray-100 font-bold"},Ht={class:"border border-gray-300 px-4 py-2 text-right"},Jt={class:"border border-gray-300 px-4 py-2 text-right"},Kt={class:"mb-4 grid grid-cols-4 gap-4"},Xt={class:"bg-blue-50 p-3 rounded"},Zt={class:"text-xl font-bold text-blue-600"},te={class:"bg-yellow-50 p-3 rounded"},ee={class:"text-xl font-bold text-yellow-600"},re={class:"bg-green-50 p-3 rounded"},se={class:"text-xl font-bold text-green-600"},le={class:"bg-red-50 p-3 rounded"},oe={class:"text-xl font-bold text-red-600"},ae={class:"min-w-full border-collapse border border-gray-300"},de={class:"border border-gray-300 px-4 py-2"},ne={class:"border border-gray-300 px-4 py-2"},ie={class:"border border-gray-300 px-4 py-2"},pe={class:"border border-gray-300 px-4 py-2"},ue={class:"border border-gray-300 px-4 py-2"},be={class:"border border-gray-300 px-4 py-2"},ye={class:"border border-gray-300 px-4 py-2"},_e={class:"border border-gray-300 px-4 py-2"},ce={class:"border border-gray-300 px-4 py-2 text-right"},ge={class:"border border-gray-300 px-4 py-2"},me={class:"bg-gray-100 font-bold"},xe={class:"border border-gray-300 px-4 py-2 text-right"},fe={class:"text-sm text-gray-600 mb-4"},ve={class:"min-w-full border-collapse border border-gray-300 text-sm"},he={class:"border border-gray-300 px-4 py-2"},we={class:"border border-gray-300 px-4 py-2"},Se={class:"border border-gray-300 px-4 py-2"},Te={class:"border border-gray-300 px-4 py-2"},ke={class:"border border-gray-300 px-4 py-2 text-right"},De={class:"border border-gray-300 px-4 py-2 text-right"},Ce={class:"border border-gray-300 px-4 py-2"},Ae={class:"border border-gray-300 px-4 py-2"},Fe={class:"border border-gray-300 px-4 py-2"},Re={class:"bg-gray-100 font-bold"},Ve={class:"border border-gray-300 px-4 py-2 text-right"},$e=bt({__name:"Index",setup(Pe){const m=yt(),E={total_sales:0,total_invoices:0,average_order_value:0,sales_by_customer:[],sales_by_month:[]},rt={rows:[],totals:{income:0,expenses:0,net:0}},st={total:0,pending:0,completed:0,cancelled:0,total_fee:0},k=S(()=>{try{const r=m.props.salesReport;return!r||typeof r!="object"||!("total_sales"in r)?E:{total_sales:r.total_sales??0,total_invoices:r.total_invoices??0,average_order_value:r.average_order_value??0,sales_by_customer:Array.isArray(r.sales_by_customer)?r.sales_by_customer:[],sales_by_month:Array.isArray(r.sales_by_month)?r.sales_by_month:[]}}catch{return E}}),j=S(()=>{const r=m.props.transactions;return Array.isArray(r)?r:[]}),D=S(()=>{var e,l,i;const r=m.props.financialReport;return!r||typeof r!="object"?rt:{rows:Array.isArray(r.rows)?r.rows:[],totals:{income:((e=r.totals)==null?void 0:e.income)??0,expenses:((l=r.totals)==null?void 0:l.expenses)??0,net:((i=r.totals)==null?void 0:i.net)??0}}}),lt=S(()=>{const r=m.props.deliveries;return Array.isArray(r)?r:[]}),C=S(()=>{const r=m.props.deliverySummary;return!r||typeof r!="object"?st:{total:r.total??0,pending:r.pending??0,completed:r.completed??0,cancelled:r.cancelled??0,total_fee:r.total_fee??0}}),A=S(()=>m.props.filters?m.props.filters:{}),p=F(A.value.filter_type||"all"),x=F(A.value.filter_month||""),f=F(A.value.filter_year||new Date().getFullYear().toString()),v=F(A.value.start_date||""),h=F(A.value.end_date||"");z(()=>m.props.filters,r=>{if(r){const e=r;p.value=e.filter_type||"all",x.value=e.filter_month||"",f.value=e.filter_year||new Date().getFullYear().toString(),v.value=e.start_date||"",h.value=e.end_date||""}},{immediate:!0});const ot=[{title:"Reports",href:"/reports"}],at=[{value:"all",label:"All Time"},{value:"month",label:"Per Month"},{value:"year",label:"Per Year"},{value:"date_range",label:"Date Range"}],dt=S(()=>{const r=[],e=new Date;for(let l=0;l<12;l++){const i=new Date(e.getFullYear(),e.getMonth()-l,1),c=`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`,g=i.toLocaleDateString("en-US",{year:"numeric",month:"long"});r.push({value:c,label:g})}return r}),nt=S(()=>{const r=[],e=new Date().getFullYear();for(let l=0;l<10;l++){const i=e-l;r.push({value:i.toString(),label:i.toString()})}return r});let B=null;z([p,x,f,v,h],()=>{B&&clearTimeout(B),B=setTimeout(()=>{it()},300)});function it(){const r={};p.value!=="all"&&(r.filter_type=p.value,p.value==="month"&&x.value?r.filter_month=x.value:p.value==="year"&&f.value?r.filter_year=f.value:p.value==="date_range"&&v.value&&h.value&&(r.start_date=v.value,r.end_date=h.value)),_t.get("/reports",r,{preserveState:!0,replace:!0})}function u(r){const e=r??0;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(e)}function pt(){window.print()}function ut(){const r={};p.value!=="all"&&(r.filter_type=p.value,p.value==="month"&&x.value?r.filter_month=x.value:p.value==="year"&&f.value?r.filter_year=f.value:p.value==="date_range"&&v.value&&h.value&&(r.start_date=v.value,r.end_date=h.value));const e=new URLSearchParams(r).toString(),l=`/reports/print-all${e?"?"+e:""}`;window.open(l,"_blank")}return(r,e)=>(b(),ct(mt,{breadcrumbs:ot},{default:a(()=>[s(d(gt),{title:"Reports"}),t("div",ht,[e[7]||(e[7]=t("h1",{class:"text-2xl font-bold"},"Comprehensive Reports",-1)),t("div",wt,[s(d(Z),{onClick:ut,variant:"default"},{default:a(()=>[s(d(tt),{class:"h-4 w-4 mr-2"}),e[5]||(e[5]=_(" Print All Reports "))]),_:1,__:[5]}),s(d(Z),{onClick:pt,variant:"outline"},{default:a(()=>[s(d(tt),{class:"h-4 w-4 mr-2"}),e[6]||(e[6]=_(" Print Current Tab "))]),_:1,__:[6]})])]),s($,{class:"no-print mb-6"},{default:a(()=>[s(I,null,{default:a(()=>[s(M,null,{default:a(()=>e[8]||(e[8]=[_("Filters")])),_:1,__:[8]})]),_:1}),s(P,null,{default:a(()=>[t("div",St,[t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium mb-1"},"Filter Type",-1)),s(d(O),{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=l=>p.value=l),options:at,placeholder:"Select filter",class:"w-full"},null,8,["modelValue"])]),p.value==="month"?(b(),y("div",Tt,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium mb-1"},"Month",-1)),s(d(O),{modelValue:x.value,"onUpdate:modelValue":e[1]||(e[1]=l=>x.value=l),options:dt.value,placeholder:"Select month",class:"w-full"},null,8,["modelValue","options"])])):U("",!0),p.value==="year"?(b(),y("div",kt,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium mb-1"},"Year",-1)),s(d(O),{modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=l=>f.value=l),options:nt.value,placeholder:"Select year",class:"w-full"},null,8,["modelValue","options"])])):U("",!0),p.value==="date_range"?(b(),y("div",Dt,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium mb-1"},"Start Date",-1)),Q(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>v.value=l),type:"date",class:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},null,512),[[G,v.value]])])):U("",!0),p.value==="date_range"?(b(),y("div",Ct,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium mb-1"},"End Date",-1)),Q(t("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>h.value=l),type:"date",class:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},null,512),[[G,h.value]])])):U("",!0)])]),_:1})]),_:1}),s(d(xt),{"default-value":"sales",class:"w-full"},{default:a(()=>[s(d(ft),{class:"grid w-full grid-cols-4 no-print"},{default:a(()=>[s(d(N),{value:"sales"},{default:a(()=>[s(d(et),{class:"h-4 w-4 mr-2"}),e[14]||(e[14]=_(" Sales "))]),_:1,__:[14]}),s(d(N),{value:"financial"},{default:a(()=>[s(d(J),{class:"h-4 w-4 mr-2"}),e[15]||(e[15]=_(" Financial Report "))]),_:1,__:[15]}),s(d(N),{value:"delivery"},{default:a(()=>[s(d(K),{class:"h-4 w-4 mr-2"}),e[16]||(e[16]=_(" Delivery Summary "))]),_:1,__:[16]}),s(d(N),{value:"transactions"},{default:a(()=>[s(d(X),{class:"h-4 w-4 mr-2"}),e[17]||(e[17]=_(" Transactions Report "))]),_:1,__:[17]})]),_:1}),s(d(Y),{value:"sales",class:"print-break"},{default:a(()=>[s($,null,{default:a(()=>[s(I,null,{default:a(()=>[s(M,{class:"flex items-center gap-2"},{default:a(()=>[s(d(et),{class:"h-5 w-5"}),e[18]||(e[18]=_(" Sales Report "))]),_:1,__:[18]})]),_:1}),s(P,null,{default:a(()=>{var l,i,c,g,w;return[t("div",At,[t("div",Ft,[e[19]||(e[19]=t("p",{class:"text-sm text-gray-600"},"Total Sales",-1)),t("p",Rt,o(u((l=k.value)==null?void 0:l.total_sales)),1)]),t("div",Vt,[e[20]||(e[20]=t("p",{class:"text-sm text-gray-600"},"Total Invoices",-1)),t("p",$t,o(((i=k.value)==null?void 0:i.total_invoices)??0),1)]),t("div",Pt,[e[21]||(e[21]=t("p",{class:"text-sm text-gray-600"},"Average Order Value",-1)),t("p",It,o(u((c=k.value)==null?void 0:c.average_order_value)),1)])]),e[24]||(e[24]=t("h3",{class:"font-semibold mb-2"},"Sales by Customer (Top 10)",-1)),t("table",Mt,[e[22]||(e[22]=t("thead",null,[t("tr",{class:"bg-gray-100"},[t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Customer Name"),t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Company"),t("th",{class:"border border-gray-300 px-4 py-2 text-right"},"Total Invoices"),t("th",{class:"border border-gray-300 px-4 py-2 text-right"},"Total Amount")])],-1)),t("tbody",null,[(b(!0),y(R,null,V(((g=k.value)==null?void 0:g.sales_by_customer)||[],n=>(b(),y("tr",{key:n.customer_name,class:"hover:bg-gray-50"},[t("td",Ut,o(n.customer_name),1),t("td",Nt,o(n.company_name||"N/A"),1),t("td",Yt,o(n.total_invoices),1),t("td",jt,o(u(n.total_amount)),1)]))),128))])]),e[25]||(e[25]=t("h3",{class:"font-semibold mb-2 mt-4"},"Sales by Month",-1)),t("table",Bt,[e[23]||(e[23]=t("thead",null,[t("tr",{class:"bg-gray-100"},[t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Month"),t("th",{class:"border border-gray-300 px-4 py-2 text-right"},"Total Sales"),t("th",{class:"border border-gray-300 px-4 py-2 text-right"},"Invoice Count")])],-1)),t("tbody",null,[(b(!0),y(R,null,V(((w=k.value)==null?void 0:w.sales_by_month)||[],n=>(b(),y("tr",{key:n.month,class:"hover:bg-gray-50"},[t("td",Ot,o(n.month),1),t("td",Et,o(u(n.total_sales)),1),t("td",Lt,o(n.invoice_count),1)]))),128))])])]}),_:1,__:[24,25]})]),_:1})]),_:1}),s(d(Y),{value:"financial",class:"print-break"},{default:a(()=>[s($,null,{default:a(()=>[s(I,null,{default:a(()=>[s(M,{class:"flex items-center gap-2"},{default:a(()=>[s(d(J),{class:"h-5 w-5"}),e[26]||(e[26]=_(" Financial Report "))]),_:1,__:[26]})]),_:1}),s(P,null,{default:a(()=>{var l,i,c,g,w,n,L,q,W;return[t("table",qt,[e[28]||(e[28]=t("thead",null,[t("tr",{class:"bg-gray-100"},[t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Month"),t("th",{class:"border border-gray-300 px-4 py-2 text-right"},"Income"),t("th",{class:"border border-gray-300 px-4 py-2 text-right"},"Expenses"),t("th",{class:"border border-gray-300 px-4 py-2 text-right"},"Net")])],-1)),t("tbody",null,[(b(!0),y(R,null,V(((l=D.value)==null?void 0:l.rows)||[],T=>(b(),y("tr",{key:T.month,class:"hover:bg-gray-50"},[t("td",Wt,o(T.month),1),t("td",zt,o(u(T.income)),1),t("td",Qt,o(u(T.expenses)),1),t("td",{class:H(["border border-gray-300 px-4 py-2 text-right",T.net>=0?"text-green-600":"text-red-600"])},o(u(T.net)),3)]))),128))]),t("tfoot",null,[t("tr",Gt,[e[27]||(e[27]=t("td",{class:"border border-gray-300 px-4 py-2"},"Total",-1)),t("td",Ht,o(u((c=(i=D.value)==null?void 0:i.totals)==null?void 0:c.income)),1),t("td",Jt,o(u((w=(g=D.value)==null?void 0:g.totals)==null?void 0:w.expenses)),1),t("td",{class:H(["border border-gray-300 px-4 py-2 text-right",(((L=(n=D.value)==null?void 0:n.totals)==null?void 0:L.net)??0)>=0?"text-green-600":"text-red-600"])},o(u((W=(q=D.value)==null?void 0:q.totals)==null?void 0:W.net)),3)])])])]}),_:1})]),_:1})]),_:1}),s(d(Y),{value:"delivery",class:"print-break"},{default:a(()=>[s($,null,{default:a(()=>[s(I,null,{default:a(()=>[s(M,{class:"flex items-center gap-2"},{default:a(()=>[s(d(K),{class:"h-5 w-5"}),e[29]||(e[29]=_(" Delivery Summary "))]),_:1,__:[29]})]),_:1}),s(P,null,{default:a(()=>{var l,i,c,g,w;return[t("div",Kt,[t("div",Xt,[e[30]||(e[30]=t("p",{class:"text-sm text-gray-600"},"Total Deliveries",-1)),t("p",Zt,o(((l=C.value)==null?void 0:l.total)??0),1)]),t("div",te,[e[31]||(e[31]=t("p",{class:"text-sm text-gray-600"},"Pending",-1)),t("p",ee,o(((i=C.value)==null?void 0:i.pending)??0),1)]),t("div",re,[e[32]||(e[32]=t("p",{class:"text-sm text-gray-600"},"Completed",-1)),t("p",se,o(((c=C.value)==null?void 0:c.completed)??0),1)]),t("div",le,[e[33]||(e[33]=t("p",{class:"text-sm text-gray-600"},"Total Delivery Fees",-1)),t("p",oe,o(u((g=C.value)==null?void 0:g.total_fee)),1)])]),t("table",ae,[e[36]||(e[36]=t("thead",null,[t("tr",{class:"bg-gray-100"},[t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"ID"),t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Customer"),t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Delivery Address"),t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Contact Person"),t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Contact Phone"),t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Delivery Date"),t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Time"),t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Status"),t("th",{class:"border border-gray-300 px-4 py-2 text-right"},"Fee"),t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Invoice #")])],-1)),t("tbody",null,[(b(!0),y(R,null,V(lt.value||[],n=>(b(),y("tr",{key:n.id,class:"hover:bg-gray-50"},[t("td",de,o(n.id),1),t("td",ne,o(n.customer_name),1),t("td",ie,o(n.delivery_address),1),t("td",pe,o(n.contact_person),1),t("td",ue,o(n.contact_phone),1),t("td",be,o(n.delivery_date),1),t("td",ye,o(n.delivery_time),1),t("td",_e,o(n.status),1),t("td",ce,o(u(n.delivery_fee)),1),t("td",ge,o(n.invoice_number),1)]))),128))]),t("tfoot",null,[t("tr",me,[e[34]||(e[34]=t("td",{colspan:"8",class:"border border-gray-300 px-4 py-2 text-right"},"Total Delivery Fees:",-1)),t("td",xe,o(u((w=C.value)==null?void 0:w.total_fee)),1),e[35]||(e[35]=t("td",{class:"border border-gray-300 px-4 py-2"},null,-1))])])])]}),_:1})]),_:1})]),_:1}),s(d(Y),{value:"transactions",class:"print-break"},{default:a(()=>[s($,null,{default:a(()=>[s(I,null,{default:a(()=>[s(M,{class:"flex items-center gap-2"},{default:a(()=>[s(d(X),{class:"h-5 w-5"}),e[37]||(e[37]=_(" Transactions Report "))]),_:1,__:[37]})]),_:1}),s(P,null,{default:a(()=>[t("p",fe,"Total Transactions: "+o((j.value||[]).length),1),t("table",ve,[e[40]||(e[40]=t("thead",null,[t("tr",{class:"bg-gray-100"},[t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Invoice #"),t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Customer"),t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Company"),t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Product"),t("th",{class:"border border-gray-300 px-4 py-2 text-right"},"Quantity"),t("th",{class:"border border-gray-300 px-4 py-2 text-right"},"Amount"),t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Status"),t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Payment Method"),t("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Date")])],-1)),t("tbody",null,[(b(!0),y(R,null,V(j.value||[],l=>(b(),y("tr",{key:l.id,class:"hover:bg-gray-50"},[t("td",he,o(l.invoice_number),1),t("td",we,o(l.customer_name),1),t("td",Se,o(l.company_name||"N/A"),1),t("td",Te,o(l.product_name),1),t("td",ke,o(l.quantity),1),t("td",De,o(u(l.total_amount)),1),t("td",Ce,o(l.status),1),t("td",Ae,o(l.payment_method),1),t("td",Fe,o(l.transaction_date),1)]))),128))]),t("tfoot",null,[t("tr",Re,[e[38]||(e[38]=t("td",{colspan:"5",class:"border border-gray-300 px-4 py-2 text-right"},"Total:",-1)),t("td",Ve,o(u((j.value||[]).reduce((l,i)=>l+(i.total_amount||0),0))),1),e[39]||(e[39]=t("td",{colspan:"3",class:"border border-gray-300 px-4 py-2"},null,-1))])])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),tr=vt($e,[["__scopeId","data-v-9b67889b"]]);export{tr as default};
