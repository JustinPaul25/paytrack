import{d as M,c as P,o as a,w as o,a as l,b as t,e as n,f as h,u as g,g as N,S as B,h as i,F as y,r as p,n as b,t as d,i as v}from"./app-Dsysobr5.js";import{_ as T}from"./AppLayout.vue_vue_type_script_setup_true_lang-DPp2QWhR.js";import{_ as u,a as m}from"./CardContent.vue_vue_type_script_setup_true_lang-CJKFCWMM.js";import{_ as c,a as f}from"./CardTitle.vue_vue_type_script_setup_true_lang-hN6WBOqU.js";import{_ as $}from"./index-b3uWlJkI.js";import{C as F}from"./circle-alert-D9OgN5sl.js";import{C as V}from"./calendar-CJ3OwNkT.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_85568d9b_lang-CUoxO5Iv.js";import"./useForwardPropsEmits-DswLLRGZ.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CdwfwCj8.js";import"./createLucideIcon-Btw9won4.js";import"./Teleport-CO0Lt4b3.js";import"./RovingFocusGroup-V81TNCcL.js";import"./VisuallyHidden-BMMLJr6b.js";import"./x-B6aUyW_M.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CkYgb37L.js";import"./circle-check-CuRLQxni.js";import"./chevron-right-C1rR1IYP.js";const A={class:"flex items-center justify-between mb-6"},O={key:0,class:"mb-6"},j={class:"space-y-3"},z={class:"flex items-start justify-between gap-4"},D={class:"flex-1"},H={class:"flex items-center gap-2 mb-2"},I={class:"font-semibold text-gray-900 dark:text-gray-100"},q={class:"text-sm text-gray-600 dark:text-gray-400 mb-3"},E={class:"flex flex-wrap items-center gap-4 text-sm"},L={class:"flex items-center gap-1.5"},Q={class:"font-semibold text-gray-900 dark:text-gray-100"},R={class:"flex items-center gap-1.5"},G={class:"text-gray-600 dark:text-gray-400"},J={key:0,class:"text-gray-500 dark:text-gray-400"},K={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},W={class:"space-y-2"},X={key:0,class:"text-sm text-muted-foreground"},Y={class:"w-24 text-xs text-muted-foreground"},Z={class:"flex-1 h-2 rounded bg-muted overflow-hidden"},U={class:"w-24 text-right text-sm"},tt={class:"grid grid-cols-3 gap-4 text-center"},et={class:"text-2xl font-bold"},st={class:"text-2xl font-bold"},lt={class:"text-2xl font-bold"},ot={class:"min-w-full divide-y divide-border"},rt={class:"px-4 py-2"},dt={class:"px-4 py-2 text-right"},at={key:0},nt={class:"space-y-2"},it={key:0,class:"text-sm text-muted-foreground"},ut={class:"w-40 text-xs text-muted-foreground truncate"},mt={class:"flex-1 h-2 rounded bg-muted overflow-hidden"},ct={class:"w-24 text-right text-sm"},ft={class:"space-y-2"},_t={key:0,class:"text-sm text-muted-foreground"},gt={class:"w-24 text-xs text-muted-foreground"},yt={class:"flex-1 h-2 rounded bg-muted overflow-hidden"},pt={class:"w-24 text-right text-sm"},zt=M({__name:"CustomerDashboard",props:{customer:{},monthlySpend:{},statusBreakdown:{},topProducts:{},categorySpend:{},aovTrend:{},reminders:{}},setup(xt){function x(e){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(e)}function k(e){switch(e){case"high":return"border-l-4 border-l-red-500 bg-red-50 dark:bg-red-950/20";case"medium":return"border-l-4 border-l-yellow-500 bg-yellow-50 dark:bg-yellow-950/20";case"low":return"border-l-4 border-l-blue-500 bg-blue-50 dark:bg-blue-950/20";default:return"border-l-4 border-l-gray-500 bg-gray-50 dark:bg-gray-950/20"}}function w(e){return e.charAt(0).toUpperCase()+e.slice(1)}function C(e){return e<0?`Overdue by ${Math.abs(e)} day(s)`:e===0?"Due today":`Due in ${e} day(s)`}function S(e){return e<0?"text-red-600 dark:text-red-400 font-semibold":e===0?"text-orange-600 dark:text-orange-400 font-semibold":e<=3?"text-yellow-600 dark:text-yellow-400 font-semibold":"text-blue-600 dark:text-blue-400"}return(e,r)=>(a(),P(T,null,{default:o(()=>[l(g(N),{title:"My Dashboard"}),t("div",A,[r[1]||(r[1]=t("h1",{class:"text-2xl font-bold"},"My Dashboard",-1)),l(g(B),{href:e.route("orders.create")},{default:o(()=>[l(g($),{variant:"default"},{default:o(()=>r[0]||(r[0]=[t("span",{class:"mr-2"},"+",-1),i(" Create Order ")])),_:1,__:[0]})]),_:1},8,["href"])]),e.reminders&&e.reminders.length>0?(a(),n("div",O,[l(u,null,{default:o(()=>[l(c,null,{default:o(()=>[l(f,{class:"flex items-center gap-2"},{default:o(()=>[l(g(F),{class:"w-5 h-5 text-orange-500"}),r[2]||(r[2]=i(" Payment Reminders "))]),_:1,__:[2]})]),_:1}),l(m,null,{default:o(()=>[t("div",j,[(a(!0),n(y,null,p(e.reminders,s=>(a(),n("div",{key:s.id,class:b(["p-4 rounded-lg",k(s.priority)])},[t("div",z,[t("div",D,[t("div",H,[t("h3",I,d(s.title),1),t("span",{class:b(["px-2 py-1 text-xs rounded-full",s.priority==="high"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":s.priority==="medium"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"])},d(w(s.priority)),3)]),t("p",q,d(s.description),1),t("div",E,[t("div",L,[t("span",Q,d(x(s.amount)),1)]),t("div",R,[l(g(V),{class:"w-4 h-4 text-gray-500"}),t("span",G,d(s.due_date_formatted),1)]),t("div",null,[t("span",{class:b(S(s.days_until_due))},d(C(s.days_until_due)),3)]),s.invoice_reference?(a(),n("div",J," Invoice: "+d(s.invoice_reference),1)):h("",!0)])])])],2))),128))])]),_:1})]),_:1})])):h("",!0),t("div",K,[l(u,null,{default:o(()=>[l(c,null,{default:o(()=>[l(f,null,{default:o(()=>r[3]||(r[3]=[i("Monthly spend (last 12 months)")])),_:1,__:[3]})]),_:1}),l(m,null,{default:o(()=>[t("div",W,[e.monthlySpend.length===0?(a(),n("div",X," No data yet. ")):(a(!0),n(y,{key:1},p(e.monthlySpend,s=>(a(),n("div",{key:s.month,class:"flex items-center gap-3"},[t("div",Y,d(s.month),1),t("div",Z,[t("div",{class:"h-2 bg-primary",style:v({width:Math.min(100,Math.round(s.total/(Math.max(...e.monthlySpend.map(_=>_.total))||1)*100))+"%"})},null,4)]),t("div",U,d(x(s.total)),1)]))),128))])]),_:1})]),_:1}),l(u,null,{default:o(()=>[l(c,null,{default:o(()=>[l(f,null,{default:o(()=>r[4]||(r[4]=[i("Order status")])),_:1,__:[4]})]),_:1}),l(m,null,{default:o(()=>[t("div",tt,[t("div",null,[t("div",et,d(e.statusBreakdown.paid),1),r[5]||(r[5]=t("div",{class:"text-xs text-muted-foreground"},"Paid",-1))]),t("div",null,[t("div",st,d(e.statusBreakdown.pending),1),r[6]||(r[6]=t("div",{class:"text-xs text-muted-foreground"},"Pending",-1))]),t("div",null,[t("div",lt,d(e.statusBreakdown.cancelled),1),r[7]||(r[7]=t("div",{class:"text-xs text-muted-foreground"},"Cancelled",-1))])])]),_:1})]),_:1}),l(u,null,{default:o(()=>[l(c,null,{default:o(()=>[l(f,null,{default:o(()=>r[8]||(r[8]=[i("Top products purchased")])),_:1,__:[8]})]),_:1}),l(m,null,{default:o(()=>[t("table",ot,[r[10]||(r[10]=t("thead",null,[t("tr",null,[t("th",{class:"px-4 py-2 text-left"},"Product"),t("th",{class:"px-4 py-2 text-right"},"Qty")])],-1)),t("tbody",null,[(a(!0),n(y,null,p(e.topProducts,s=>(a(),n("tr",{key:s.id,class:"hover:bg-muted"},[t("td",rt,d(s.name),1),t("td",dt,d(s.total_quantity),1)]))),128)),e.topProducts.length===0?(a(),n("tr",at,r[9]||(r[9]=[t("td",{colspan:"2",class:"px-4 py-4 text-sm text-muted-foreground text-center"},"No purchases yet.",-1)]))):h("",!0)])])]),_:1})]),_:1}),l(u,null,{default:o(()=>[l(c,null,{default:o(()=>[l(f,null,{default:o(()=>r[11]||(r[11]=[i("Spend by category")])),_:1,__:[11]})]),_:1}),l(m,null,{default:o(()=>[t("div",nt,[e.categorySpend.length===0?(a(),n("div",it," No spend yet. ")):(a(!0),n(y,{key:1},p(e.categorySpend,s=>(a(),n("div",{key:s.category,class:"flex items-center gap-3"},[t("div",ut,d(s.category),1),t("div",mt,[t("div",{class:"h-2 bg-primary/70",style:v({width:Math.min(100,Math.round(s.total/(Math.max(...e.categorySpend.map(_=>_.total))||1)*100))+"%"})},null,4)]),t("div",ct,d(x(s.total)),1)]))),128))])]),_:1})]),_:1}),l(u,{class:"lg:col-span-2"},{default:o(()=>[l(c,null,{default:o(()=>[l(f,null,{default:o(()=>r[12]||(r[12]=[i("Average order value (monthly)")])),_:1,__:[12]})]),_:1}),l(m,null,{default:o(()=>[t("div",ft,[e.aovTrend.length===0?(a(),n("div",_t," No data yet. ")):(a(!0),n(y,{key:1},p(e.aovTrend,s=>(a(),n("div",{key:s.month,class:"flex items-center gap-3"},[t("div",gt,d(s.month),1),t("div",yt,[t("div",{class:"h-2 bg-emerald-500",style:v({width:Math.min(100,Math.round(s.aov/(Math.max(...e.aovTrend.map(_=>_.aov))||1)*100))+"%"})},null,4)]),t("div",pt,d(x(s.aov)),1)]))),128))])]),_:1})]),_:1})])]),_:1}))}});export{zt as default};
