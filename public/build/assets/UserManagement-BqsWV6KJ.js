import{d as F,v as P,m as b,s as B,W as c,c as w,o as u,w as i,a as o,b as e,u as a,g as j,h as v,S as T,x as C,y as R,D as W,E as Y,e as x,f as y,F as q,r as G,t as d,n as M}from"./app-qA0CnBWe.js";import{_ as g}from"./index-DKsLgjKN.js";import{_ as H}from"./AppLayout.vue_vue_type_script_setup_true_lang-BLollNnU.js";import{_ as $,a as S}from"./CardContent.vue_vue_type_script_setup_true_lang-DFxNC8fq.js";import{_ as I,a as J}from"./CardTitle.vue_vue_type_script_setup_true_lang-PsohhGio.js";import{_}from"./Icon.vue_vue_type_script_setup_true_lang-AIhq6K5q.js";import{S as U}from"./sweetalert2.esm.all-BQIkj5Wb.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_85568d9b_lang-C02RUasq.js";import"./useForwardPropsEmits-CwUzb49y.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CLRWpV5h.js";import"./Teleport-DIfWgdf9.js";import"./RovingFocusGroup-gU1KHB92.js";import"./VisuallyHidden-qt70HzaR.js";import"./DialogPortal-BX8gIO6T.js";import"./x-Da1o-ysX.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B1dhHsl6.js";import"./chevron-down-CCBk2xD7.js";import"./chevron-right-r24-WVSv.js";import"./square-pen-DjRAZ5Qq.js";import"./calendar-BJTiP8we.js";import"./check-BujOPtAl.js";import"./chevron-left-BeUk50d8.js";import"./circle-alert-CD7TZ1Am.js";import"./piggy-bank-C7_yl6Hw.js";import"./circle-check-big-DF-vhMGd.js";import"./circle-check-B9DMRNBp.js";import"./trophy-BBHIiUlf.js";import"./circle-x-DdhefOoK.js";import"./clock-CiNhGBx2.js";import"./dollar-sign-CbfZVek1.js";import"./eye-off-9QebG7yy.js";import"./eye-5KKko-8Q.js";import"./loader-circle-Bl4Hr2SU.js";import"./mail-Dyt5iSRM.js";import"./map-pin-kt4sBBgF.js";import"./message-square-BrTcst4h.js";import"./sun-Biu9FB4q.js";import"./plus-CBc_0-HC.js";import"./printer-I2tYkTYc.js";import"./search-CKYqMlw5.js";import"./shopping-bag-CF7dcyya.js";import"./trash-2-DM0kfT8T.js";import"./trending-up-CsAZ24Wd.js";const K={class:"flex flex-col gap-4"},O={class:"flex flex-wrap gap-4"},Q={class:"flex items-end"},X={class:"flex items-center gap-2 cursor-pointer"},Z={class:"overflow-x-auto"},ee={class:"min-w-full divide-y divide-border"},te={key:0,class:"bg-white divide-y divide-border"},se={class:"px-4 py-3 whitespace-nowrap font-medium"},re={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-500"},oe={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-500"},ae={class:"px-4 py-3 whitespace-nowrap"},ie={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-500"},le={class:"px-4 py-3 whitespace-nowrap"},ne={class:"px-4 py-3 whitespace-nowrap text-sm"},ue={class:"flex gap-2"},pe={key:1},de={colspan:"7",class:"px-4 py-10 text-center text-sm text-gray-500"},me={key:0,class:"flex items-center justify-between mt-6"},fe={class:"text-sm text-gray-700"},ce={class:"flex gap-2"},at=F({__name:"UserManagement",setup(xe){const l=P(),f=b(l.props.filters?l.props.filters:{}),n=b(typeof f.value.search=="string"?f.value.search:""),p=b(typeof f.value.verification_status=="string"?f.value.verification_status:""),m=b(typeof f.value.archived=="boolean"?f.value.archived:!1),N=[{title:"Admin",href:"#"},{title:"User Management",href:"/admin/users"}];let h=null;B(n,s=>{h&&clearTimeout(h),h=setTimeout(()=>{k()},400)}),B([p,m],()=>{k()});function k(){const s={};n.value&&(s.search=n.value),p.value&&(s.verification_status=p.value),m.value&&(s.archived="1"),c.get("/admin/users",s,{preserveState:!0,replace:!0})}function V(s){const t={page:s};n.value&&(t.search=n.value),p.value&&(t.verification_status=p.value),m.value&&(t.archived="1"),c.get("/admin/users",t,{preserveState:!0,replace:!0})}async function z(s){(await U.fire({title:"Delete User?",text:`Are you sure you want to delete this ${s.type}? This action cannot be undone.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#8f5be8",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete"})).isConfirmed&&(s.type==="staff"?c.delete(`/users/${s.id}`,{onSuccess:()=>{U.fire("User deleted","User deleted successfully.","success")}}):c.delete(`/customers/${s.id}`,{onSuccess:()=>{U.fire("Customer deleted","Customer deleted successfully.","success")}}))}function A(s){switch(s.toLowerCase()){case"admin":return"bg-purple-100 text-purple-800";case"staff":return"bg-blue-100 text-blue-800";case"customer":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}}function L(s){switch(s.toLowerCase()){case"verified":return"bg-green-100 text-green-800";case"unverified":return"bg-yellow-100 text-yellow-800";case"active":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}}function D(s){s.type==="staff"?c.visit(`/users/${s.id}/edit`):c.visit(`/customers/${s.id}/edit?from=users`)}return(s,t)=>(u(),w(H,{breadcrumbs:N},{default:i(()=>[o(a(j),{title:"User Management"}),t[17]||(t[17]=e("div",{class:"flex items-center justify-between mb-6"},[e("h1",{class:"text-2xl font-bold"},"User Management")],-1)),o($,{class:"mb-4"},{default:i(()=>[o(I,null,{default:i(()=>[o(J,{class:"flex items-center gap-2"},{default:i(()=>[o(_,{name:"file-text",class:"h-5 w-5"}),t[6]||(t[6]=v(" Customer Activity Logs "))]),_:1,__:[6]})]),_:1}),o(S,null,{default:i(()=>[t[8]||(t[8]=e("p",{class:"text-sm text-muted-foreground mb-4"}," View and track all customer-related activities, including registrations, updates, verifications, and more. ",-1)),o(a(T),{href:s.route("customers.logs.index")},{default:i(()=>[o(a(g),{variant:"default"},{default:i(()=>[o(_,{name:"file-text",class:"h-4 w-4 mr-2"}),t[7]||(t[7]=v(" View Customer Logs "))]),_:1,__:[7]})]),_:1},8,["href"])]),_:1,__:[8]})]),_:1}),o($,{class:"mb-4"},{default:i(()=>[o(S,{class:"pt-6"},{default:i(()=>[e("div",K,[e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium mb-2"},"Search",-1)),C(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>n.value=r),type:"text",placeholder:"Search by name, email, company, or phone...",class:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[R,n.value]])]),e("div",O,[e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium mb-2"},"Customer Verification",-1)),C(e("select",{"onUpdate:modelValue":t[1]||(t[1]=r=>p.value=r),class:"rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},t[10]||(t[10]=[e("option",{value:""},"All Customers",-1),e("option",{value:"verified"},"Verified Customers",-1),e("option",{value:"unverified"},"Unverified Customers",-1)]),512),[[W,p.value]])]),e("div",Q,[e("label",X,[C(e("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>m.value=r),type:"checkbox",class:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"},null,512),[[Y,m.value]]),t[12]||(t[12]=e("span",{class:"text-sm font-medium"},"Show Archived",-1))])])])])]),_:1})]),_:1}),o($,null,{default:i(()=>[o(S,null,{default:i(()=>[e("div",Z,[e("table",ee,[t[14]||(t[14]=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Name"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Company"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Email"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"User Role"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Phone"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),a(l).props.users.data.length?(u(),x("tbody",te,[(u(!0),x(q,null,G(a(l).props.users.data,r=>(u(),x("tr",{key:`${r.type}-${r.id}`,class:"hover:bg-muted"},[e("td",se,d(r.name),1),e("td",re,d(r.company||"-"),1),e("td",oe,d(r.email),1),e("td",ae,[e("span",{class:M(["px-2 py-1 text-xs font-semibold rounded",A(r.user_role)])},d(r.user_role),3)]),e("td",ie,d(r.phone||"-"),1),e("td",le,[e("span",{class:M(["px-2 py-1 text-xs font-semibold rounded",L(r.status)])},d(r.status),3)]),e("td",ne,[e("div",ue,[r.type==="customer"?(u(),w(a(T),{key:0,href:s.route("customers.logs.show",r.id)},{default:i(()=>[o(a(g),{variant:"ghost",size:"sm",title:"View Logs"},{default:i(()=>[o(_,{name:"file-text",class:"h-4 w-4"})]),_:1})]),_:2},1032,["href"])):y("",!0),o(a(g),{variant:"ghost",size:"sm",onClick:E=>D(r)},{default:i(()=>[o(_,{name:"edit",class:"h-4 w-4"})]),_:2},1032,["onClick"]),o(a(g),{variant:"ghost",size:"sm",onClick:E=>z(r)},{default:i(()=>[o(_,{name:"trash",class:"h-4 w-4"})]),_:2},1032,["onClick"])])])]))),128))])):(u(),x("tbody",pe,[e("tr",null,[e("td",de,[t[13]||(t[13]=v(" No users found. ")),n.value&&n.value.toString().trim().length||p.value||m.value?(u(),x("button",{key:0,type:"button",class:"underline underline-offset-4 ml-1",onClick:t[3]||(t[3]=r=>{n.value="",p.value="",m.value=!1,k()})}," Clear filters ")):y("",!0)])])]))])]),a(l).props.users.last_page>1?(u(),x("div",me,[e("div",fe," Showing "+d(a(l).props.users.from)+" to "+d(a(l).props.users.to)+" of "+d(a(l).props.users.total)+" results ",1),e("div",ce,[a(l).props.users.prev_page_url?(u(),w(a(g),{key:0,variant:"outline",size:"sm",onClick:t[4]||(t[4]=r=>V(a(l).props.users.current_page-1))},{default:i(()=>t[15]||(t[15]=[v(" Previous ")])),_:1,__:[15]})):y("",!0),a(l).props.users.next_page_url?(u(),w(a(g),{key:1,variant:"outline",size:"sm",onClick:t[5]||(t[5]=r=>V(a(l).props.users.current_page+1))},{default:i(()=>t[16]||(t[16]=[v(" Next ")])),_:1,__:[16]})):y("",!0)])])):y("",!0)]),_:1})]),_:1})]),_:1,__:[17]}))}});export{at as default};
