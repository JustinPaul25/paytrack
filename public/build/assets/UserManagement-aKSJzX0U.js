import{d as P,v as j,m as b,s as V,W as v,c as w,o as u,w as o,a as i,b as t,u as a,g as E,h as x,S as B,x as T,y as R,D as W,e as g,f as y,F as Y,r as q,t as d,n as z}from"./app-BJGGIgA8.js";import{_ as f}from"./index-riohrRak.js";import{_ as G}from"./AppLayout.vue_vue_type_script_setup_true_lang-6OmCq4tp.js";import{_ as C,a as $}from"./CardContent.vue_vue_type_script_setup_true_lang-DPB8yWHX.js";import{_ as H,a as I}from"./CardTitle.vue_vue_type_script_setup_true_lang-DvxTgNYv.js";import{_}from"./Icon.vue_vue_type_script_setup_true_lang-DK3Ddpru.js";import{S}from"./sweetalert2.esm.all-BQIkj5Wb.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_85568d9b_lang-CX_goT8l.js";import"./useForwardPropsEmits-CZzI8B5e.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-MrJHOVsW.js";import"./Teleport-MSIji786.js";import"./RovingFocusGroup-gSG5KO_4.js";import"./VisuallyHidden-BC0AEIfW.js";import"./DialogPortal-Dpb7jdpY.js";import"./x-BjkU5bBK.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DSD56j4j.js";import"./chevron-down-B83M1Caq.js";import"./chevron-right-CjvrEjDl.js";import"./square-pen-BALro00M.js";import"./calendar-C8vvPkHy.js";import"./check-CuaqBRk8.js";import"./chevron-left-Czs0_KEi.js";import"./circle-alert-C-R8aAcF.js";import"./piggy-bank-DQw4-LKJ.js";import"./circle-check-big-gvrLbzHW.js";import"./circle-check-BuF8fqTY.js";import"./trophy-B5vnFol2.js";import"./circle-x-C9HF6h3m.js";import"./clock-CUJ54ABb.js";import"./dollar-sign-BFWObhvv.js";import"./eye-off-dgfcsi04.js";import"./eye-BztToSRT.js";import"./loader-circle-ZvNwhMCX.js";import"./mail-tmHC_MiF.js";import"./map-pin-D8FvW8n7.js";import"./message-square-Cf895NaZ.js";import"./sun-Bomsfx5Q.js";import"./plus-CntaVqKq.js";import"./printer-_fQTJVRW.js";import"./search-BUl39vHB.js";import"./shopping-bag-DsL7THBq.js";import"./trash-2-DcMzLwyY.js";import"./trending-up-CSTqz3kz.js";const J={class:"flex flex-col gap-4"},K={class:"flex flex-wrap gap-4"},O={class:"flex items-end"},Q={class:"overflow-x-auto"},X={class:"min-w-full divide-y divide-border"},Z={key:0,class:"bg-white divide-y divide-border"},ee={class:"px-4 py-3 whitespace-nowrap font-medium"},te={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-500"},se={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-500"},re={class:"px-4 py-3 whitespace-nowrap"},ie={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-500"},ae={class:"px-4 py-3 whitespace-nowrap"},oe={class:"px-4 py-3 whitespace-nowrap text-sm"},le={class:"flex gap-2"},ne={key:1},ue={colspan:"7",class:"px-4 py-10 text-center text-sm text-gray-500"},pe={key:0,class:"flex items-center justify-between mt-6"},de={class:"text-sm text-gray-700"},me={class:"flex gap-2"},rt=P({__name:"UserManagement",setup(fe){const l=j(),c=b(l.props.filters?l.props.filters:{}),n=b(typeof c.value.search=="string"?c.value.search:""),p=b(typeof c.value.verification_status=="string"?c.value.verification_status:""),m=b(typeof c.value.archived=="boolean"?c.value.archived:!1),N=[{title:"Admin",href:"#"},{title:"User Management",href:"/admin/users"}];let h=null;V(n,s=>{h&&clearTimeout(h),h=setTimeout(()=>{k()},400)}),V([p,m],()=>{k()});function k(){const s={};n.value&&(s.search=n.value),p.value&&(s.verification_status=p.value),m.value&&(s.archived="1"),v.get("/admin/users",s,{preserveState:!0,replace:!0})}function U(s){const e={page:s};n.value&&(e.search=n.value),p.value&&(e.verification_status=p.value),m.value&&(e.archived="1"),v.get("/admin/users",e,{preserveState:!0,replace:!0})}async function A(s){(await S.fire({title:"Delete User?",text:`Are you sure you want to delete this ${s.type}? This action cannot be undone.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#8f5be8",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete"})).isConfirmed&&(s.type==="staff"?v.delete(`/users/${s.id}`,{onSuccess:()=>{S.fire("User deleted","User deleted successfully.","success")}}):v.delete(`/customers/${s.id}`,{onSuccess:()=>{S.fire("Customer deleted","Customer deleted successfully.","success")}}))}function L(s){switch(s.toLowerCase()){case"admin":return"bg-purple-100 text-purple-800";case"staff":return"bg-blue-100 text-blue-800";case"customer":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}}function M(s){switch(s.toLowerCase()){case"verified":return"bg-green-100 text-green-800";case"unverified":return"bg-yellow-100 text-yellow-800";case"active":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}}function D(s){s.type==="staff"?v.visit(`/users/${s.id}/edit`):v.visit(`/customers/${s.id}?from=users`)}return(s,e)=>(u(),w(G,{breadcrumbs:N},{default:o(()=>[i(a(E),{title:"User Management"}),e[17]||(e[17]=t("div",{class:"flex items-center justify-between mb-6"},[t("h1",{class:"text-2xl font-bold"},"User Management")],-1)),i(C,{class:"mb-4"},{default:o(()=>[i(H,null,{default:o(()=>[i(I,{class:"flex items-center gap-2"},{default:o(()=>[i(_,{name:"file-text",class:"h-5 w-5"}),e[6]||(e[6]=x(" Customer Activity Logs "))]),_:1,__:[6]})]),_:1}),i($,null,{default:o(()=>[e[8]||(e[8]=t("p",{class:"text-sm text-muted-foreground mb-4"}," View and track all customer-related activities, including registrations, updates, verifications, and more. ",-1)),i(a(B),{href:s.route("customers.logs.index")},{default:o(()=>[i(a(f),{variant:"default"},{default:o(()=>[i(_,{name:"file-text",class:"h-4 w-4 mr-2"}),e[7]||(e[7]=x(" View Customer Logs "))]),_:1,__:[7]})]),_:1},8,["href"])]),_:1,__:[8]})]),_:1}),i(C,{class:"mb-4"},{default:o(()=>[i($,{class:"pt-6"},{default:o(()=>[t("div",J,[t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium mb-2"},"Search",-1)),T(t("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>n.value=r),type:"text",placeholder:"Search by name, email, company, or phone...",class:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[R,n.value]])]),t("div",K,[t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium mb-2"},"Customer Verification",-1)),T(t("select",{"onUpdate:modelValue":e[1]||(e[1]=r=>p.value=r),class:"rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},e[10]||(e[10]=[t("option",{value:""},"All Customers",-1),t("option",{value:"verified"},"Verified Customers",-1),t("option",{value:"unverified"},"Unverified Customers",-1)]),512),[[W,p.value]])]),t("div",O,[i(a(f),{variant:m.value?"default":"outline",size:"default",onClick:e[2]||(e[2]=r=>m.value=!m.value)},{default:o(()=>e[12]||(e[12]=[x(" Show Archived ")])),_:1,__:[12]},8,["variant"])])])])]),_:1})]),_:1}),i(C,null,{default:o(()=>[i($,null,{default:o(()=>[t("div",Q,[t("table",X,[e[14]||(e[14]=t("thead",null,[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Name"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Company"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Email"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"User Role"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Phone"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),a(l).props.users.data.length?(u(),g("tbody",Z,[(u(!0),g(Y,null,q(a(l).props.users.data,r=>(u(),g("tr",{key:`${r.type}-${r.id}`,class:"hover:bg-muted"},[t("td",ee,d(r.name),1),t("td",te,d(r.company||"-"),1),t("td",se,d(r.email),1),t("td",re,[t("span",{class:z(["px-2 py-1 text-xs font-semibold rounded",L(r.user_role)])},d(r.user_role),3)]),t("td",ie,d(r.phone||"-"),1),t("td",ae,[t("span",{class:z(["px-2 py-1 text-xs font-semibold rounded",M(r.status)])},d(r.status),3)]),t("td",oe,[t("div",le,[r.type==="customer"?(u(),w(a(B),{key:0,href:s.route("customers.logs.show",r.id)},{default:o(()=>[i(a(f),{variant:"ghost",size:"sm",title:"View Logs"},{default:o(()=>[i(_,{name:"file-text",class:"h-4 w-4"})]),_:1})]),_:2},1032,["href"])):y("",!0),i(a(f),{variant:"ghost",size:"sm",onClick:F=>D(r),title:"View"},{default:o(()=>[i(_,{name:"eye",class:"h-4 w-4"})]),_:2},1032,["onClick"]),i(a(f),{variant:"ghost",size:"sm",onClick:F=>A(r)},{default:o(()=>[i(_,{name:"trash",class:"h-4 w-4"})]),_:2},1032,["onClick"])])])]))),128))])):(u(),g("tbody",ne,[t("tr",null,[t("td",ue,[e[13]||(e[13]=x(" No users found. ")),n.value&&n.value.toString().trim().length||p.value||m.value?(u(),g("button",{key:0,type:"button",class:"underline underline-offset-4 ml-1",onClick:e[3]||(e[3]=r=>{n.value="",p.value="",m.value=!1,k()})}," Clear filters ")):y("",!0)])])]))])]),a(l).props.users.last_page>1?(u(),g("div",pe,[t("div",de," Showing "+d(a(l).props.users.from)+" to "+d(a(l).props.users.to)+" of "+d(a(l).props.users.total)+" results ",1),t("div",me,[a(l).props.users.prev_page_url?(u(),w(a(f),{key:0,variant:"outline",size:"sm",onClick:e[4]||(e[4]=r=>U(a(l).props.users.current_page-1))},{default:o(()=>e[15]||(e[15]=[x(" Previous ")])),_:1,__:[15]})):y("",!0),a(l).props.users.next_page_url?(u(),w(a(f),{key:1,variant:"outline",size:"sm",onClick:e[5]||(e[5]=r=>U(a(l).props.users.current_page+1))},{default:o(()=>e[16]||(e[16]=[x(" Next ")])),_:1,__:[16]})):y("",!0)])])):y("",!0)]),_:1})]),_:1})]),_:1,__:[17]}))}});export{rt as default};
