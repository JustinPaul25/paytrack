import{d as h,x as w,g as N,o as I,e as t,b as o,w as r,f as m,u as a,m as S,v as F,l as $,s as D,t as j,q as L}from"./app-WiUpeBwz.js";import{_ as u}from"./InputError.vue_vue_type_script_setup_true_lang--EdPhFmS.js";import{_ as i}from"./Label.vue_vue_type_script_setup_true_lang-CyKS2_tF.js";import{_ as f}from"./Input.vue_vue_type_script_setup_true_lang-cNK_ZO_F.js";import{_ as k}from"./index-Cn_g6VzM.js";import{_ as q}from"./CardFooter.vue_vue_type_script_setup_true_lang-BpozAbEV.js";import{L as B}from"./LocationInput-Dn04C2y5.js";const P={class:"flex gap-4"},E={class:"flex-1"},M={class:"flex gap-4"},O={class:"flex-1"},T={class:"flex gap-4"},A={class:"flex-1"},J={class:"flex gap-4"},z={class:"flex-1"},G={class:"flex gap-4"},H={class:"flex-1"},K={class:"flex gap-4"},Q={class:"flex-1"},R={class:"flex gap-4"},W={class:"flex-1"},X={key:0,class:"mt-2"},Y=["src"],re=h({__name:"Form",props:{customer:Object,profileImageUrl:String},setup(p){var _,c,g,x,v,y;const n=p,U=()=>{var d;if((d=n.customer)!=null&&d.location){const e=n.customer.location;if(typeof e=="string")try{return JSON.parse(e)}catch{return{lat:0,lng:0}}else if(typeof e=="object"&&e!==null){const l=parseFloat(e.lat),V=parseFloat(e.lng);if(!isNaN(l)&&!isNaN(V))return{lat:l,lng:V}}}return{lat:0,lng:0}},s=w({name:((_=n.customer)==null?void 0:_.name)||"",company_name:((c=n.customer)==null?void 0:c.company_name)||"",email:((g=n.customer)==null?void 0:g.email)||"",phone:((x=n.customer)==null?void 0:x.phone)||"",address:((v=n.customer)==null?void 0:v.address)||"",profile_image:null,customerId:((y=n.customer)==null?void 0:y.id)||null,location:U()});function C(d){const e=d.target;e.files&&e.files.length>0?s.profile_image=e.files[0]:s.profile_image=null}function b(){s.customerId?s.post(route("customers.update",s.customerId),{forceFormData:!0,onSuccess:()=>s.reset("profile_image")}):s.post(route("customers.store"),{forceFormData:!0,onSuccess:()=>s.reset("profile_image")})}return(d,e)=>(I(),N("form",{onSubmit:L(b,["prevent"]),class:"space-y-6",enctype:"multipart/form-data"},[t("div",P,[t("div",E,[o(i,{for:"name"},{default:r(()=>e[6]||(e[6]=[m("Name")])),_:1,__:[6]}),o(f,{id:"name",modelValue:a(s).name,"onUpdate:modelValue":e[0]||(e[0]=l=>a(s).name=l),required:""},null,8,["modelValue"]),o(u,{message:a(s).errors.name},null,8,["message"])])]),t("div",M,[t("div",O,[o(i,{for:"company_name"},{default:r(()=>e[7]||(e[7]=[m("Company Name")])),_:1,__:[7]}),o(f,{id:"company_name",modelValue:a(s).company_name,"onUpdate:modelValue":e[1]||(e[1]=l=>a(s).company_name=l)},null,8,["modelValue"]),o(u,{message:a(s).errors.company_name},null,8,["message"])])]),t("div",T,[t("div",A,[o(i,{for:"email"},{default:r(()=>e[8]||(e[8]=[m("Email")])),_:1,__:[8]}),o(f,{id:"email",modelValue:a(s).email,"onUpdate:modelValue":e[2]||(e[2]=l=>a(s).email=l),type:"email",required:""},null,8,["modelValue"]),o(u,{message:a(s).errors.email},null,8,["message"])])]),t("div",J,[t("div",z,[o(i,{for:"phone"},{default:r(()=>e[9]||(e[9]=[m("Phone")])),_:1,__:[9]}),o(f,{id:"phone",modelValue:a(s).phone,"onUpdate:modelValue":e[3]||(e[3]=l=>a(s).phone=l)},null,8,["modelValue"]),o(u,{message:a(s).errors.phone},null,8,["message"])])]),t("div",G,[t("div",H,[o(i,{for:"address"},{default:r(()=>e[10]||(e[10]=[m("Address")])),_:1,__:[10]}),S(t("textarea",{id:"address","onUpdate:modelValue":e[4]||(e[4]=l=>a(s).address=l),class:"w-full rounded border px-3 py-2 mt-1",rows:"3"},null,512),[[F,a(s).address]]),o(u,{message:a(s).errors.address},null,8,["message"])])]),t("div",K,[t("div",Q,[o(i,{for:"location"},{default:r(()=>e[11]||(e[11]=[m("Location")])),_:1,__:[11]}),o(B,{modelValue:a(s).location,"onUpdate:modelValue":e[5]||(e[5]=l=>a(s).location=l)},null,8,["modelValue"])])]),t("div",R,[t("div",W,[o(i,{for:"profile_image"},{default:r(()=>e[12]||(e[12]=[m("Profile Image")])),_:1,__:[12]}),o(f,{id:"profile_image",type:"file",accept:"image/*",onChange:C}),o(u,{message:a(s).errors.profile_image},null,8,["message"]),p.profileImageUrl?(I(),N("div",X,[t("img",{src:p.profileImageUrl,alt:"Profile Image",class:"w-24 h-24 object-cover rounded-full"},null,8,Y)])):$("",!0)])]),o(q,{class:"flex gap-2 justify-end"},{default:r(()=>[o(a(k),{type:"submit",variant:"default"},{default:r(()=>[m(j(a(s).customerId?"Update Customer":"Create Customer"),1)]),_:1}),D(d.$slots,"footer")]),_:3})],32))}});export{re as _};
