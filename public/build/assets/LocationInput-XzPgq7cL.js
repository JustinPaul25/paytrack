import{c as _}from"./index-BGAd5Xxq.js";import{i as b,v as k,u as y,_ as h}from"./_plugin-vue_export-helper-BG7lyvXy.js";import{a as N}from"./LocationInput.vue_vue_type_style_index_0_scoped_5601c0ff_lang-BWPt1fpK.js";import V from"./marker-icon-2x-1TirABJh.js";import w from"./marker-icon-B6h-nX3D.js";import C from"./marker-shadow-B9CpECYs.js";import{d as z,r as m,j as I,g as s,o as l,n as L,u as r,b as p,i as S,w as B,a as M,l as U,f as Z,e as D,t as d}from"./app-BiCwixa0.js";const E={key:0,class:"mt-2 text-xs text-muted-foreground"},F={class:"font-mono"},H={key:1,class:"mt-2 text-xs text-red-500"},O={key:2,class:"mt-2 text-xs text-muted-foreground"},R=z({__name:"LocationInput",props:{modelValue:{},defaultValue:{},class:{},mapHeight:{},mapZoom:{}},emits:["update:modelValue"],setup(f,{emit:g}){N.Icon.Default.mergeOptions({iconRetinaUrl:V,iconUrl:w,shadowUrl:C});const o=f,c=g,e=m(null),n=m([0,0]),u=m(o.mapZoom??(o.modelValue?13:2));I(()=>o.modelValue,t=>{t&&typeof t.lat=="number"&&typeof t.lng=="number"&&!isNaN(t.lat)&&!isNaN(t.lng)?(e.value=t,n.value=[t.lat,t.lng],u.value=o.mapZoom??13):(e.value=null,n.value=[0,0],u.value=o.mapZoom??2)},{immediate:!0});function v(t){const{latlng:a}=t;e.value={lat:a.lat,lng:a.lng},c("update:modelValue",e.value)}function x(t){const{lat:a,lng:i}=t.target.getLatLng();e.value={lat:a,lng:i},c("update:modelValue",e.value)}return(t,a)=>(l(),s("div",{class:L(r(_)("w-full",o.class))},[p(r(b),{center:n.value,"onUpdate:center":a[0]||(a[0]=i=>n.value=i),zoom:u.value,style:S({width:"100%",height:o.mapHeight??"300px",borderRadius:"0.5rem",border:"1px solid #e5e7eb",overflow:"hidden"}),onClick:v,"aria-label":"Location map input",tabindex:"0",role:"application"},{default:B(()=>[p(r(k),{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"Â© OpenStreetMap contributors","max-zoom":19}),e.value&&typeof e.value.lat=="number"&&typeof e.value.lng=="number"&&!isNaN(e.value.lat)&&!isNaN(e.value.lng)?(l(),M(r(y),{key:0,"lat-lng":[e.value.lat,e.value.lng],draggable:!0,onMoveend:x},null,8,["lat-lng"])):U("",!0)]),_:1},8,["center","zoom","style"]),e.value&&typeof e.value.lat=="number"&&typeof e.value.lng=="number"?(l(),s("div",E,[a[1]||(a[1]=Z(" Selected: ")),D("span",F,d(e.value.lat.toFixed(6))+", "+d(e.value.lng.toFixed(6)),1)])):e.value?(l(),s("div",H," Invalid location data. Please click on the map to select a new location. ")):(l(),s("div",O,"Click on the map to select a location."))],2))}}),K=h(R,[["__scopeId","data-v-5601c0ff"]]);export{K as L};
