import{d as P,v as j,m as _,s as A,W as v,c as k,o as u,w as i,a,b as e,u as o,g as W,S as Y,h as w,x as S,y as q,D as T,e as b,f as h,F as I,r as G,t as f,n as V}from"./app-BJGGIgA8.js";import{_ as y}from"./index-riohrRak.js";import{_ as H}from"./AppLayout.vue_vue_type_script_setup_true_lang-6OmCq4tp.js";import{_ as N,a as z}from"./CardContent.vue_vue_type_script_setup_true_lang-DPB8yWHX.js";import{_ as $}from"./Icon.vue_vue_type_script_setup_true_lang-DK3Ddpru.js";import{S as x}from"./sweetalert2.esm.all-BQIkj5Wb.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_85568d9b_lang-CX_goT8l.js";import"./useForwardPropsEmits-CZzI8B5e.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-MrJHOVsW.js";import"./Teleport-MSIji786.js";import"./RovingFocusGroup-gSG5KO_4.js";import"./VisuallyHidden-BC0AEIfW.js";import"./DialogPortal-Dpb7jdpY.js";import"./x-BjkU5bBK.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DSD56j4j.js";import"./chevron-down-B83M1Caq.js";import"./chevron-right-CjvrEjDl.js";import"./square-pen-BALro00M.js";import"./calendar-C8vvPkHy.js";import"./check-CuaqBRk8.js";import"./chevron-left-Czs0_KEi.js";import"./circle-alert-C-R8aAcF.js";import"./piggy-bank-DQw4-LKJ.js";import"./circle-check-big-gvrLbzHW.js";import"./circle-check-BuF8fqTY.js";import"./trophy-B5vnFol2.js";import"./circle-x-C9HF6h3m.js";import"./clock-CUJ54ABb.js";import"./dollar-sign-BFWObhvv.js";import"./eye-off-dgfcsi04.js";import"./eye-BztToSRT.js";import"./loader-circle-ZvNwhMCX.js";import"./mail-tmHC_MiF.js";import"./map-pin-D8FvW8n7.js";import"./message-square-Cf895NaZ.js";import"./sun-Bomsfx5Q.js";import"./plus-CntaVqKq.js";import"./printer-_fQTJVRW.js";import"./search-BUl39vHB.js";import"./shopping-bag-DsL7THBq.js";import"./trash-2-DcMzLwyY.js";import"./trending-up-CSTqz3kz.js";const J={class:"flex items-center justify-between mb-6"},K={class:"flex flex-col gap-4"},O={class:"flex flex-wrap gap-4"},Q={class:"flex items-end"},X={class:"overflow-x-auto"},Z={class:"min-w-full divide-y divide-border"},ee={key:0,class:"bg-white divide-y divide-border"},te={class:"px-4 py-3 whitespace-nowrap font-medium"},se={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-500"},re={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-500"},oe={class:"px-4 py-3 whitespace-nowrap"},ie={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-500"},ae={class:"px-4 py-3 whitespace-nowrap"},le={class:"px-4 py-3 whitespace-nowrap text-sm"},ne={class:"flex gap-2"},ue={key:1},pe={colspan:"7",class:"px-4 py-10 text-center text-sm text-gray-500"},de={key:0,class:"flex items-center justify-between mt-6"},ce={class:"text-sm text-gray-700"},fe={class:"flex gap-2"},rt=P({__name:"Index",setup(me){const l=j(),m=_(l.props.filters?l.props.filters:{}),n=_(typeof m.value.search=="string"?m.value.search:""),p=_(typeof m.value.verification_status=="string"?m.value.verification_status:""),d=_(typeof m.value.user_role=="string"?m.value.user_role:""),c=_(typeof m.value.archived=="boolean"?m.value.archived:!1),R=[{title:"Users",href:"/users"}];let C=null;A(n,s=>{C&&clearTimeout(C),C=setTimeout(()=>{g()},400)}),A([p,d,c],()=>{g()});function g(){const s={};n.value&&(s.search=n.value),p.value&&(s.verification_status=p.value),d.value&&(s.user_role=d.value),c.value&&(s.archived="1"),v.get("/users",s,{preserveState:!0,replace:!0})}function U(s){const t={page:s};n.value&&(t.search=n.value),p.value&&(t.verification_status=p.value),d.value&&(t.user_role=d.value),c.value&&(t.archived="1"),v.get("/users",t,{preserveState:!0,replace:!0})}async function E(s){(await x.fire({title:"Delete User?",text:`Are you sure you want to delete this ${s.type}? This action cannot be undone.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#8f5be8",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete"})).isConfirmed&&(s.type==="staff"?v.delete(`/users/${s.id}`,{onSuccess:()=>{x.fire("User deleted","User deleted successfully.","success"),g()}}):v.delete(`/customers/${s.id}`,{onSuccess:()=>{x.fire("Customer deleted","Customer deleted successfully.","success"),g()}}))}function D(s){switch(s.toLowerCase()){case"admin":return"bg-purple-100 text-purple-800";case"staff":return"bg-blue-100 text-blue-800";case"customer":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}}function F(s){switch(s.toLowerCase()){case"verified":return"bg-green-100 text-green-800";case"unverified":return"bg-yellow-100 text-yellow-800";case"active":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}}function M(s){s.type==="staff"?v.visit(`/users/${s.id}/edit`):v.visit(`/customers/${s.id}?from=users`)}async function L(s){(await x.fire({title:"Restore User to Active?",text:`Are you sure you want to restore this ${s.type} to active status?`,icon:"question",showCancelButton:!0,confirmButtonColor:"#8f5be8",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, restore",cancelButtonText:"Cancel"})).isConfirmed&&(s.type==="staff"?v.post(`/users/${s.id}/set-active`,{type:s.type},{onSuccess:()=>{x.fire("Success","User restored to active successfully.","success"),g()},onError:()=>{x.fire("Error","Failed to restore user to active.","error")}}):v.post(`/users/${s.id}/set-active`,{type:s.type},{onSuccess:()=>{x.fire("Success","Customer restored to active successfully.","success"),g()},onError:()=>{x.fire("Error","Failed to restore customer to active.","error")}}))}return(s,t)=>(u(),k(H,{breadcrumbs:R},{default:i(()=>[a(o(W),{title:"User Management"}),e("div",J,[t[8]||(t[8]=e("h1",{class:"text-2xl font-bold"},"User Management",-1)),a(o(Y),{href:s.route("users.create")},{default:i(()=>[a(o(y),{variant:"default"},{default:i(()=>t[7]||(t[7]=[e("span",{class:"mr-2"},"+",-1),w(" Add New User ")])),_:1,__:[7]})]),_:1},8,["href"])]),a(N,{class:"mb-4"},{default:i(()=>[a(z,{class:"pt-6"},{default:i(()=>[e("div",K,[e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium mb-2"},"Search",-1)),S(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>n.value=r),type:"text",placeholder:"Search by name, email, company, or phone...",class:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[q,n.value]])]),e("div",O,[e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium mb-2"},"User Role",-1)),S(e("select",{"onUpdate:modelValue":t[1]||(t[1]=r=>d.value=r),class:"rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},t[10]||(t[10]=[e("option",{value:""},"All Roles",-1),e("option",{value:"admin"},"Admin",-1),e("option",{value:"staff"},"Staff",-1),e("option",{value:"customer"},"Customer",-1)]),512),[[T,d.value]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium mb-2"},"Customer Verification",-1)),S(e("select",{"onUpdate:modelValue":t[2]||(t[2]=r=>p.value=r),class:"rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},t[12]||(t[12]=[e("option",{value:""},"All Customers",-1),e("option",{value:"verified"},"Verified Customers",-1),e("option",{value:"unverified"},"Unverified Customers",-1)]),512),[[T,p.value]])]),e("div",Q,[a(o(y),{variant:c.value?"default":"outline",size:"default",onClick:t[3]||(t[3]=r=>c.value=!c.value)},{default:i(()=>t[14]||(t[14]=[w(" Show Archived ")])),_:1,__:[14]},8,["variant"])])])])]),_:1})]),_:1}),a(N,null,{default:i(()=>[a(z,null,{default:i(()=>[e("div",X,[e("table",Z,[t[16]||(t[16]=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Name"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Company"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Email"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"User Role"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Phone"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),o(l).props.users.data.length?(u(),b("tbody",ee,[(u(!0),b(I,null,G(o(l).props.users.data,r=>(u(),b("tr",{key:`${r.type}-${r.id}`,class:"hover:bg-muted"},[e("td",te,f(r.name),1),e("td",se,f(r.company||"-"),1),e("td",re,f(r.email),1),e("td",oe,[e("span",{class:V(["px-2 py-1 text-xs font-semibold rounded",D(r.user_role)])},f(r.user_role),3)]),e("td",ie,f(r.phone||"-"),1),e("td",ae,[e("span",{class:V(["px-2 py-1 text-xs font-semibold rounded",F(r.status)])},f(r.status),3)]),e("td",le,[e("div",ne,[a(o(y),{variant:"ghost",size:"sm",onClick:B=>M(r),title:"View"},{default:i(()=>[a($,{name:"eye",class:"h-4 w-4"})]),_:2},1032,["onClick"]),c.value?(u(),k(o(y),{key:0,variant:"ghost",size:"sm",onClick:B=>L(r),title:"Restore to Active"},{default:i(()=>[a($,{name:"check-circle-2",class:"h-4 w-4"})]),_:2},1032,["onClick"])):h("",!0),a(o(y),{variant:"ghost",size:"sm",onClick:B=>E(r),title:"Delete"},{default:i(()=>[a($,{name:"trash",class:"h-4 w-4"})]),_:2},1032,["onClick"])])])]))),128))])):(u(),b("tbody",ue,[e("tr",null,[e("td",pe,[t[15]||(t[15]=w(" No users found. ")),n.value&&n.value.toString().trim().length||p.value||d.value||c.value?(u(),b("button",{key:0,type:"button",class:"underline underline-offset-4 ml-1",onClick:t[4]||(t[4]=r=>{n.value="",p.value="",d.value="",c.value=!1,g()})}," Clear filters ")):h("",!0)])])]))])]),o(l).props.users.last_page>1?(u(),b("div",de,[e("div",ce," Showing "+f(o(l).props.users.from)+" to "+f(o(l).props.users.to)+" of "+f(o(l).props.users.total)+" results ",1),e("div",fe,[o(l).props.users.prev_page_url?(u(),k(o(y),{key:0,variant:"outline",size:"sm",onClick:t[5]||(t[5]=r=>U(o(l).props.users.current_page-1))},{default:i(()=>t[17]||(t[17]=[w(" Previous ")])),_:1,__:[17]})):h("",!0),o(l).props.users.next_page_url?(u(),k(o(y),{key:1,variant:"outline",size:"sm",onClick:t[6]||(t[6]=r=>U(o(l).props.users.current_page+1))},{default:i(()=>t[18]||(t[18]=[w(" Next ")])),_:1,__:[18]})):h("",!0)])])):h("",!0)]),_:1})]),_:1})]),_:1}))}});export{rt as default};
