import{d as w,A as B,c as m,o as l,w as a,a as i,b as t,u as o,g as R,W as c,e as d,f as u,F as S,r as N,t as p,S as P,x as $,h as v}from"./app-B8QIr-yB.js";import{_ as z}from"./AppLayout.vue_vue_type_script_setup_true_lang-soH5-Krj.js";import{_ as I,a as A}from"./CardContent.vue_vue_type_script_setup_true_lang-aSdnrcFY.js";import{_ as E,a as T}from"./CardTitle.vue_vue_type_script_setup_true_lang-BTzcK9vs.js";import{_ as x}from"./index-CMa7p19_.js";import{S as y}from"./sweetalert2.esm.all-BQIkj5Wb.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_0fe2f881_lang-CVWryCuy.js";import"./RovingFocusGroup-Cg7u14CM.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CpXueLgs.js";import"./createLucideIcon-3f2jlhvw.js";import"./VisuallyHidden-BAokwaoo.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-C0oox_ik.js";import"./chevron-right-BFhBpJLr.js";const V={class:"flex items-center justify-between my-6"},q={class:"flex gap-2"},F=["value"],M={key:0,class:"py-8 text-center text-sm text-gray-500"},D={key:0},H={class:"mt-3"},L={key:1},W={key:1},j={class:"min-w-full divide-y divide-border"},Q={class:"px-4 py-2 font-medium"},G={class:"px-4 py-2"},J={class:"px-4 py-2"},K={class:"px-4 py-2"},O={class:"px-4 py-2 font-medium"},U={class:"px-4 py-2"},X={class:"px-4 py-2"},Y={class:"flex gap-2"},fe=w({__name:"Manage",setup(Z){const _=B(),f=_.props.filters||{};function h(n){y.fire({title:"Mark as Processed",html:`
        <div style="text-align:left">
            <label style="display:block;margin-bottom:4px;font-size:12px">Method</label>
            <select id="method" class="swal2-input" style="width:100%">
                <option value="cash">cash</option>
                <option value="bank_transfer">bank_transfer</option>
                <option value="e-wallet">e-wallet</option>
                <option value="credit_note">credit_note</option>
            </select>
            <label style="display:block;margin:10px 0 4px;font-size:12px">Reference #</label>
            <input id="ref" class="swal2-input" placeholder="Reference number (optional)" />
            <label style="display:block;margin:10px 0 4px;font-size:12px">Notes</label>
            <textarea id="notes" class="swal2-textarea" placeholder="Notes (optional)"></textarea>
        </div>
        `,showCancelButton:!0,confirmButtonText:"Save",preConfirm:()=>{const e=document.getElementById("method").value,s=document.getElementById("ref").value,r=document.getElementById("notes").value;return{refund_method:e,reference_number:s||void 0,notes:r||void 0}}}).then(e=>{e.isConfirmed&&c.post(route("refunds.process",n),e.value,{preserveScroll:!0})})}function g(n){y.fire({title:"Complete refund",html:`
        <div style="text-align:left">
            <label style="display:flex;align-items:center;gap:8px;">
                <input id="return" type="checkbox" checked />
                Return to stock
            </label>
            <label style="display:block;margin:10px 0 4px;font-size:12px">Inspection notes</label>
            <textarea id="notes" class="swal2-textarea" placeholder="Notes (optional)"></textarea>
        </div>
        `,showCancelButton:!0,confirmButtonText:"Complete",confirmButtonColor:"#10b981",preConfirm:()=>{const e=document.getElementById("return").checked,s=document.getElementById("notes").value;return{return_to_stock:e,notes:s||void 0}}}).then(e=>{e.isConfirmed&&c.post(route("refunds.complete",n),e.value,{preserveScroll:!0})})}function k(n){y.fire({title:"Cancel this refund?",text:"This will mark the refund as cancelled. A short reason is required.",icon:"warning",showCancelButton:!0,confirmButtonText:"Cancel refund",confirmButtonColor:"#ef4444",input:"textarea",inputLabel:"Reason (required)",inputPlaceholder:"Provide a brief reason...",inputAttributes:{"aria-label":"Reason (required)"},inputValidator:e=>{if(!e||!e.trim())return"Please provide a brief reason."}}).then(e=>{e.isConfirmed&&c.post(route("refunds.cancel",n),{review_notes:e.value},{preserveScroll:!0})})}function C(n){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(n)}return(n,e)=>(l(),m(z,null,{default:a(()=>[i(o(R),{title:"Refunds"}),t("div",V,[e[3]||(e[3]=t("h1",{class:"text-2xl font-bold"},"Refunds",-1)),t("div",q,[t("select",{class:"rounded-md border border-input bg-background px-3 py-2 text-sm",value:o(f).status||"all",onChange:e[0]||(e[0]=s=>{const r=s.target.value==="all"?"":s.target.value;o(c).get(n.route("refunds.index"),r?{status:r}:{},{preserveState:!0,replace:!0})})},e[2]||(e[2]=[t("option",{value:"all"},"All",-1),t("option",{value:"approved"},"Approved",-1),t("option",{value:"processed"},"Processed",-1),t("option",{value:"completed"},"Completed",-1),t("option",{value:"cancelled"},"Cancelled",-1)]),40,F)])]),i(I,null,{default:a(()=>[i(E,null,{default:a(()=>[i(T,null,{default:a(()=>e[4]||(e[4]=[d("Refunds")])),_:1,__:[4]})]),_:1}),i(A,null,{default:a(()=>[o(_).props.refunds.data.length?(l(),u("div",W,[t("table",j,[e[10]||(e[10]=t("thead",null,[t("tr",null,[t("th",{class:"px-4 py-2 text-left"},"Refund #"),t("th",{class:"px-4 py-2 text-left"},"Invoice"),t("th",{class:"px-4 py-2 text-left"},"Product"),t("th",{class:"px-4 py-2 text-left"},"Qty"),t("th",{class:"px-4 py-2 text-left"},"Amount"),t("th",{class:"px-4 py-2 text-left"},"Status"),t("th",{class:"px-4 py-2 text-left"},"Actions")])],-1)),t("tbody",null,[(l(!0),u(S,null,N(o(_).props.refunds.data,s=>{var r;return l(),u("tr",{key:s.id,class:"hover:bg-muted"},[t("td",Q,p(s.refund_number),1),t("td",G,[i(o(P),{href:n.route("invoices.show",s.invoice_id),class:"text-blue-500 underline"},{default:a(()=>[d("#"+p(s.invoice_id),1)]),_:2},1032,["href"])]),t("td",J,p(((r=s.product)==null?void 0:r.name)||"â€”"),1),t("td",K,p(s.quantity_refunded),1),t("td",O,p(C(s.refund_amount)),1),t("td",U,[t("span",{class:$(["px-2 py-1 rounded-full text-xs font-medium",{"bg-blue-100 text-blue-800":s.status==="approved","bg-yellow-100 text-yellow-800":s.status==="processed","bg-green-100 text-green-800":s.status==="completed","bg-red-100 text-red-800":s.status==="cancelled"}])},p(s.status),3)]),t("td",X,[t("div",Y,[s.status==="approved"||s.status==="processed"?(l(),m(o(x),{key:0,size:"sm",variant:"outline",onClick:b=>h(s.id)},{default:a(()=>e[7]||(e[7]=[d(" Process ")])),_:2,__:[7]},1032,["onClick"])):v("",!0),s.status==="approved"||s.status==="processed"?(l(),m(o(x),{key:1,size:"sm",variant:"default",onClick:b=>g(s.id)},{default:a(()=>e[8]||(e[8]=[d(" Complete ")])),_:2,__:[8]},1032,["onClick"])):v("",!0),s.status!=="completed"&&s.status!=="cancelled"?(l(),m(o(x),{key:2,size:"sm",variant:"destructive",onClick:b=>k(s.id)},{default:a(()=>e[9]||(e[9]=[d(" Cancel ")])),_:2,__:[9]},1032,["onClick"])):v("",!0)])])])}),128))])])])):(l(),u("div",M,[o(f).status&&o(f).status!==""&&o(f).status!=="all"?(l(),u("div",D,[e[6]||(e[6]=d(" No refunds found for the selected filter. ")),t("div",H,[i(o(x),{variant:"outline",onClick:e[1]||(e[1]=s=>o(c).get(n.route("refunds.index"),{},{preserveState:!0,replace:!0}))},{default:a(()=>e[5]||(e[5]=[d(" Clear filters ")])),_:1,__:[5]})])])):(l(),u("div",L," No refunds found. "))]))]),_:1})]),_:1})]),_:1}))}});export{fe as default};
