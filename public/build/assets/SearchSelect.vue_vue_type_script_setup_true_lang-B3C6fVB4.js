import{c as I,_ as y}from"./index-DGsGrSrC.js";import{_ as N}from"./Input.vue_vue_type_script_setup_true_lang-g4sc6RFt.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_0fe2f881_lang-CY5YS25a.js";import{C as P}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DrVuRV9h.js";import{S as R}from"./search-DF2frAsP.js";import{X as j}from"./AppLayout.vue_vue_type_script_setup_true_lang-DXEZBkGt.js";import{d as q,j as d,l as v,z as F,D as _,E as U,f as c,o as u,a as i,h as m,w as k,b as f,t as b,u as n,x as w,c as $,F as Q,r as T}from"./app-DELaeWbo.js";const X={"data-search-select":"",class:"relative"},A={class:"truncate"},G={class:"p-2 border-b border-border"},H={class:"relative"},J={class:"max-h-60 overflow-y-auto"},K=["onClick"],M={key:0,class:"px-2 py-3 text-center text-muted-foreground text-sm"},re=q({__name:"SearchSelect",props:{modelValue:{},options:{},placeholder:{default:"Select an option"},searchPlaceholder:{default:"Search..."},class:{},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(x,{emit:C}){const r=x,V=C,l=d(!1),a=d(""),s=d(),S=d(),h=v(()=>r.options.find(e=>e.value===r.modelValue)),L=v(()=>{var e;return((e=h.value)==null?void 0:e.label)||r.placeholder}),g=v(()=>{if(!a.value)return r.options;const e=a.value.toLowerCase().trim();return r.options.filter(t=>t.value===null&&t.label.toLowerCase().includes("select")?!1:t.label.toLowerCase().includes(e))});function B(){r.disabled||(l.value=!l.value)}function D(e,t){t&&(t.preventDefault(),t.stopPropagation()),V("update:modelValue",e.value),l.value=!1,a.value=""}function E(e){e&&(e.preventDefault(),e.stopPropagation()),a.value="",_(()=>{s.value&&typeof s.value.focus=="function"&&s.value.focus()})}function O(e){const t=e.target;a.value=t.value}function p(e){e.target.closest("[data-search-select]")||(l.value=!1,a.value="")}return F(l,e=>{e?_(()=>{document.addEventListener("click",p),s.value&&typeof s.value.focus=="function"&&s.value.focus()}):(document.removeEventListener("click",p),a.value="")}),U(()=>{document.removeEventListener("click",p)}),(e,t)=>(u(),c("div",X,[i(n(y),{type:"button",variant:"outline",class:w(n(I)("w-full justify-between border-input bg-transparent text-foreground dark:bg-input/30 hover:bg-accent hover:text-accent-foreground","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] focus-visible:outline-none",l.value&&"border-ring",!h.value&&"text-muted-foreground",r.class)),disabled:e.disabled,onClick:B},{default:k(()=>[f("span",A,b(L.value),1),i(n(P),{class:"h-4 w-4 opacity-50"})]),_:1},8,["class","disabled"]),l.value?(u(),c("div",{key:0,ref_key:"dropdownRef",ref:S,class:"absolute top-full left-0 right-0 z-50 mt-1 bg-popover text-popover-foreground border border-border rounded-md shadow-lg p-0"},[f("div",G,[f("div",H,[i(n(R),{class:"absolute left-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i(n(N),{ref_key:"searchInputRef",ref:s,modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=o=>a.value=o),placeholder:e.searchPlaceholder,class:"pl-8 pr-8 border-0 bg-transparent focus-visible:ring-0 focus-visible:ring-offset-0",onInput:O},null,8,["modelValue","placeholder"]),a.value?(u(),$(n(y),{key:0,type:"button",variant:"ghost",size:"sm",class:"absolute right-1 top-1/2 transform -translate-y-1/2 h-6 w-6 p-0",onClick:t[1]||(t[1]=o=>E(o))},{default:k(()=>[i(n(j),{class:"h-3 w-3"})]),_:1})):m("",!0)])]),f("div",J,[(u(!0),c(Q,null,T(g.value,o=>(u(),c("button",{key:String(o.value??"null"),type:"button",onClick:z=>D(o,z),class:w(["w-full px-2 py-1.5 text-left text-sm cursor-pointer transition-colors",o.value===e.modelValue?"bg-accent text-accent-foreground":"hover:bg-accent hover:text-accent-foreground"])},b(o.label),11,K))),128)),a.value&&g.value.length===0?(u(),c("div",M,' No results found for "'+b(a.value)+'" ',1)):m("",!0)])],512)):m("",!0)]))}});export{re as _};
