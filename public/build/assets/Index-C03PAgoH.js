import{d as E,E as U,j as C,G as L,z as R,W as _,c as v,o as i,w as o,a as r,b as e,u as s,g as W,T as Y,A as $,t as d,H as G,B as q,h as u,x as B,e as g,S as y,f as p,F as J,r as K}from"./app-BetSr-W8.js";import{_ as f}from"./index-B-rgOcUC.js";import{_ as O}from"./AppLayout.vue_vue_type_script_setup_true_lang-FDpQsIg9.js";import{_ as w,a as k}from"./CardContent.vue_vue_type_script_setup_true_lang-BAjLg-nx.js";import{_ as j}from"./Icon.vue_vue_type_script_setup_true_lang-DBIycJ54.js";import{S as z}from"./sweetalert2.esm.all-BQIkj5Wb.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_0fe2f881_lang-B6GdQcNL.js";import"./RovingFocusGroup-Dt1WcpdZ.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-lX0kLFHS.js";import"./createLucideIcon-BRFkq9sL.js";import"./VisuallyHidden-Dr2C9Vk-.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DrSSceHr.js";import"./square-pen-AEuTXMjR.js";import"./trophy-D_HJ0odI.js";import"./check-CcW4Tnk9.js";import"./circle-alert-BYsosRjh.js";import"./piggy-bank-44jsmlfG.js";import"./dollar-sign-CQ2D2rTD.js";import"./clock-BrowHHF4.js";import"./eye-off-GI8QwNCx.js";import"./eye-CmmRJGdx.js";import"./file-text-aQjuRiuw.js";import"./loader-circle-CPua8On7.js";import"./sun-D0qMaHtx.js";import"./printer-EqposZ69.js";import"./search-CcuFaonH.js";import"./trash-2-D5om9Pas.js";import"./trending-up-CCIPDstK.js";const Q={class:"grid grid-cols-1 lg:grid-cols-4 gap-6 mt-8 mb-6"},X={class:"flex items-center justify-between"},Z={class:"text-xl font-bold text-blue-600"},ee={class:"flex items-center justify-between"},te={class:"text-xl font-bold text-green-600"},se={class:"flex items-center justify-between"},oe={class:"text-xl font-bold text-yellow-600"},re={class:"flex items-center justify-between"},le={class:"text-xl font-bold text-emerald-600"},ae={class:"flex items-center justify-between mt-4 mb-2"},ne={class:"flex gap-2 items-center"},ie={class:"flex items-center gap-2"},de={key:0},ue={key:0,class:"py-12 text-center"},pe={class:"flex items-center justify-center gap-2"},fe={key:1,class:"py-12 text-center"},ce={key:0,class:"text-sm text-gray-600 mb-6"},me={key:1},ve={class:"min-w-full divide-y divide-border"},ge={class:"px-4 py-2 font-medium"},xe={class:"px-4 py-2"},ye={class:"font-medium"},he={key:0,class:"text-sm text-gray-500"},_e={class:"px-4 py-2 font-medium"},we={class:"px-4 py-2"},ke={class:"px-4 py-2"},be={class:"px-4 py-2 text-sm text-gray-500"},Ce={class:"px-4 py-2"},je={class:"flex gap-2"},Se={key:0,class:"flex items-center justify-between mt-6"},Be={class:"text-sm text-gray-700"},ze={class:"flex gap-2"},Te={class:"fixed bottom-6 right-6 z-50"},Ie={key:0,class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Pe={key:1,class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},nt=E({__name:"Index",setup($e){var P;const l=U(),x=Array.isArray((P=l.props.auth)==null?void 0:P.userRoles)&&l.props.auth.userRoles.includes("Customer"),b=C(l.props.filters?l.props.filters:{}),m=C(typeof b.value.search=="string"?b.value.search:""),c=C(typeof b.value.status=="string"?b.value.status:""),h=C(!1),V=[{title:"Invoices",href:"/invoices"}];L(()=>{m.value=l.props.filters&&typeof l.props.filters.search=="string"?l.props.filters.search:"",c.value=l.props.filters&&typeof l.props.filters.status=="string"?l.props.filters.status:""});let S=null;R(m,n=>{S&&clearTimeout(S),S=setTimeout(()=>{_.get("/invoices",{search:n||void 0,status:c.value||void 0},{preserveState:!0,replace:!0})},400)});function T(n){_.get("/invoices",{search:m.value||void 0,status:c.value||void 0,page:n},{preserveState:!0,replace:!0})}async function D(n){(await z.fire({title:"Delete this invoice?",text:"This will remove the invoice permanently. You canâ€™t undo this.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#8f5be8",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it"})).isConfirmed&&_.delete(`/invoices/${n}`,{onSuccess:()=>{z.fire("Deleted","The invoice was deleted.","success")}})}function M(n){_.post(route("invoices.markPaid",n),{},{preserveScroll:!0,onSuccess:()=>{z.fire({toast:!0,position:"top-end",icon:"success",title:"Invoice marked as paid",showConfirmButton:!1,timer:2e3})}})}function A(n){switch(n){case"draft":return"bg-gray-100 text-gray-800";case"pending":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}function I(n){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(n)}function N(){c.value=c.value==="pending"?"":"pending",_.get("/invoices",{search:m.value||void 0,status:c.value||void 0},{preserveState:!0,replace:!0})}function F(n){return new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"2-digit"})}return(n,t)=>(i(),v(O,{breadcrumbs:V},{default:o(()=>[r(s(W),{title:"Invoices"}),r(Y,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 transform -translate-y-4","enter-to-class":"opacity-100 transform translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 transform translate-y-0","leave-to-class":"opacity-0 transform -translate-y-4"},{default:o(()=>[$(e("div",Q,[r(w,{class:"relative overflow-hidden"},{default:o(()=>[r(k,{class:"p-6"},{default:o(()=>[e("div",X,[e("div",null,[t[5]||(t[5]=e("p",{class:"text-sm font-medium text-muted-foreground"},"Total Invoices",-1)),e("p",Z,d(s(l).props.stats.totalInvoices),1)]),t[6]||(t[6]=e("div",{class:"h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1))])]),_:1})]),_:1}),r(w,{class:"relative overflow-hidden"},{default:o(()=>[r(k,{class:"p-6"},{default:o(()=>[e("div",ee,[e("div",null,[t[7]||(t[7]=e("p",{class:"text-sm font-medium text-muted-foreground"},"Total Amount",-1)),e("p",te,d(I(s(l).props.stats.totalAmount)),1)]),t[8]||(t[8]=e("div",{class:"h-12 w-12 rounded-full bg-green-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1))])]),_:1})]),_:1}),r(w,{class:"relative overflow-hidden"},{default:o(()=>[r(k,{class:"p-6"},{default:o(()=>[e("div",se,[e("div",null,[t[9]||(t[9]=e("p",{class:"text-sm font-medium text-muted-foreground"},"Pending",-1)),e("p",oe,d(s(l).props.stats.pendingInvoices),1)]),t[10]||(t[10]=e("div",{class:"h-12 w-12 rounded-full bg-yellow-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])]),_:1})]),_:1}),r(w,{class:"relative overflow-hidden"},{default:o(()=>[r(k,{class:"p-6"},{default:o(()=>[e("div",re,[e("div",null,[t[11]||(t[11]=e("p",{class:"text-sm font-medium text-muted-foreground"},"Paid",-1)),e("p",le,d(s(l).props.stats.paidInvoices),1)]),t[12]||(t[12]=e("div",{class:"h-12 w-12 rounded-full bg-emerald-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])]),_:1})]),_:1})],512),[[G,h.value]])]),_:1}),e("div",ae,[e("div",ne,[$(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>m.value=a),type:"text",placeholder:"Search by customer name",class:"rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[q,m.value]])]),e("div",ie,[r(s(f),{variant:"outline",class:B(c.value==="pending"?"border-yellow-400 text-yellow-600 bg-yellow-50":""),onClick:N},{default:o(()=>t[13]||(t[13]=[g(" Unpaid ")])),_:1,__:[13]},8,["class"]),s(x)?u("",!0):(i(),v(s(y),{key:0,href:n.route("invoices.create")},{default:o(()=>[r(s(f),{variant:"default"},{default:o(()=>t[14]||(t[14]=[e("span",{class:"mr-2"},"+",-1),g(" Add New Invoice ")])),_:1,__:[14]})]),_:1},8,["href"]))])]),r(w,null,{default:o(()=>[r(k,null,{default:o(()=>[s(l).props.invoices.data.length===0?(i(),p("div",de,[m.value&&m.value.trim().length||c.value&&c.value.trim().length?(i(),p("div",ue,[t[17]||(t[17]=e("div",{class:"text-xl font-semibold mb-2"},"No results found",-1)),t[18]||(t[18]=e("p",{class:"text-sm text-gray-600 mb-6"}," We couldn't find any invoices matching your search/filter. ",-1)),e("div",pe,[r(s(f),{variant:"outline",onClick:t[1]||(t[1]=a=>{m.value="",c.value=""})},{default:o(()=>t[15]||(t[15]=[g("Clear search")])),_:1,__:[15]}),s(x)?u("",!0):(i(),v(s(y),{key:0,href:n.route("invoices.create")},{default:o(()=>[r(s(f),{variant:"default"},{default:o(()=>t[16]||(t[16]=[e("span",{class:"mr-2"},"+",-1),g(" Create Invoice ")])),_:1,__:[16]})]),_:1},8,["href"]))])])):(i(),p("div",fe,[t[20]||(t[20]=e("div",{class:"text-xl font-semibold mb-2"},"No invoices yet",-1)),s(x)?u("",!0):(i(),p("p",ce,"Create your first invoice to get started.")),s(x)?u("",!0):(i(),v(s(y),{key:1,href:n.route("invoices.create")},{default:o(()=>[r(s(f),{variant:"default"},{default:o(()=>t[19]||(t[19]=[e("span",{class:"mr-2"},"+",-1),g(" Create Invoice ")])),_:1,__:[19]})]),_:1},8,["href"]))]))])):(i(),p("div",me,[e("table",ve,[t[25]||(t[25]=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 text-left"},"Reference #"),e("th",{class:"px-4 py-2 text-left"},"Customer"),e("th",{class:"px-4 py-2 text-left"},"Total"),e("th",{class:"px-4 py-2 text-left"},"Status"),e("th",{class:"px-4 py-2 text-left"},"Payment"),e("th",{class:"px-4 py-2 text-left"},"Date"),e("th",{class:"px-4 py-2 text-left"},"Actions")])],-1)),e("tbody",null,[(i(!0),p(J,null,K(s(l).props.invoices.data,a=>(i(),p("tr",{key:a.id,class:"hover:bg-muted"},[e("td",ge,[r(s(y),{href:n.route("invoices.show",a.id),class:"underline underline-offset-4"},{default:o(()=>[g(d(a.reference_number),1)]),_:2},1032,["href"])]),e("td",xe,[e("div",null,[e("div",ye,d(a.customer.name),1),a.customer.company_name?(i(),p("div",he,d(a.customer.company_name),1)):u("",!0)])]),e("td",_e,d(I(a.total_amount)),1),e("td",we,[e("span",{class:B(["px-2 py-1 rounded-full text-xs font-medium",A(a.status)])},d(a.status.charAt(0).toUpperCase()+a.status.slice(1)),3)]),e("td",ke,d(a.payment_method.replace("_"," ")),1),e("td",be,d(F(a.created_at)),1),e("td",Ce,[e("div",je,[r(s(y),{href:n.route("invoices.show",a.id)},{default:o(()=>[r(s(f),{variant:"ghost",size:"sm"},{default:o(()=>[r(j,{name:"eye",class:"h-4 w-4"}),t[21]||(t[21]=e("span",{class:"ml-1"},"View",-1))]),_:1,__:[21]})]),_:2},1032,["href"]),s(x)?u("",!0):(i(),v(s(y),{key:0,href:n.route("invoices.edit",a.id)},{default:o(()=>[r(s(f),{variant:"ghost",size:"sm"},{default:o(()=>[r(j,{name:"edit",class:"h-4 w-4"}),t[22]||(t[22]=e("span",{class:"ml-1"},"Edit",-1))]),_:1,__:[22]})]),_:2},1032,["href"])),!s(x)&&a.status==="pending"?(i(),v(s(f),{key:1,variant:"ghost",size:"sm",onClick:H=>M(a.id)},{default:o(()=>[r(j,{name:"check",class:"h-4 w-4"}),t[23]||(t[23]=e("span",{class:"ml-1"},"Mark as Paid",-1))]),_:2,__:[23]},1032,["onClick"])):u("",!0),s(x)?u("",!0):(i(),v(s(f),{key:2,variant:"ghost",size:"sm",onClick:H=>D(a.id)},{default:o(()=>[r(j,{name:"trash",class:"h-4 w-4"}),t[24]||(t[24]=e("span",{class:"ml-1"},"Delete",-1))]),_:2,__:[24]},1032,["onClick"]))])])]))),128))])]),s(l).props.invoices.last_page>1?(i(),p("div",Se,[e("div",Be," Showing "+d(s(l).props.invoices.from)+" to "+d(s(l).props.invoices.to)+" of "+d(s(l).props.invoices.total)+" results ",1),e("div",ze,[s(l).props.invoices.prev_page_url?(i(),v(s(f),{key:0,variant:"outline",size:"sm",onClick:t[2]||(t[2]=a=>T(s(l).props.invoices.current_page-1))},{default:o(()=>t[26]||(t[26]=[g(" Previous ")])),_:1,__:[26]})):u("",!0),s(l).props.invoices.next_page_url?(i(),v(s(f),{key:1,variant:"outline",size:"sm",onClick:t[3]||(t[3]=a=>T(s(l).props.invoices.current_page+1))},{default:o(()=>t[27]||(t[27]=[g(" Next ")])),_:1,__:[27]})):u("",!0)])])):u("",!0)]))]),_:1})]),_:1}),e("div",Te,[e("button",{onClick:t[4]||(t[4]=a=>h.value=!h.value),class:B(["h-12 w-12 rounded-full shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center",h.value?"bg-red-500 hover:bg-red-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"])},[h.value?(i(),p("svg",Pe,t[29]||(t[29]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)]))):(i(),p("svg",Ie,t[28]||(t[28]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},null,-1)])))],2)])]),_:1}))}});export{nt as default};
