import{d as F,v as j,m as b,s as S,W as T,c as f,o as a,w as u,a as n,b as s,f as r,h as _,u as o,g as B,x as M,y as U,e as m,F as N,r as $,t as l,S as z}from"./app-Du4GjnqY.js";import{_ as g}from"./index-B1B-wuAy.js";import{_ as A}from"./Select.vue_vue_type_script_setup_true_lang-2dMc3g12.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_0fe2f881_lang-DHw6Z5C7.js";import{P as I,_ as E}from"./AppLayout.vue_vue_type_script_setup_true_lang-C5-77bQX.js";import{_ as O,a as W}from"./CardContent.vue_vue_type_script_setup_true_lang-CsIZBT8t.js";import{_ as q,a as L}from"./CardTitle.vue_vue_type_script_setup_true_lang-Yjmxyl1g.js";import{M as Q}from"./map-pin-Cocy9FIa.js";import{S as Y}from"./shopping-bag-DqDvr4Gg.js";import{D as P}from"./dollar-sign-BGLe3WIA.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-BItx2YQm.js";import"./createLucideIcon-knc4Tqmj.js";import"./RovingFocusGroup-Bek87zqo.js";import"./VisuallyHidden-8qINCcSU.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang--3inaUNk.js";import"./chevron-right-Ds8ma9mO.js";const G={class:"flex flex-col md:flex-row gap-4 items-start md:items-center justify-between mt-4 mb-2"},H={class:"flex flex-wrap gap-2 items-center w-full md:w-auto"},J={key:0,class:"py-12 text-center"},K={class:"text-sm text-gray-600 mb-6"},R={key:0},X={key:1},Z={key:1,class:"space-y-6"},ss={class:"flex items-start justify-between"},ts={key:0,class:"text-sm text-gray-500 mt-1"},es={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},os={class:"space-y-1 text-sm"},as={class:"flex items-center gap-2"},ls={key:0,class:"flex items-center gap-2"},rs={class:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-1"},is={key:0,class:"text-sm text-gray-600"},ns={key:1,class:"text-sm text-gray-400 italic"},ds={class:"border-t pt-4"},us={class:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-1"},ps={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ms={class:"bg-blue-50 p-3 rounded-lg"},cs={class:"flex items-center gap-2 mb-1"},_s={class:"text-lg font-bold text-blue-600"},fs={class:"bg-purple-50 p-3 rounded-lg"},xs={class:"flex items-center gap-2 mb-1"},gs={class:"text-lg font-bold text-purple-600"},vs={class:"bg-green-50 p-3 rounded-lg"},ys={class:"flex items-center gap-2 mb-1"},bs={class:"text-lg font-bold text-green-600"},hs={key:0,class:"border-t pt-4"},ws={class:"space-y-2"},ks={class:"flex items-center gap-3"},Cs={class:"text-xs font-semibold text-gray-500 w-6"},Ss={class:"text-sm font-medium"},Ts={class:"flex items-center gap-4 text-sm"},Ns={class:"text-gray-600"},$s={class:"font-semibold"},Ps={class:"text-gray-600"},Vs={key:1,class:"border-t pt-4"},Ds={key:2,class:"flex items-center justify-between mt-6"},Fs={class:"text-sm text-gray-700"},js={class:"flex gap-2"},Rs=F({__name:"Customers",setup(Bs){const i=j(),h=b(i.props.filters?i.props.filters:{}),p=b(h.value.search||""),d=b(h.value.duration||"all"),V=[{title:"Users",href:"/users"},{title:"Customers",href:"/users/customers"}],D=[{value:"all",label:"All Time"},{value:"month",label:"This Month"},{value:"year",label:"This Year"}];let v=null;S(p,c=>{v&&clearTimeout(v),v=setTimeout(()=>{w()},400)}),S(d,()=>{w()});function w(){T.get("/users/customers",{search:p.value||void 0,duration:d.value!=="all"?d.value:void 0},{preserveState:!0,replace:!0})}function x(c){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(c)}function k(c){T.get("/users/customers",{search:p.value||void 0,duration:d.value!=="all"?d.value:void 0,page:c},{preserveState:!0,replace:!0})}return(c,t)=>(a(),f(E,{breadcrumbs:V},{default:u(()=>[n(o(B),{title:"Customers"}),t[21]||(t[21]=s("div",{class:"flex items-center justify-between mb-6"},[s("h1",{class:"text-2xl font-bold"},"Customer Management")],-1)),s("div",G,[s("div",H,[M(s("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>p.value=e),type:"text",placeholder:"Search customers...",class:"rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 flex-1 md:flex-initial min-w-[200px]"},null,512),[[U,p.value]]),n(o(A),{modelValue:d.value,"onUpdate:modelValue":t[1]||(t[1]=e=>d.value=e),options:D,placeholder:"Duration",class:"w-full md:w-[150px]"},null,8,["modelValue"])])]),o(i).props.customers.data.length===0?(a(),r("div",J,[t[6]||(t[6]=s("div",{class:"text-xl font-semibold mb-2"},"No customers found",-1)),s("p",K,[p.value||d.value!=="all"?(a(),r("span",R," No customers match your current filters. ")):(a(),r("span",X," No customers in the system yet. "))]),p.value||d.value!=="all"?(a(),f(o(g),{key:0,variant:"outline",onClick:t[2]||(t[2]=e=>{p.value="",d.value="all"})},{default:u(()=>t[5]||(t[5]=[m(" Clear Filters ")])),_:1,__:[5]})):_("",!0)])):(a(),r("div",Z,[(a(!0),r(N,null,$(o(i).props.customers.data,e=>(a(),f(O,{key:e.id,class:"hover:shadow-lg transition-shadow"},{default:u(()=>[n(q,null,{default:u(()=>[s("div",ss,[s("div",null,[n(L,{class:"text-xl"},{default:u(()=>[m(l(e.name),1)]),_:2},1024),e.company_name?(a(),r("p",ts,l(e.company_name),1)):_("",!0)]),n(o(z),{href:c.route("customers.edit",e.id)},{default:u(()=>[n(o(g),{variant:"outline",size:"sm"},{default:u(()=>t[7]||(t[7]=[m(" View Details ")])),_:1,__:[7]})]),_:2},1032,["href"])])]),_:2},1024),n(W,{class:"space-y-4"},{default:u(()=>[s("div",es,[s("div",null,[t[10]||(t[10]=s("h3",{class:"text-sm font-semibold text-gray-700 mb-2"},"Contact Information",-1)),s("div",os,[s("div",as,[t[8]||(t[8]=s("span",{class:"text-gray-500"},"Email:",-1)),s("span",null,l(e.email),1)]),e.phone?(a(),r("div",ls,[t[9]||(t[9]=s("span",{class:"text-gray-500"},"Phone:",-1)),s("span",null,l(e.phone),1)])):_("",!0)])]),s("div",null,[s("h3",rs,[n(o(Q),{class:"h-4 w-4"}),t[11]||(t[11]=m(" Address "))]),e.address?(a(),r("p",is,l(e.address),1)):(a(),r("p",ns,"No address provided"))])]),s("div",ds,[s("h3",us,[n(o(Y),{class:"h-4 w-4"}),t[12]||(t[12]=m(" Purchase Statistics "))]),s("div",ps,[s("div",ms,[s("div",cs,[n(o(P),{class:"h-4 w-4 text-blue-600"}),t[13]||(t[13]=s("span",{class:"text-xs text-gray-600"},"Total Purchases",-1))]),s("p",_s,l(x(e.total_purchases)),1)]),s("div",fs,[s("div",xs,[n(o(I),{class:"h-4 w-4 text-purple-600"}),t[14]||(t[14]=s("span",{class:"text-xs text-gray-600"},"Total Invoices",-1))]),s("p",gs,l(e.total_invoices),1)]),s("div",vs,[s("div",ys,[n(o(P),{class:"h-4 w-4 text-green-600"}),t[15]||(t[15]=s("span",{class:"text-xs text-gray-600"},"Average Order",-1))]),s("p",bs,l(e.total_invoices>0?x(e.total_purchases/e.total_invoices):x(0)),1)])])]),e.top_products&&e.top_products.length>0?(a(),r("div",hs,[t[17]||(t[17]=s("h3",{class:"text-sm font-semibold text-gray-700 mb-3"},"Top Purchases",-1)),s("div",ws,[(a(!0),r(N,null,$(e.top_products,(y,C)=>(a(),r("div",{key:C,class:"flex items-center justify-between p-2 bg-gray-50 rounded"},[s("div",ks,[s("span",Cs,l(C+1)+".",1),s("span",Ss,l(y.name),1)]),s("div",Ts,[s("span",Ns,[t[16]||(t[16]=m("Qty: ")),s("span",$s,l(y.quantity),1)]),s("span",Ps,l(x(y.amount)),1)])]))),128))])])):(a(),r("div",Vs,t[18]||(t[18]=[s("p",{class:"text-sm text-gray-400 italic"},"No purchase history available",-1)])))]),_:2},1024)]),_:2},1024))),128))])),o(i).props.customers.last_page>1?(a(),r("div",Ds,[s("div",Fs," Showing "+l(o(i).props.customers.from)+" to "+l(o(i).props.customers.to)+" of "+l(o(i).props.customers.total)+" results ",1),s("div",js,[o(i).props.customers.prev_page_url?(a(),f(o(g),{key:0,variant:"outline",size:"sm",onClick:t[3]||(t[3]=e=>k(o(i).props.customers.current_page-1))},{default:u(()=>t[19]||(t[19]=[m(" Previous ")])),_:1,__:[19]})):_("",!0),o(i).props.customers.next_page_url?(a(),f(o(g),{key:1,variant:"outline",size:"sm",onClick:t[4]||(t[4]=e=>k(o(i).props.customers.current_page+1))},{default:u(()=>t[20]||(t[20]=[m(" Next ")])),_:1,__:[20]})):_("",!0)])])):_("",!0)]),_:1,__:[21]}))}});export{Rs as default};
