import{d as J,v as G,m as f,J as H,s as Y,W as h,c as T,o as i,w as r,a as o,b as e,u as l,g as Z,T as tt,x as z,t as u,H as et,y as V,n as k,h as d,S as A,e as m,f as L,F as st,r as ot,G as lt}from"./app-BJGGIgA8.js";import{_ as v}from"./index-riohrRak.js";import{_ as rt}from"./AppLayout.vue_vue_type_script_setup_true_lang-6OmCq4tp.js";import{_ as $,a as j}from"./CardContent.vue_vue_type_script_setup_true_lang-DPB8yWHX.js";import{_ as B}from"./Icon.vue_vue_type_script_setup_true_lang-DK3Ddpru.js";import{S as M}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{e as at,_ as nt,a as it,b as ut,c as dt,d as pt}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BKWl03TP.js";import{_ as ct}from"./DialogClose.vue_vue_type_script_setup_true_lang-Dt8J_fcX.js";import{_ as F}from"./Label.vue_vue_type_script_setup_true_lang-bOJZE9lv.js";import{_ as O}from"./InputError.vue_vue_type_script_setup_true_lang-YNpV2x5o.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_85568d9b_lang-CX_goT8l.js";import"./useForwardPropsEmits-CZzI8B5e.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-MrJHOVsW.js";import"./Teleport-MSIji786.js";import"./RovingFocusGroup-gSG5KO_4.js";import"./VisuallyHidden-BC0AEIfW.js";import"./DialogPortal-Dpb7jdpY.js";import"./x-BjkU5bBK.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DSD56j4j.js";import"./chevron-down-B83M1Caq.js";import"./chevron-right-CjvrEjDl.js";import"./square-pen-BALro00M.js";import"./calendar-C8vvPkHy.js";import"./check-CuaqBRk8.js";import"./chevron-left-Czs0_KEi.js";import"./circle-alert-C-R8aAcF.js";import"./piggy-bank-DQw4-LKJ.js";import"./circle-check-big-gvrLbzHW.js";import"./circle-check-BuF8fqTY.js";import"./trophy-B5vnFol2.js";import"./circle-x-C9HF6h3m.js";import"./clock-CUJ54ABb.js";import"./dollar-sign-BFWObhvv.js";import"./eye-off-dgfcsi04.js";import"./eye-BztToSRT.js";import"./loader-circle-ZvNwhMCX.js";import"./mail-tmHC_MiF.js";import"./map-pin-D8FvW8n7.js";import"./message-square-Cf895NaZ.js";import"./sun-Bomsfx5Q.js";import"./plus-CntaVqKq.js";import"./printer-_fQTJVRW.js";import"./search-BUl39vHB.js";import"./shopping-bag-DsL7THBq.js";import"./trash-2-DcMzLwyY.js";import"./trending-up-CSTqz3kz.js";const ft={class:"grid grid-cols-1 lg:grid-cols-4 gap-6 mt-8 mb-6"},mt={class:"flex items-center justify-between"},vt={class:"text-xl font-bold text-blue-600"},xt={class:"flex items-center justify-between"},yt={class:"text-xl font-bold text-green-600"},gt={class:"flex items-center justify-between"},_t={class:"text-xl font-bold text-yellow-600"},kt={class:"flex items-center justify-between"},wt={class:"text-xl font-bold text-purple-600"},bt={class:"flex items-center justify-between mt-4 mb-2"},ht={class:"flex gap-2 items-center"},St={class:"flex gap-2 items-center"},Ct={class:"min-w-full divide-y divide-border"},$t={class:"flex items-center gap-2"},jt={class:"flex flex-col"},Bt={class:"flex items-center gap-2"},Mt={class:"flex flex-col"},Pt={key:0},Tt={class:"px-4 py-2 font-medium"},zt={class:"px-4 py-2 text-sm text-gray-500"},At={class:"px-4 py-2 font-medium"},Lt={class:"px-4 py-2"},Nt={class:"px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},Vt={class:"px-4 py-2"},qt=["title"],Dt={class:"px-4 py-2 text-sm text-gray-500 uppercase"},Ut={class:"px-4 py-2 text-sm text-gray-500"},Et={class:"px-4 py-2"},Ht={class:"flex gap-2"},Ft={key:1},Ot={colspan:"6",class:"px-4 py-10 text-center text-sm text-gray-500"},It={key:0,class:"flex items-center justify-between mt-6"},Kt={class:"text-sm text-gray-700"},Rt={class:"flex gap-2"},Qt={class:"fixed bottom-6 right-6 z-50"},Wt={key:0,class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Xt={key:1,class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Oe=J({__name:"Index",setup(Jt){const a=G(),y=f(a.props.filters?a.props.filters:{}),g=f(typeof y.value.search=="string"?y.value.search:""),x=f(typeof y.value.low_stock=="string"?y.value.low_stock:""),c=f(typeof y.value.sort_by=="string"?y.value.sort_by:"updated_at"),p=f(typeof y.value.sort_order=="string"?y.value.sort_order:"desc"),S=f(!1),P=f(!1),w=f(null),_=f(1),C=f(""),b=f({}),I=[{title:"Products",href:"/products"}];H(()=>{g.value=a.props.filters&&typeof a.props.filters.search=="string"?a.props.filters.search:"",x.value=a.props.filters&&typeof a.props.filters.low_stock=="string"?a.props.filters.low_stock:""});let N=null;Y(g,n=>{N&&clearTimeout(N),N=setTimeout(()=>{h.get("/products",{search:n,low_stock:x.value,sort_by:c.value,sort_order:p.value},{preserveState:!0,replace:!0})},400)}),H(()=>{c.value=a.props.filters&&typeof a.props.filters.sort_by=="string"?a.props.filters.sort_by:"updated_at",p.value=a.props.filters&&typeof a.props.filters.sort_order=="string"?a.props.filters.sort_order:"desc"});function K(){x.value=x.value?"":"1",h.get("/products",{search:g.value,low_stock:x.value,sort_by:c.value,sort_order:p.value},{preserveState:!0,replace:!0})}function q(n){h.get("/products",{search:g.value,low_stock:x.value,page:n,sort_by:c.value,sort_order:p.value},{preserveState:!0,replace:!0})}function D(n){c.value===n?p.value=p.value==="asc"?"desc":"asc":(c.value=n,p.value="asc"),h.get("/products",{search:g.value,low_stock:x.value,sort_by:c.value,sort_order:p.value},{preserveState:!0,replace:!0})}function U(n){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(n)}async function R(n){(await M.fire({title:"Delete Product?",text:"Are you sure you want to delete this product? This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#8f5be8",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete product"})).isConfirmed&&h.delete(`/products/${n}`,{onSuccess:()=>{M.fire("Product deleted","Product deleted successfully.","success")}})}function Q(n){w.value=n,_.value=1,C.value="",b.value={},P.value=!0}function E(){P.value=!1,w.value=null,_.value=1,C.value="",b.value={}}async function W(){var n;if(w.value){if(b.value={},!_.value||_.value<1){b.value.quantity="Quantity must be at least 1";return}try{const t=await fetch(route("products.addStock",w.value.id),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":((n=document.querySelector('meta[name="csrf-token"]'))==null?void 0:n.getAttribute("content"))||"","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({quantity:_.value,notes:C.value})}),s=await t.json();t.ok&&s.success?(M.fire("Success",s.message,"success"),E(),h.reload({only:["products","stats"]})):M.fire("Error",s.message||"Failed to add stock","error")}catch{M.fire("Error","An error occurred while adding stock","error")}}}return(n,t)=>(i(),T(rt,{breadcrumbs:I},{default:r(()=>[o(l(Z),{title:"Products"}),o(tt,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 transform -translate-y-4","enter-to-class":"opacity-100 transform translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 transform translate-y-0","leave-to-class":"opacity-0 transform -translate-y-4"},{default:r(()=>[z(e("div",ft,[o($,{class:"relative overflow-hidden"},{default:r(()=>[o(j,{class:"p-6"},{default:r(()=>{var s;return[e("div",mt,[e("div",null,[t[10]||(t[10]=e("p",{class:"text-sm font-medium text-muted-foreground"},"Total Products",-1)),e("p",vt,u(((s=l(a).props.stats)==null?void 0:s.totalProducts)||0),1)]),t[11]||(t[11]=e("div",{class:"h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})])],-1))])]}),_:1})]),_:1}),o($,{class:"relative overflow-hidden"},{default:r(()=>[o(j,{class:"p-6"},{default:r(()=>{var s;return[e("div",xt,[e("div",null,[t[12]||(t[12]=e("p",{class:"text-sm font-medium text-muted-foreground"},"Total Stock",-1)),e("p",yt,u(((s=l(a).props.stats)==null?void 0:s.totalStock)||0),1)]),t[13]||(t[13]=e("div",{class:"h-12 w-12 rounded-full bg-green-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-14 0h14"})])],-1))])]}),_:1})]),_:1}),o($,{class:"relative overflow-hidden"},{default:r(()=>[o(j,{class:"p-6"},{default:r(()=>{var s;return[e("div",gt,[e("div",null,[t[14]||(t[14]=e("p",{class:"text-sm font-medium text-muted-foreground"},"Low Stock",-1)),e("p",_t,u(((s=l(a).props.stats)==null?void 0:s.lowStockItems)||0),1)]),t[15]||(t[15]=e("div",{class:"h-12 w-12 rounded-full bg-yellow-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1))])]}),_:1})]),_:1}),o($,{class:"relative overflow-hidden"},{default:r(()=>[o(j,{class:"p-6"},{default:r(()=>{var s;return[e("div",kt,[e("div",null,[t[16]||(t[16]=e("p",{class:"text-sm font-medium text-muted-foreground"},"Total Value",-1)),e("p",wt,u(U(((s=l(a).props.stats)==null?void 0:s.totalValue)||0)),1)]),t[17]||(t[17]=e("div",{class:"h-12 w-12 rounded-full bg-purple-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1))])]}),_:1})]),_:1})],512),[[et,S.value]])]),_:1}),e("div",bt,[e("div",ht,[z(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>g.value=s),type:"text",placeholder:"Search products by name, SKU, or category...",class:"rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[V,g.value]]),o(l(v),{onClick:K,variant:x.value?"default":"outline",class:k(x.value?"bg-yellow-600 hover:bg-yellow-700 text-white":"")},{default:r(()=>[o(B,{name:"alertTriangle",class:"w-4 h-4 mr-2"}),t[18]||(t[18]=d(" Low Stock "))]),_:1,__:[18]},8,["variant","class"])]),e("div",St,[o(l(A),{href:n.route("products.trashed.index")},{default:r(()=>[o(l(v),{variant:"outline"},{default:r(()=>t[19]||(t[19]=[d(" Deleted Products ")])),_:1,__:[19]})]),_:1},8,["href"]),o(l(A),{href:n.route("products.create")},{default:r(()=>[o(l(v),{variant:"default"},{default:r(()=>t[20]||(t[20]=[e("span",{class:"mr-2"},"+",-1),d(" Add New Product ")])),_:1,__:[20]})]),_:1},8,["href"])])]),o($,null,{default:r(()=>[o(j,null,{default:r(()=>[e("table",Ct,[e("thead",null,[e("tr",null,[t[27]||(t[27]=e("th",{class:"px-4 py-2 text-left"},"Name",-1)),t[28]||(t[28]=e("th",{class:"px-4 py-2 text-left"},"Category",-1)),t[29]||(t[29]=e("th",{class:"px-4 py-2 text-left"},"Selling Price",-1)),e("th",{class:"px-4 py-2 text-left cursor-pointer hover:bg-gray-50 select-none",onClick:t[1]||(t[1]=s=>D("initial_stock"))},[e("div",$t,[t[23]||(t[23]=e("span",null,"Stock",-1)),e("div",jt,[(i(),m("svg",{class:k(["w-3 h-3",c.value==="initial_stock"&&p.value==="asc"?"text-blue-600":"text-gray-300"]),fill:"currentColor",viewBox:"0 0 20 20"},t[21]||(t[21]=[e("path",{"fill-rule":"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z","clip-rule":"evenodd"},null,-1)]),2)),(i(),m("svg",{class:k(["w-3 h-3 -mt-1",c.value==="initial_stock"&&p.value==="desc"?"text-blue-600":"text-gray-300"]),fill:"currentColor",viewBox:"0 0 20 20"},t[22]||(t[22]=[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),e("th",{class:"px-4 py-2 text-left cursor-pointer hover:bg-gray-50 select-none",onClick:t[2]||(t[2]=s=>D("stock"))},[e("div",Bt,[t[26]||(t[26]=e("span",null,"Remaining Stock",-1)),e("div",Mt,[(i(),m("svg",{class:k(["w-3 h-3",c.value==="stock"&&p.value==="asc"?"text-blue-600":"text-gray-300"]),fill:"currentColor",viewBox:"0 0 20 20"},t[24]||(t[24]=[e("path",{"fill-rule":"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z","clip-rule":"evenodd"},null,-1)]),2)),(i(),m("svg",{class:k(["w-3 h-3 -mt-1",c.value==="stock"&&p.value==="desc"?"text-blue-600":"text-gray-300"]),fill:"currentColor",viewBox:"0 0 20 20"},t[25]||(t[25]=[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),t[30]||(t[30]=e("th",{class:"px-4 py-2 text-left"},"Unit",-1)),t[31]||(t[31]=e("th",{class:"px-4 py-2 text-left"},"SKU",-1)),t[32]||(t[32]=e("th",{class:"px-4 py-2 text-left"},"Actions",-1))])]),l(a).props.products.data.length?(i(),m("tbody",Pt,[(i(!0),m(st,null,ot(l(a).props.products.data,s=>(i(),m("tr",{key:s.id,class:"hover:bg-muted"},[e("td",Tt,u(s.name),1),e("td",zt,u(s.category?s.category.name:"No category"),1),e("td",At,u(U(s.selling_price)),1),e("td",Lt,[e("span",Nt,u(s.initial_stock??0),1)]),e("td",Vt,[e("span",{class:k(["px-2 py-1 rounded-full text-xs font-medium",s.stock<=10?"bg-red-100 text-red-800":s.stock<=50?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"]),title:s.stock<=10?"Low stock â€” reorder soon":s.stock<=50?"Moderate stock":"In stock"},u(s.stock),11,qt)]),e("td",Dt,u(s.unit||"pcs"),1),e("td",Ut,u(s.SKU),1),e("td",Et,[e("div",Ht,[o(l(v),{variant:"ghost",size:"sm",onClick:X=>Q(s),title:"Add Stock"},{default:r(()=>[o(B,{name:"plus",class:"h-4 w-4"})]),_:2},1032,["onClick"]),o(l(A),{href:n.route("products.stockHistory",s.id)},{default:r(()=>[o(l(v),{variant:"ghost",size:"sm",title:"View Stock History"},{default:r(()=>[o(B,{name:"history",class:"h-4 w-4"})]),_:1})]),_:2},1032,["href"]),o(l(A),{href:n.route("products.edit",s.id)},{default:r(()=>[o(l(v),{variant:"ghost",size:"sm"},{default:r(()=>[o(B,{name:"edit",class:"h-4 w-4"})]),_:1})]),_:2},1032,["href"]),o(l(v),{variant:"ghost",size:"sm",onClick:X=>R(s.id)},{default:r(()=>[o(B,{name:"trash",class:"h-4 w-4"})]),_:2},1032,["onClick"])])])]))),128))])):(i(),m("tbody",Ft,[e("tr",null,[e("td",Ot,[t[33]||(t[33]=d(" No products found. ")),e("button",{type:"button",class:"underline underline-offset-4 ml-1",onClick:t[3]||(t[3]=s=>g.value="")}," Clear search ")])])]))]),l(a).props.products.last_page>1?(i(),m("div",It,[e("div",Kt," Showing "+u(l(a).props.products.from)+" to "+u(l(a).props.products.to)+" of "+u(l(a).props.products.total)+" results ",1),e("div",Rt,[l(a).props.products.prev_page_url?(i(),T(l(v),{key:0,variant:"outline",size:"sm",onClick:t[4]||(t[4]=s=>q(l(a).props.products.current_page-1))},{default:r(()=>t[34]||(t[34]=[d(" Previous ")])),_:1,__:[34]})):L("",!0),l(a).props.products.next_page_url?(i(),T(l(v),{key:1,variant:"outline",size:"sm",onClick:t[5]||(t[5]=s=>q(l(a).props.products.current_page+1))},{default:r(()=>t[35]||(t[35]=[d(" Next ")])),_:1,__:[35]})):L("",!0)])])):L("",!0)]),_:1})]),_:1}),e("div",Qt,[e("button",{onClick:t[6]||(t[6]=s=>S.value=!S.value),class:k(["h-12 w-12 rounded-full shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center",S.value?"bg-red-500 hover:bg-red-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"])},[S.value?(i(),m("svg",Xt,t[37]||(t[37]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)]))):(i(),m("svg",Wt,t[36]||(t[36]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},null,-1)])))],2)]),o(l(at),{open:P.value,"onUpdate:open":t[9]||(t[9]=s=>P.value=s)},{default:r(()=>[o(l(nt),null,{default:r(()=>[o(l(it),null,{default:r(()=>[o(l(ut),null,{default:r(()=>t[38]||(t[38]=[d("Add Stock")])),_:1,__:[38]}),w.value?(i(),T(l(dt),{key:0},{default:r(()=>[t[39]||(t[39]=d(" Add stock to ")),e("strong",null,u(w.value.name),1),t[40]||(t[40]=d(". This will increment both initial stock and remaining stock. "))]),_:1,__:[39,40]})):L("",!0)]),_:1}),e("form",{onSubmit:lt(W,["prevent"]),class:"space-y-4"},[e("div",null,[o(l(F),{for:"stock-quantity"},{default:r(()=>t[41]||(t[41]=[d("Quantity *")])),_:1,__:[41]}),z(e("input",{id:"stock-quantity","onUpdate:modelValue":t[7]||(t[7]=s=>_.value=s),type:"number",min:"1",step:"1",class:"w-full rounded border px-3 py-2 mt-1",required:"",placeholder:"Enter quantity to add"},null,512),[[V,_.value,void 0,{number:!0}]]),o(O,{message:b.value.quantity},null,8,["message"])]),e("div",null,[o(l(F),{for:"stock-notes"},{default:r(()=>t[42]||(t[42]=[d("Notes (Optional)")])),_:1,__:[42]}),z(e("textarea",{id:"stock-notes","onUpdate:modelValue":t[8]||(t[8]=s=>C.value=s),rows:"3",class:"w-full rounded border px-3 py-2 mt-1",placeholder:"Add any notes about this stock addition...",maxlength:"500"},null,512),[[V,C.value]]),o(O,{message:b.value.notes},null,8,["message"])]),o(l(pt),null,{default:r(()=>[o(l(ct),{"as-child":""},{default:r(()=>[o(l(v),{type:"button",variant:"outline",onClick:E},{default:r(()=>t[43]||(t[43]=[d(" Cancel ")])),_:1,__:[43]})]),_:1}),o(l(v),{type:"submit",variant:"default"},{default:r(()=>t[44]||(t[44]=[d(" Add Stock ")])),_:1,__:[44]})]),_:1})],32)]),_:1})]),_:1},8,["open"])]),_:1}))}});export{Oe as default};
