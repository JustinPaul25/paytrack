import{d as h,E as w,j as C,c,o as i,w as a,a as d,b as t,f as r,h as u,u as n,g as q,W as _,e as p,F as R,r as $,t as l,x as S,S as j}from"./app-Cwu7HoSd.js";import{_ as B}from"./AppLayout.vue_vue_type_script_setup_true_lang-By9GJnaP.js";import{_ as A,a as D}from"./CardContent.vue_vue_type_script_setup_true_lang-BYmIXq6h.js";import{_ as N,a as V}from"./CardTitle.vue_vue_type_script_setup_true_lang-DreEaS5s.js";import{_ as f}from"./index-BdY75aZ2.js";import{S as g}from"./sweetalert2.esm.all-BQIkj5Wb.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_0fe2f881_lang-CbPCljGY.js";import"./RovingFocusGroup-BZ7O1hI-.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DQ5B8Mu2.js";import"./createLucideIcon-BlW3GIPw.js";import"./VisuallyHidden-GGl4KIsE.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DAN9CPXS.js";const z={class:"flex items-center justify-between my-6"},P={class:"flex gap-2"},T=["value"],L={key:0,class:"py-8 text-center text-sm text-gray-500"},I={key:0},E={class:"mt-3"},F={key:1},Q={key:1},W={class:"min-w-full divide-y divide-border"},M={class:"px-4 py-2"},Y={class:"font-medium"},G={key:0,class:"text-xs text-gray-500 truncate max-w-64"},H={class:"px-4 py-2"},J={class:"text-sm"},K={class:"px-4 py-2"},O={class:"text-sm"},U={key:0,class:"text-xs text-gray-500"},X={class:"px-4 py-2"},Z={class:"px-4 py-2"},ee={class:"px-4 py-2 text-sm text-gray-500"},te={class:"px-4 py-2"},se={class:"flex gap-2"},ie={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},ne={class:"relative bg-background rounded-lg shadow-lg w-[90%] max-w-lg p-6"},oe={class:"flex items-center justify-between mb-3"},le={class:"space-y-3"},ae={class:"font-medium"},re={key:0},de={class:"whitespace-pre-wrap"},ue={key:1},pe=["href"],ve={class:"mt-6 flex justify-end"},Re=h({__name:"Index",setup(fe){const m=w(),x=m.props.filters||{},o=C(null);function k(v){g.fire({title:"Approve this refund request?",icon:"question",showCancelButton:!0,confirmButtonText:"Approve",confirmButtonColor:"#10b981",input:"textarea",inputLabel:"Approval notes (optional)",inputPlaceholder:"Notes for this approval...",inputAttributes:{"aria-label":"Approval notes (optional)"}}).then(e=>{e.isConfirmed&&_.post(route("refundRequests.approve",v),{review_notes:e.value||void 0},{preserveScroll:!0})})}function b(v){g.fire({title:"Decline this refund request?",text:"This will mark the request as rejected. You can’t undo this.",icon:"warning",showCancelButton:!0,confirmButtonText:"Decline",confirmButtonColor:"#ef4444",input:"textarea",inputLabel:"Reason (required)",inputPlaceholder:"Provide a reason for declining...",inputAttributes:{"aria-label":"Reason (required)"},inputValidator:e=>{if(!e||!e.trim())return"Please provide a brief reason."}}).then(e=>{e.isConfirmed&&_.post(route("refundRequests.reject",v),{review_notes:e.value},{preserveScroll:!0})})}return(v,e)=>(i(),c(B,null,{default:a(()=>[d(n(q),{title:"Refund Requests"}),t("div",z,[e[6]||(e[6]=t("h1",{class:"text-2xl font-bold"},"Refund Requests",-1)),t("div",P,[t("select",{class:"rounded-md border border-input bg-background px-3 py-2 text-sm",value:n(x).status||"pending",onChange:e[0]||(e[0]=s=>n(_).get(v.route("refundRequests.index"),{status:s.target.value},{preserveState:!0,replace:!0}))},e[5]||(e[5]=[t("option",{value:"pending"},"Pending",-1),t("option",{value:"approved"},"Approved",-1),t("option",{value:"rejected"},"Rejected",-1),t("option",{value:"converted"},"Converted",-1)]),40,T)])]),d(A,null,{default:a(()=>[d(N,null,{default:a(()=>[d(V,null,{default:a(()=>e[7]||(e[7]=[p("Requests")])),_:1,__:[7]})]),_:1}),d(D,null,{default:a(()=>[n(m).props.refundRequests.data.length?(i(),r("div",Q,[t("table",W,[e[14]||(e[14]=t("thead",null,[t("tr",null,[t("th",{class:"px-4 py-2 text-left"},"Tracking"),t("th",{class:"px-4 py-2 text-left"},"Invoice"),t("th",{class:"px-4 py-2 text-left"},"Customer"),t("th",{class:"px-4 py-2 text-left"},"Qty"),t("th",{class:"px-4 py-2 text-left"},"Status"),t("th",{class:"px-4 py-2 text-left"},"Submitted"),t("th",{class:"px-4 py-2 text-left"},"Actions")])],-1)),t("tbody",null,[(i(!0),r(R,null,$(n(m).props.refundRequests.data,s=>(i(),r("tr",{key:s.id,class:"hover:bg-muted"},[t("td",M,[t("div",Y,l(s.tracking_number),1),s.reason?(i(),r("div",G,l(s.reason),1)):u("",!0)]),t("td",H,[t("div",J,l(s.invoice_reference||"#"+s.invoice_id),1)]),t("td",K,[t("div",O,l(s.customer_name),1),s.email?(i(),r("div",U,l(s.email),1)):u("",!0)]),t("td",X,l(s.quantity),1),t("td",Z,[t("span",{class:S(["px-2 py-1 rounded-full text-xs font-medium",{"bg-yellow-100 text-yellow-800":s.status==="pending","bg-green-100 text-green-800":s.status==="approved"||s.status==="converted","bg-red-100 text-red-800":s.status==="rejected"}])},l(s.status),3)]),t("td",ee,l(new Date(s.created_at).toLocaleString()),1),t("td",te,[t("div",se,[s.status==="pending"?(i(),c(n(f),{key:0,size:"sm",variant:"default",onClick:y=>k(s.id)},{default:a(()=>e[10]||(e[10]=[p(" Approve ")])),_:2,__:[10]},1032,["onClick"])):u("",!0),s.status==="pending"?(i(),c(n(f),{key:1,size:"sm",variant:"destructive",onClick:y=>b(s.id)},{default:a(()=>e[11]||(e[11]=[p(" Decline ")])),_:2,__:[11]},1032,["onClick"])):u("",!0),d(n(f),{size:"sm",variant:"outline",onClick:y=>o.value=s},{default:a(()=>e[12]||(e[12]=[p("View details")])),_:2,__:[12]},1032,["onClick"]),s.invoice_id?(i(),c(n(j),{key:2,href:v.route("invoices.show",s.invoice_id)},{default:a(()=>[d(n(f),{size:"sm",variant:"ghost"},{default:a(()=>e[13]||(e[13]=[p("View Invoice")])),_:1,__:[13]})]),_:2},1032,["href"])):u("",!0)])])]))),128))])])])):(i(),r("div",L,[n(x).status&&n(x).status!==""?(i(),r("div",I,[e[9]||(e[9]=p(" No refund requests for the selected filter. ")),t("div",E,[d(n(f),{variant:"outline",onClick:e[1]||(e[1]=s=>n(_).get(v.route("refundRequests.index"),{status:"pending"},{preserveState:!0,replace:!0}))},{default:a(()=>e[8]||(e[8]=[p(" Clear filters ")])),_:1,__:[8]})])])):(i(),r("div",F," No refund requests. "))]))]),_:1})]),_:1}),o.value?(i(),r("div",ie,[t("div",{class:"absolute inset-0 bg-black/50",onClick:e[2]||(e[2]=s=>o.value=null)}),t("div",ne,[t("div",oe,[e[15]||(e[15]=t("h3",{class:"text-lg font-semibold"},"Refund Request Details",-1)),t("button",{class:"text-sm text-gray-500",onClick:e[3]||(e[3]=s=>o.value=null)},"Close")]),t("div",le,[t("div",null,[e[16]||(e[16]=t("div",{class:"text-xs text-gray-500"},"Tracking",-1)),t("div",ae,l(o.value.tracking_number),1)]),o.value.product_name?(i(),r("div",re,[e[17]||(e[17]=t("div",{class:"text-xs text-gray-500"},"Product",-1)),t("div",null,l(o.value.product_name),1)])):u("",!0),t("div",null,[e[18]||(e[18]=t("div",{class:"text-xs text-gray-500"},"Quantity",-1)),t("div",null,l(o.value.quantity),1)]),t("div",null,[e[19]||(e[19]=t("div",{class:"text-xs text-gray-500"},"Description",-1)),t("div",de,l(o.value.reason||"—"),1)]),o.value.media_link?(i(),r("div",ue,[e[20]||(e[20]=t("div",{class:"text-xs text-gray-500"},"Media Link",-1)),t("a",{href:o.value.media_link,target:"_blank",class:"text-blue-500 underline break-all"},l(o.value.media_link),9,pe)])):u("",!0)]),t("div",ve,[d(n(f),{variant:"default",onClick:e[4]||(e[4]=s=>o.value=null)},{default:a(()=>e[21]||(e[21]=[p("Done")])),_:1,__:[21]})])])])):u("",!0)]),_:1}))}});export{Re as default};
