import{d as j,E as F,l as U,c as _,o as a,w as o,a as i,b as t,u as c,g as V,t as l,f as u,h as r,e as m,F as b,S as D,x as h,r as k}from"./app-t40oy0qQ.js";import{_ as g}from"./index-VOqVSyLk.js";import{w as T,x as E,y as L,_ as Q}from"./AppLayout.vue_vue_type_script_setup_true_lang-CylBytAS.js";import{_ as p,a as v}from"./CardContent.vue_vue_type_script_setup_true_lang-fpDXvKRZ.js";import{_ as y,a as x}from"./CardTitle.vue_vue_type_script_setup_true_lang-DibdpYuD.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_0fe2f881_lang-DVnAmXFJ.js";import"./RovingFocusGroup-CUnu6A6r.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CbeqhPF_.js";import"./createLucideIcon-DERR9B5J.js";import"./VisuallyHidden-BBCMANA8.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CiqG73Ph.js";const z={class:"flex items-center justify-between my-6"},H={class:"text-2xl font-bold"},M={class:"flex gap-2"},K={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},W={class:"lg:col-span-2 space-y-6"},Y={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},G={class:"text-lg font-semibold"},J={key:0},O={key:0,class:"mt-4"},X={class:"mt-1"},Z={class:"overflow-x-auto"},tt={class:"min-w-full divide-y divide-border"},et={class:"px-4 py-2"},st={class:"font-medium"},nt={class:"text-sm text-gray-500"},lt={class:"px-4 py-2"},ot={class:"px-4 py-2"},it={class:"px-4 py-2 font-medium"},at={class:"border-t"},dt={class:"px-4 py-2 font-medium"},ut={colspan:"3",class:"px-4 py-2 text-right font-medium"},rt={class:"px-4 py-2 font-medium"},mt={class:"border-t"},ct={class:"px-4 py-2 font-bold text-lg"},_t={class:"space-y-6"},ft={class:"space-y-3"},pt={class:"flex items-center justify-between"},vt={class:"font-medium"},yt={class:"text-sm text-gray-600"},xt={key:0},gt={class:"text-xs text-gray-500"},bt={key:1,class:"mt-1 text-xs text-red-500"},ht={key:2,class:"text-xs"},kt=["href"],wt={class:"space-y-3"},Rt={class:"flex items-center justify-between"},Ct={class:"font-medium"},Pt={class:"text-sm text-gray-600"},qt={key:0},Dt={class:"text-xs text-gray-500"},It={class:"space-y-3"},St={class:"flex items-center gap-3"},$t={class:"font-medium"},At={key:0},Nt={key:1},Bt={key:2},jt={class:"text-sm"},Ft={class:"mt-3"},Ut={class:"text-sm"},Gt=j({__name:"Show",props:{invoice:{},refunds:{},refundRequests:{}},setup(I){var q;const s=I,w=F(),S=Array.isArray((q=w.props.auth)==null?void 0:q.userRoles)&&w.props.auth.userRoles.includes("Customer"),$=U(()=>Array.isArray(s.refundRequests)&&s.refundRequests.some(d=>d.status==="pending")),A=[{title:"Invoices",href:"/invoices"},{title:s.invoice.reference_number,href:`/invoices/${s.invoice.id}`}];function N(d){switch(d){case"draft":return"bg-gray-100 text-gray-800";case"pending":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}function f(d){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(d)}function R(d){return new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function C(){window.print()}function P(d){if(!d.media||d.media.length===0)return null;const e=d.media.find(n=>n.mime_type.startsWith("image/"));return e?e.thumb_url||e.original_url:null}function B(d){return d.name.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2)}return(d,e)=>(a(),_(Q,{breadcrumbs:A},{default:o(()=>[i(c(V),{title:s.invoice.reference_number},null,8,["title"]),t("div",z,[t("h1",H,l(s.invoice.reference_number),1),t("div",M,[i(c(g),{variant:"outline",onClick:C},{default:o(()=>e[0]||(e[0]=[m("Download PDF")])),_:1,__:[0]}),i(c(g),{variant:"outline",onClick:C},{default:o(()=>e[1]||(e[1]=[m("Print")])),_:1,__:[1]}),c(S)&&s.invoice.status==="completed"?(a(),u(b,{key:0},[$.value?(a(),_(c(g),{key:1,variant:"outline",disabled:"",title:"You already have a pending refund request for this invoice."},{default:o(()=>e[3]||(e[3]=[m(" Request Pending ")])),_:1,__:[3]})):(a(),_(c(D),{key:0,href:d.route("refundRequests.create",s.invoice.id)},{default:o(()=>[i(c(g),{variant:"default"},{default:o(()=>e[2]||(e[2]=[m("Request Refund")])),_:1,__:[2]})]),_:1},8,["href"]))],64)):r("",!0),i(c(D),{href:d.route("invoices.index")},{default:o(()=>[i(c(g),{variant:"ghost"},{default:o(()=>e[4]||(e[4]=[m("Back")])),_:1,__:[4]})]),_:1},8,["href"])])]),t("div",K,[t("div",W,[i(p,null,{default:o(()=>[i(y,null,{default:o(()=>[i(x,null,{default:o(()=>e[5]||(e[5]=[m("Invoice Information")])),_:1,__:[5]})]),_:1}),i(v,null,{default:o(()=>[t("div",Y,[t("div",null,[e[6]||(e[6]=t("label",{class:"text-sm font-medium text-gray-500"},"Reference Number",-1)),t("p",G,l(s.invoice.reference_number),1)]),t("div",null,[e[7]||(e[7]=t("label",{class:"text-sm font-medium text-gray-500"},"Date Created",-1)),t("p",null,l(R(s.invoice.created_at)),1)]),t("div",null,[e[8]||(e[8]=t("label",{class:"text-sm font-medium text-gray-500"},"Status",-1)),t("span",{class:h(["px-2 py-1 rounded-full text-xs font-medium",N(s.invoice.status)])},l(s.invoice.status),3)]),t("div",null,[e[9]||(e[9]=t("label",{class:"text-sm font-medium text-gray-500"},"Payment Method",-1)),t("p",null,l(s.invoice.payment_method.replace("_"," ")),1)]),s.invoice.payment_reference?(a(),u("div",J,[e[10]||(e[10]=t("label",{class:"text-sm font-medium text-gray-500"},"Payment Reference",-1)),t("p",null,l(s.invoice.payment_reference),1)])):r("",!0)]),s.invoice.notes?(a(),u("div",O,[e[11]||(e[11]=t("label",{class:"text-sm font-medium text-gray-500"},"Notes",-1)),t("p",X,l(s.invoice.notes),1)])):r("",!0)]),_:1})]),_:1}),i(p,null,{default:o(()=>[i(y,null,{default:o(()=>[i(x,null,{default:o(()=>e[12]||(e[12]=[m("Invoice Items")])),_:1,__:[12]})]),_:1}),i(v,null,{default:o(()=>[t("div",Z,[t("table",tt,[e[15]||(e[15]=t("thead",null,[t("tr",null,[t("th",{class:"px-4 py-2 text-left"},"Product"),t("th",{class:"px-4 py-2 text-left"},"Quantity"),t("th",{class:"px-4 py-2 text-left"},"Price"),t("th",{class:"px-4 py-2 text-left"},"Total")])],-1)),t("tbody",null,[(a(!0),u(b,null,k(s.invoice.invoice_items,n=>(a(),u("tr",{key:n.id,class:"hover:bg-muted"},[t("td",et,[t("div",null,[t("div",st,l(n.product.name),1),t("div",nt,"SKU: "+l(n.product.id),1)])]),t("td",lt,l(n.quantity),1),t("td",ot,l(f(n.price)),1),t("td",it,l(f(n.total)),1)]))),128))]),t("tfoot",null,[t("tr",at,[e[13]||(e[13]=t("td",{colspan:"3",class:"px-4 py-2 text-right font-medium"},"Subtotal:",-1)),t("td",dt,l(f(s.invoice.subtotal_amount)),1)]),t("tr",null,[t("td",ut,"VAT ("+l(s.invoice.vat_rate)+"%):",1),t("td",rt,l(f(s.invoice.vat_amount)),1)]),t("tr",mt,[e[14]||(e[14]=t("td",{colspan:"3",class:"px-4 py-2 text-right font-bold text-lg"},"Total Amount:",-1)),t("td",ct,l(f(s.invoice.total_amount)),1)])])])])]),_:1})]),_:1})]),t("div",_t,[s.refundRequests&&s.refundRequests.length?(a(),_(p,{key:0},{default:o(()=>[i(y,null,{default:o(()=>[i(x,null,{default:o(()=>e[16]||(e[16]=[m("Refund Requests")])),_:1,__:[16]})]),_:1}),i(v,null,{default:o(()=>[t("div",ft,[(a(!0),u(b,null,k(s.refundRequests,n=>(a(),u("div",{key:n.id,class:"border rounded-md p-3"},[t("div",pt,[t("div",vt,l(n.tracking_number),1),t("span",{class:h(["px-2 py-1 rounded-full text-xs font-medium",{"bg-yellow-100 text-yellow-800":n.status==="pending","bg-green-100 text-green-800":n.status==="approved"||n.status==="converted","bg-red-100 text-red-800":n.status==="rejected"}])},l(n.status),3)]),t("div",yt,[n.product_name?(a(),u("div",xt,"Product: "+l(n.product_name),1)):r("",!0),t("div",null,"Qty: "+l(n.quantity),1),t("div",gt,"Date: "+l(n.created_at),1),n.status==="rejected"&&n.review_notes?(a(),u("div",bt," Reason: "+l(n.review_notes),1)):r("",!0),n.media_link?(a(),u("div",ht,[t("a",{href:n.media_link,target:"_blank",class:"text-blue-500 underline"},"Media",8,kt)])):r("",!0)])]))),128))])]),_:1})]),_:1})):r("",!0),s.refunds&&s.refunds.length?(a(),_(p,{key:1},{default:o(()=>[i(y,null,{default:o(()=>[i(x,null,{default:o(()=>e[17]||(e[17]=[m("Refunds")])),_:1,__:[17]})]),_:1}),i(v,null,{default:o(()=>[t("div",wt,[(a(!0),u(b,null,k(s.refunds,n=>(a(),u("div",{key:n.id,class:"border rounded-md p-3"},[t("div",Rt,[t("div",Ct,l(n.refund_number),1),t("span",{class:h(["px-2 py-1 rounded-full text-xs font-medium",{"bg-green-100 text-green-800":n.status==="approved"||n.status==="completed","bg-yellow-100 text-yellow-800":n.status==="pending","bg-red-100 text-red-800":n.status==="cancelled"}])},l(n.status),3)]),t("div",Pt,[n.product_name?(a(),u("div",qt,"Product: "+l(n.product_name),1)):r("",!0),t("div",null,"Qty: "+l(n.quantity_refunded),1),t("div",null,"Amount: "+l(f(n.refund_amount)),1),t("div",Dt,"Date: "+l(n.created_at),1)])]))),128))])]),_:1})]),_:1})):r("",!0),i(p,null,{default:o(()=>[i(y,null,{default:o(()=>[i(x,null,{default:o(()=>e[18]||(e[18]=[m("Customer Information")])),_:1,__:[18]})]),_:1}),i(v,null,{default:o(()=>[t("div",It,[t("div",St,[i(T,{class:"size-12"},{default:o(()=>[P(s.invoice.customer)?(a(),_(E,{key:0,src:P(s.invoice.customer),alt:s.invoice.customer.name},null,8,["src","alt"])):(a(),_(L,{key:1},{default:o(()=>[m(l(B(s.invoice.customer)),1)]),_:1}))]),_:1}),t("div",null,[e[19]||(e[19]=t("label",{class:"text-sm font-medium text-gray-500"},"Name",-1)),t("p",$t,l(s.invoice.customer.name),1)])]),s.invoice.customer.company_name?(a(),u("div",At,[e[20]||(e[20]=t("label",{class:"text-sm font-medium text-gray-500"},"Company",-1)),t("p",null,l(s.invoice.customer.company_name),1)])):r("",!0),t("div",null,[e[21]||(e[21]=t("label",{class:"text-sm font-medium text-gray-500"},"Email",-1)),t("p",null,l(s.invoice.customer.email),1)]),s.invoice.customer.phone?(a(),u("div",Nt,[e[22]||(e[22]=t("label",{class:"text-sm font-medium text-gray-500"},"Phone",-1)),t("p",null,l(s.invoice.customer.phone),1)])):r("",!0),s.invoice.customer.address?(a(),u("div",Bt,[e[23]||(e[23]=t("label",{class:"text-sm font-medium text-gray-500"},"Address",-1)),t("p",jt,l(s.invoice.customer.address),1)])):r("",!0)])]),_:1})]),_:1}),i(p,null,{default:o(()=>[i(y,null,{default:o(()=>[i(x,null,{default:o(()=>e[24]||(e[24]=[m("Created By")])),_:1,__:[24]})]),_:1}),i(v,null,{default:o(()=>[t("div",null,[e[25]||(e[25]=t("label",{class:"text-sm font-medium text-gray-500"},"User",-1)),t("p",null,l(s.invoice.user.name),1)]),t("div",Ft,[e[26]||(e[26]=t("label",{class:"text-sm font-medium text-gray-500"},"Last Updated",-1)),t("p",Ut,l(R(s.invoice.updated_at)),1)])]),_:1})]),_:1})])])]),_:1}))}});export{Gt as default};
