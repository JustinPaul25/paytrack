import{d as I,D as P,f as b,o as N,b as o,a as t,w as r,e as n,u as l,x as S,y as F,h as B,k as $,t as j,E as D}from"./app-CV5oiuOr.js";import{_ as u}from"./InputError.vue_vue_type_script_setup_true_lang-DkSATGk4.js";import{_ as m}from"./Label.vue_vue_type_script_setup_true_lang-BE0ifdHf.js";import{_ as f}from"./Input.vue_vue_type_script_setup_true_lang-CW4ZIYC5.js";import{_ as M}from"./PhoneInput.vue_vue_type_script_setup_true_lang-g7-RlwVF.js";import{_ as k}from"./index-CnkeYTpB.js";import{_ as E}from"./CardFooter.vue_vue_type_script_setup_true_lang-D-AI5iAv.js";import G from"./LocationInput-Cgz6Wi2S.js";const L={class:"flex gap-4"},T={class:"flex-1"},z={class:"flex gap-4"},A={class:"flex-1"},J={class:"flex gap-4"},q={class:"flex-1"},O={class:"flex gap-4"},H={class:"flex-1"},W={class:"flex gap-4"},K={class:"flex-1"},Q={class:"flex gap-4"},R={class:"flex-1"},Y={class:"flex gap-4"},Z={class:"flex-1"},ee={key:0,class:"mt-2"},se=["src"],de=I({__name:"Form",props:{customer:Object,profileImageUrl:String},setup(g){var c,_,x,y,v,V;const i=g,w=()=>{var d;if((d=i.customer)!=null&&d.location){const e=i.customer.location;if(typeof e=="string")try{return JSON.parse(e)}catch{return{lat:0,lng:0}}else if(typeof e=="object"&&e!==null){const a=parseFloat(e.lat),p=parseFloat(e.lng);if(!isNaN(a)&&!isNaN(p))return{lat:a,lng:p}}}return{lat:0,lng:0}},s=P({name:((c=i.customer)==null?void 0:c.name)||"",company_name:((_=i.customer)==null?void 0:_.company_name)||"",email:((x=i.customer)==null?void 0:x.email)||"",phone:((y=i.customer)==null?void 0:y.phone)||"",address:((v=i.customer)==null?void 0:v.address)||"",profile_image:null,customerId:((V=i.customer)==null?void 0:V.id)||null,location:w()});function U(d){const e=d.target;if(e.files&&e.files.length>0){const a=e.files[0],p=["image/jpeg","image/png"].includes(a.type),h=a.size<=2*1024*1024;if(!p||!h){s.profile_image=null,e.value="";const C=p?"File is too large. Max size is 2MB.":"Please select a JPG or PNG image.";window.alert(C);return}s.profile_image=a}else s.profile_image=null}function X(){s.customerId?s.post(route("customers.update",s.customerId),{forceFormData:!0,onSuccess:()=>s.reset("profile_image")}):s.post(route("customers.store"),{forceFormData:!0,onSuccess:()=>s.reset("profile_image")})}return(d,e)=>(N(),b("form",{onSubmit:D(X,["prevent"]),class:"space-y-6",enctype:"multipart/form-data"},[o("div",L,[o("div",T,[t(m,{for:"name"},{default:r(()=>e[6]||(e[6]=[n("Full name")])),_:1,__:[6]}),t(f,{id:"name",modelValue:l(s).name,"onUpdate:modelValue":e[0]||(e[0]=a=>l(s).name=a),placeholder:"e.g., Aisha Bello",required:""},null,8,["modelValue"]),e[7]||(e[7]=o("p",{class:"text-xs text-muted-foreground mt-1"},"This is the customer’s name.",-1)),t(u,{message:l(s).errors.name},null,8,["message"])])]),o("div",z,[o("div",A,[t(m,{for:"company_name"},{default:r(()=>e[8]||(e[8]=[n("Company (optional)")])),_:1,__:[8]}),t(f,{id:"company_name",modelValue:l(s).company_name,"onUpdate:modelValue":e[1]||(e[1]=a=>l(s).company_name=a),placeholder:"e.g., Bright Ventures Ltd."},null,8,["modelValue"]),e[9]||(e[9]=o("p",{class:"text-xs text-muted-foreground mt-1"},"Add if this customer represents a company.",-1)),t(u,{message:l(s).errors.company_name},null,8,["message"])])]),o("div",J,[o("div",q,[t(m,{for:"email"},{default:r(()=>e[10]||(e[10]=[n("Email address")])),_:1,__:[10]}),t(f,{id:"email",modelValue:l(s).email,"onUpdate:modelValue":e[2]||(e[2]=a=>l(s).email=a),type:"email",placeholder:"name@company.com",required:""},null,8,["modelValue"]),e[11]||(e[11]=o("p",{class:"text-xs text-muted-foreground mt-1"},"We’ll use this to send receipts.",-1)),t(u,{message:l(s).errors.email},null,8,["message"])])]),o("div",O,[o("div",H,[t(m,{for:"phone"},{default:r(()=>e[12]||(e[12]=[n("Phone number (optional)")])),_:1,__:[12]}),t(M,{id:"phone",modelValue:l(s).phone,"onUpdate:modelValue":e[3]||(e[3]=a=>l(s).phone=a),placeholder:"XXXXXXXXXX"},null,8,["modelValue"]),e[13]||(e[13]=o("p",{class:"text-xs text-muted-foreground mt-1"},"Enter 10-digit Philippine mobile number.",-1)),t(u,{message:l(s).errors.phone},null,8,["message"])])]),o("div",W,[o("div",K,[t(m,{for:"address"},{default:r(()=>e[14]||(e[14]=[n("Address")])),_:1,__:[14]}),S(o("textarea",{id:"address","onUpdate:modelValue":e[4]||(e[4]=a=>l(s).address=a),placeholder:"Street, city, state",class:"w-full rounded border px-3 py-2 mt-1",rows:"3"},null,512),[[F,l(s).address]]),e[15]||(e[15]=o("p",{class:"text-xs text-muted-foreground mt-1"},"Helps with delivery and invoices.",-1)),t(u,{message:l(s).errors.address},null,8,["message"])])]),o("div",Q,[o("div",R,[t(m,{for:"location"},{default:r(()=>e[16]||(e[16]=[n("Location")])),_:1,__:[16]}),t(G,{modelValue:l(s).location,"onUpdate:modelValue":e[5]||(e[5]=a=>l(s).location=a)},null,8,["modelValue"])])]),o("div",Y,[o("div",Z,[t(m,{for:"profile_image"},{default:r(()=>e[17]||(e[17]=[n("Profile picture (optional)")])),_:1,__:[17]}),t(f,{id:"profile_image",type:"file",accept:"image/jpeg,image/png",onChange:U}),e[18]||(e[18]=o("p",{class:"text-xs text-muted-foreground mt-1"},"Max 2MB, JPG or PNG.",-1)),t(u,{message:l(s).errors.profile_image},null,8,["message"]),g.profileImageUrl?(N(),b("div",ee,[o("img",{src:g.profileImageUrl,alt:"Profile Image",class:"w-24 h-24 object-cover rounded-full"},null,8,se)])):B("",!0)])]),t(E,{class:"flex gap-2 justify-end"},{default:r(()=>[t(l(k),{type:"submit",variant:"default"},{default:r(()=>[n(j(l(s).customerId?"Update Customer":"Create Customer"),1)]),_:1}),$(d.$slots,"footer")]),_:3})],32))}});export{de as _};
