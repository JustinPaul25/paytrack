import{d as S,D as B,f as h,o as I,b as t,a as l,w as r,e as m,u as a,A as F,B as j,h as D,k as M,t as $,q as L}from"./app-BKBIjJ8s.js";import{_ as u}from"./InputError.vue_vue_type_script_setup_true_lang-L3IbykzA.js";import{_ as d}from"./Label.vue_vue_type_script_setup_true_lang-CcT7hBz0.js";import{_ as f}from"./Input.vue_vue_type_script_setup_true_lang-QAFbbfw-.js";import{_ as k}from"./index-BRmZJ9Xg.js";import{_ as A}from"./CardFooter.vue_vue_type_script_setup_true_lang-VKDYAl77.js";import{L as G}from"./LocationInput-f3arVfda.js";const T={class:"flex gap-4"},q={class:"flex-1"},z={class:"flex gap-4"},J={class:"flex-1"},E={class:"flex gap-4"},O={class:"flex-1"},H={class:"flex gap-4"},W={class:"flex-1"},K={class:"flex gap-4"},Q={class:"flex-1"},R={class:"flex gap-4"},X={class:"flex-1"},Y={class:"flex gap-4"},Z={class:"flex-1"},ee={key:0,class:"mt-2"},se=["src"],me=S({__name:"Form",props:{customer:Object,profileImageUrl:String},setup(c){var g,_,x,v,y,V;const n=c,N=()=>{var i;if((i=n.customer)!=null&&i.location){const e=n.customer.location;if(typeof e=="string")try{return JSON.parse(e)}catch{return{lat:0,lng:0}}else if(typeof e=="object"&&e!==null){const o=parseFloat(e.lat),p=parseFloat(e.lng);if(!isNaN(o)&&!isNaN(p))return{lat:o,lng:p}}}return{lat:0,lng:0}},s=B({name:((g=n.customer)==null?void 0:g.name)||"",company_name:((_=n.customer)==null?void 0:_.company_name)||"",email:((x=n.customer)==null?void 0:x.email)||"",phone:((v=n.customer)==null?void 0:v.phone)||"",address:((y=n.customer)==null?void 0:y.address)||"",profile_image:null,customerId:((V=n.customer)==null?void 0:V.id)||null,location:N()});function w(i){const e=i.target;if(e.files&&e.files.length>0){const o=e.files[0],p=["image/jpeg","image/png"].includes(o.type),C=o.size<=2*1024*1024;if(!p||!C){s.profile_image=null,e.value="";const P=p?"File is too large. Max size is 2MB.":"Please select a JPG or PNG image.";window.alert(P);return}s.profile_image=o}else s.profile_image=null}function U(i){const e=i.target,o=e.value.replace(/[^0-9+\s()\-]/g,"");o!==e.value&&(e.value=o),s.phone=o}function b(){s.customerId?s.post(route("customers.update",s.customerId),{forceFormData:!0,onSuccess:()=>s.reset("profile_image")}):s.post(route("customers.store"),{forceFormData:!0,onSuccess:()=>s.reset("profile_image")})}return(i,e)=>(I(),h("form",{onSubmit:L(b,["prevent"]),class:"space-y-6",enctype:"multipart/form-data"},[t("div",T,[t("div",q,[l(d,{for:"name"},{default:r(()=>e[6]||(e[6]=[m("Full name")])),_:1,__:[6]}),l(f,{id:"name",modelValue:a(s).name,"onUpdate:modelValue":e[0]||(e[0]=o=>a(s).name=o),placeholder:"e.g., Aisha Bello",required:""},null,8,["modelValue"]),e[7]||(e[7]=t("p",{class:"text-xs text-muted-foreground mt-1"},"This is the customer’s name.",-1)),l(u,{message:a(s).errors.name},null,8,["message"])])]),t("div",z,[t("div",J,[l(d,{for:"company_name"},{default:r(()=>e[8]||(e[8]=[m("Company (optional)")])),_:1,__:[8]}),l(f,{id:"company_name",modelValue:a(s).company_name,"onUpdate:modelValue":e[1]||(e[1]=o=>a(s).company_name=o),placeholder:"e.g., Bright Ventures Ltd."},null,8,["modelValue"]),e[9]||(e[9]=t("p",{class:"text-xs text-muted-foreground mt-1"},"Add if this customer represents a company.",-1)),l(u,{message:a(s).errors.company_name},null,8,["message"])])]),t("div",E,[t("div",O,[l(d,{for:"email"},{default:r(()=>e[10]||(e[10]=[m("Email address")])),_:1,__:[10]}),l(f,{id:"email",modelValue:a(s).email,"onUpdate:modelValue":e[2]||(e[2]=o=>a(s).email=o),type:"email",placeholder:"name@company.com",required:""},null,8,["modelValue"]),e[11]||(e[11]=t("p",{class:"text-xs text-muted-foreground mt-1"},"We’ll use this to send receipts.",-1)),l(u,{message:a(s).errors.email},null,8,["message"])])]),t("div",H,[t("div",W,[l(d,{for:"phone"},{default:r(()=>e[12]||(e[12]=[m("Phone number (optional)")])),_:1,__:[12]}),l(f,{id:"phone",modelValue:a(s).phone,"onUpdate:modelValue":e[3]||(e[3]=o=>a(s).phone=o),placeholder:"+234 801 234 5678",inputmode:"tel",pattern:"[0-9+\\\\s()-]*",onInput:U},null,8,["modelValue"]),l(u,{message:a(s).errors.phone},null,8,["message"])])]),t("div",K,[t("div",Q,[l(d,{for:"address"},{default:r(()=>e[13]||(e[13]=[m("Address")])),_:1,__:[13]}),F(t("textarea",{id:"address","onUpdate:modelValue":e[4]||(e[4]=o=>a(s).address=o),placeholder:"Street, city, state",class:"w-full rounded border px-3 py-2 mt-1",rows:"3"},null,512),[[j,a(s).address]]),e[14]||(e[14]=t("p",{class:"text-xs text-muted-foreground mt-1"},"Helps with delivery and invoices.",-1)),l(u,{message:a(s).errors.address},null,8,["message"])])]),t("div",R,[t("div",X,[l(d,{for:"location"},{default:r(()=>e[15]||(e[15]=[m("Location")])),_:1,__:[15]}),l(G,{modelValue:a(s).location,"onUpdate:modelValue":e[5]||(e[5]=o=>a(s).location=o)},null,8,["modelValue"])])]),t("div",Y,[t("div",Z,[l(d,{for:"profile_image"},{default:r(()=>e[16]||(e[16]=[m("Profile picture (optional)")])),_:1,__:[16]}),l(f,{id:"profile_image",type:"file",accept:"image/jpeg,image/png",onChange:w}),e[17]||(e[17]=t("p",{class:"text-xs text-muted-foreground mt-1"},"Max 2MB, JPG or PNG.",-1)),l(u,{message:a(s).errors.profile_image},null,8,["message"]),c.profileImageUrl?(I(),h("div",ee,[t("img",{src:c.profileImageUrl,alt:"Profile Image",class:"w-24 h-24 object-cover rounded-full"},null,8,se)])):D("",!0)])]),l(A,{class:"flex gap-2 justify-end"},{default:r(()=>[l(a(k),{type:"submit",variant:"default"},{default:r(()=>[m($(a(s).customerId?"Update Customer":"Create Customer"),1)]),_:1}),M(i.$slots,"footer")]),_:3})],32))}});export{me as _};
