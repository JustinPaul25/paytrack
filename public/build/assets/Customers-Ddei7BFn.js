import{d as F,v as j,m as b,s as P,W as T,c as _,o as a,w as d,a as u,b as s,e as r,f,u as o,g as B,x as D,y as M,h as m,F as N,r as S,t as l,S as z}from"./app-CSNJKDtd.js";import{_ as g}from"./index-C50IJlsn.js";import{_ as A}from"./Select.vue_vue_type_script_setup_true_lang-C0GTp_2q.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_0fdfc5f8_lang-CmKPS-pE.js";import{P as I,_ as U}from"./AppLayout.vue_vue_type_script_setup_true_lang-Bx68rTWI.js";import{_ as E,a as H}from"./CardContent.vue_vue_type_script_setup_true_lang-CcqRQlTQ.js";import{_ as O,a as W}from"./CardTitle.vue_vue_type_script_setup_true_lang-RYA9h8vR.js";import{M as q}from"./map-pin-DI4Z_naA.js";import{S as L}from"./shopping-bag-_dmRZeKl.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-BOAYIhHn.js";import"./createLucideIcon-VuP12aQD.js";import"./useForwardPropsEmits-Ca66-3Sr.js";import"./Teleport-BRO_E7-R.js";import"./RovingFocusGroup-CZJZi6xe.js";import"./VisuallyHidden-VUQZzZmz.js";import"./x-xsgJcVjd.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Efpe-ylk.js";const Q={class:"flex flex-col md:flex-row gap-4 items-start md:items-center justify-between mt-4 mb-2"},Y={class:"flex flex-wrap gap-2 items-center w-full md:w-auto"},G={key:0,class:"py-12 text-center"},J={class:"text-sm text-gray-600 mb-6"},K={key:0},R={key:1},X={key:1,class:"space-y-6"},Z={class:"flex items-start justify-between"},ss={key:0,class:"text-sm text-gray-500 mt-1"},ts={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},es={class:"space-y-1 text-sm"},os={class:"flex items-center gap-2"},as={key:0,class:"flex items-center gap-2"},ls={class:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-1"},rs={key:0,class:"text-sm text-gray-600"},is={key:1,class:"text-sm text-gray-400 italic"},ns={class:"border-t pt-4"},ds={class:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-1"},us={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ps={class:"bg-blue-50 p-3 rounded-lg"},ms={class:"text-lg font-bold text-blue-600"},cs={class:"bg-purple-50 p-3 rounded-lg"},fs={class:"flex items-center gap-2 mb-1"},_s={class:"text-lg font-bold text-purple-600"},xs={class:"bg-green-50 p-3 rounded-lg"},gs={class:"text-lg font-bold text-green-600"},vs={key:0,class:"border-t pt-4"},ys={class:"space-y-2"},bs={class:"flex items-center gap-3"},hs={class:"text-xs font-semibold text-gray-500 w-6"},ks={class:"text-sm font-medium"},ws={class:"flex items-center gap-4 text-sm"},Cs={class:"text-gray-600"},Ps={class:"font-semibold"},Ts={class:"text-gray-600"},Ns={key:1,class:"border-t pt-4"},Ss={key:2,class:"flex items-center justify-between mt-6"},$s={class:"text-sm text-gray-700"},Vs={class:"flex gap-2"},Js=F({__name:"Customers",setup(Fs){const i=j(),h=b(i.props.filters?i.props.filters:{}),p=b(h.value.search||""),n=b(h.value.duration||"all"),$=[{title:"Users",href:"/users"},{title:"Customers",href:"/users/customers"}],V=[{value:"all",label:"All Time"},{value:"month",label:"This Month"},{value:"year",label:"This Year"}];let v=null;P(p,c=>{v&&clearTimeout(v),v=setTimeout(()=>{k()},400)}),P(n,()=>{k()});function k(){T.get("/users/customers",{search:p.value||void 0,duration:n.value!=="all"?n.value:void 0},{preserveState:!0,replace:!0})}function x(c){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(c)}function w(c){T.get("/users/customers",{search:p.value||void 0,duration:n.value!=="all"?n.value:void 0,page:c},{preserveState:!0,replace:!0})}return(c,t)=>(a(),_(U,{breadcrumbs:$},{default:d(()=>[u(o(B),{title:"Customers"}),t[21]||(t[21]=s("div",{class:"flex items-center justify-between mb-6"},[s("h1",{class:"text-2xl font-bold"},"Customer Management")],-1)),s("div",Q,[s("div",Y,[D(s("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>p.value=e),type:"text",placeholder:"Search customers...",class:"rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 flex-1 md:flex-initial min-w-[200px]"},null,512),[[M,p.value]]),u(o(A),{modelValue:n.value,"onUpdate:modelValue":t[1]||(t[1]=e=>n.value=e),options:V,placeholder:"Duration",class:"w-full md:w-[150px]"},null,8,["modelValue"])])]),o(i).props.customers.data.length===0?(a(),r("div",G,[t[6]||(t[6]=s("div",{class:"text-xl font-semibold mb-2"},"No customers found",-1)),s("p",J,[p.value||n.value!=="all"?(a(),r("span",K," No customers match your current filters. ")):(a(),r("span",R," No customers in the system yet. "))]),p.value||n.value!=="all"?(a(),_(o(g),{key:0,variant:"outline",onClick:t[2]||(t[2]=e=>{p.value="",n.value="all"})},{default:d(()=>t[5]||(t[5]=[m(" Clear Filters ")])),_:1,__:[5]})):f("",!0)])):(a(),r("div",X,[(a(!0),r(N,null,S(o(i).props.customers.data,e=>(a(),_(E,{key:e.id,class:"hover:shadow-lg transition-shadow"},{default:d(()=>[u(O,null,{default:d(()=>[s("div",Z,[s("div",null,[u(W,{class:"text-xl"},{default:d(()=>[m(l(e.name),1)]),_:2},1024),e.company_name?(a(),r("p",ss,l(e.company_name),1)):f("",!0)]),u(o(z),{href:c.route("customers.edit",e.id)},{default:d(()=>[u(o(g),{variant:"outline",size:"sm"},{default:d(()=>t[7]||(t[7]=[m(" View Details ")])),_:1,__:[7]})]),_:2},1032,["href"])])]),_:2},1024),u(H,{class:"space-y-4"},{default:d(()=>[s("div",ts,[s("div",null,[t[10]||(t[10]=s("h3",{class:"text-sm font-semibold text-gray-700 mb-2"},"Contact Information",-1)),s("div",es,[s("div",os,[t[8]||(t[8]=s("span",{class:"text-gray-500"},"Email:",-1)),s("span",null,l(e.email),1)]),e.phone?(a(),r("div",as,[t[9]||(t[9]=s("span",{class:"text-gray-500"},"Phone:",-1)),s("span",null,l(e.phone),1)])):f("",!0)])]),s("div",null,[s("h3",ls,[u(o(q),{class:"h-4 w-4"}),t[11]||(t[11]=m(" Address "))]),e.address?(a(),r("p",rs,l(e.address),1)):(a(),r("p",is,"No address provided"))])]),s("div",ns,[s("h3",ds,[u(o(L),{class:"h-4 w-4"}),t[12]||(t[12]=m(" Purchase Statistics "))]),s("div",us,[s("div",ps,[t[13]||(t[13]=s("div",{class:"flex items-center gap-2 mb-1"},[s("span",{class:"text-blue-600 font-semibold"},"₱"),s("span",{class:"text-xs text-gray-600"},"Total Purchases")],-1)),s("p",ms,l(x(e.total_purchases)),1)]),s("div",cs,[s("div",fs,[u(o(I),{class:"h-4 w-4 text-purple-600"}),t[14]||(t[14]=s("span",{class:"text-xs text-gray-600"},"Total Invoices",-1))]),s("p",_s,l(e.total_invoices),1)]),s("div",xs,[t[15]||(t[15]=s("div",{class:"flex items-center gap-2 mb-1"},[s("span",{class:"text-green-600 font-semibold"},"₱"),s("span",{class:"text-xs text-gray-600"},"Average Order")],-1)),s("p",gs,l(e.total_invoices>0?x(e.total_purchases/e.total_invoices):x(0)),1)])])]),e.top_products&&e.top_products.length>0?(a(),r("div",vs,[t[17]||(t[17]=s("h3",{class:"text-sm font-semibold text-gray-700 mb-3"},"Top Purchases",-1)),s("div",ys,[(a(!0),r(N,null,S(e.top_products,(y,C)=>(a(),r("div",{key:C,class:"flex items-center justify-between p-2 bg-gray-50 rounded"},[s("div",bs,[s("span",hs,l(C+1)+".",1),s("span",ks,l(y.name),1)]),s("div",ws,[s("span",Cs,[t[16]||(t[16]=m("Qty: ")),s("span",Ps,l(y.quantity),1)]),s("span",Ts,l(x(y.amount)),1)])]))),128))])])):(a(),r("div",Ns,t[18]||(t[18]=[s("p",{class:"text-sm text-gray-400 italic"},"No purchase history available",-1)])))]),_:2},1024)]),_:2},1024))),128))])),o(i).props.customers.last_page>1?(a(),r("div",Ss,[s("div",$s," Showing "+l(o(i).props.customers.from)+" to "+l(o(i).props.customers.to)+" of "+l(o(i).props.customers.total)+" results ",1),s("div",Vs,[o(i).props.customers.prev_page_url?(a(),_(o(g),{key:0,variant:"outline",size:"sm",onClick:t[3]||(t[3]=e=>w(o(i).props.customers.current_page-1))},{default:d(()=>t[19]||(t[19]=[m(" Previous ")])),_:1,__:[19]})):f("",!0),o(i).props.customers.next_page_url?(a(),_(o(g),{key:1,variant:"outline",size:"sm",onClick:t[4]||(t[4]=e=>w(o(i).props.customers.current_page+1))},{default:d(()=>t[20]||(t[20]=[m(" Next ")])),_:1,__:[20]})):f("",!0)])])):f("",!0)]),_:1,__:[21]}))}});export{Js as default};
