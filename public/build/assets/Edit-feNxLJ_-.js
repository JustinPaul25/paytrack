import{d as k,v as A,p as f,q as V,W as h,c as p,o as d,w as r,a as t,b as m,u as s,g,t as C,f as S,h as a,S as c}from"./app-BJGGIgA8.js";import{_ as n}from"./index-riohrRak.js";import{_ as y}from"./AppLayout.vue_vue_type_script_setup_true_lang-6OmCq4tp.js";import{_ as w,a as x}from"./CardContent.vue_vue_type_script_setup_true_lang-DPB8yWHX.js";import{_ as T,a as D}from"./CardTitle.vue_vue_type_script_setup_true_lang-DvxTgNYv.js";import{_ as N}from"./Form.vue_vue_type_script_setup_true_lang-FZdLFRkl.js";import{S as l}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{_ as B}from"./Icon.vue_vue_type_script_setup_true_lang-DK3Ddpru.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_85568d9b_lang-CX_goT8l.js";import"./useForwardPropsEmits-CZzI8B5e.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-MrJHOVsW.js";import"./Teleport-MSIji786.js";import"./RovingFocusGroup-gSG5KO_4.js";import"./VisuallyHidden-BC0AEIfW.js";import"./DialogPortal-Dpb7jdpY.js";import"./x-BjkU5bBK.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DSD56j4j.js";import"./chevron-down-B83M1Caq.js";import"./chevron-right-CjvrEjDl.js";import"./InputError.vue_vue_type_script_setup_true_lang-YNpV2x5o.js";import"./Label.vue_vue_type_script_setup_true_lang-bOJZE9lv.js";import"./Input.vue_vue_type_script_setup_true_lang-o7QhFVaq.js";import"./PhoneInput.vue_vue_type_script_setup_true_lang--2OWr11_.js";import"./CardFooter.vue_vue_type_script_setup_true_lang-viGH8JM8.js";import"./LocationInput-DrNLtDsP.js";import"./vue-leaflet.es-BKYkO_Ao.js";import"./marker-icon-2x-1TirABJh.js";import"./marker-icon-B6h-nX3D.js";import"./marker-shadow-B9CpECYs.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SearchSelect.vue_vue_type_script_setup_true_lang-DjNxBFPF.js";import"./search-BUl39vHB.js";import"./philippines-BZpectg7.js";import"./square-pen-BALro00M.js";import"./calendar-C8vvPkHy.js";import"./check-CuaqBRk8.js";import"./chevron-left-Czs0_KEi.js";import"./circle-alert-C-R8aAcF.js";import"./piggy-bank-DQw4-LKJ.js";import"./circle-check-big-gvrLbzHW.js";import"./circle-check-BuF8fqTY.js";import"./trophy-B5vnFol2.js";import"./circle-x-C9HF6h3m.js";import"./clock-CUJ54ABb.js";import"./dollar-sign-BFWObhvv.js";import"./eye-off-dgfcsi04.js";import"./eye-BztToSRT.js";import"./loader-circle-ZvNwhMCX.js";import"./mail-tmHC_MiF.js";import"./map-pin-D8FvW8n7.js";import"./message-square-Cf895NaZ.js";import"./sun-Bomsfx5Q.js";import"./plus-CntaVqKq.js";import"./printer-_fQTJVRW.js";import"./shopping-bag-DsL7THBq.js";import"./trash-2-DcMzLwyY.js";import"./trending-up-CSTqz3kz.js";const P={class:"flex items-center justify-between mb-6"},R={class:"text-2xl font-bold"},Y={class:"flex gap-2"},Le=k({__name:"Edit",props:{customer:{},profile_image_url:{}},setup($){const u=$,_=A(),v=f(()=>{var e;const o=(e=_.props.auth)==null?void 0:e.userRoles;return Array.isArray(o)&&o.includes("Admin")}),i=f(()=>new URLSearchParams(window.location.search).get("from")==="users"),b=f(()=>i.value?[{title:"Users",href:"/users"},{title:"Edit User",href:`/customers/${u.customer.id}/edit?from=users`}]:[{title:"Customers",href:"/customers"},{title:"Edit Customer",href:`/customers/${u.customer.id}/edit`}]);V(()=>{v.value||l.fire({title:"Access Denied",text:"You do not have permission to edit customer data.",icon:"error",confirmButtonText:"Go Back",confirmButtonColor:"#8f5be8"}).then(()=>{h.visit("/customers")})});async function E(){(await l.fire({title:"Verify Customer?",text:`Are you sure you want to verify ${u.customer.name}? They will receive an email notification and be able to log in.`,icon:"question",showCancelButton:!0,confirmButtonColor:"#8f5be8",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, verify",cancelButtonText:"Cancel"})).isConfirmed&&h.post(`/customers/${u.customer.id}/approve`,{},{onSuccess:()=>{l.fire("Customer Verified","The customer has been verified and notified via email.","success")},onError:()=>{const e=_.props.flash,U=(e==null?void 0:e.error)??"Failed to verify customer.";l.fire("Error",U,"error")}})}return(o,e)=>v.value?(d(),p(y,{key:0,breadcrumbs:b.value},{default:r(()=>[t(s(g),{title:i.value?"Edit User":"Edit Customer"},null,8,["title"]),m("div",P,[m("h1",R,C(i.value?"Edit User":"Edit Customer"),1),m("div",Y,[o.customer.verified_at?S("",!0):(d(),p(s(n),{key:0,variant:"default",onClick:E,class:"bg-green-600 hover:bg-green-700"},{default:r(()=>[t(B,{name:"Check",class:"h-4 w-4 mr-2"}),e[0]||(e[0]=a(" Verify Customer "))]),_:1,__:[0]})),t(s(c),{href:o.route("customers.logs.show",o.customer.id)},{default:r(()=>[t(s(n),{variant:"outline"},{default:r(()=>[t(B,{name:"file-text",class:"h-4 w-4 mr-2"}),e[1]||(e[1]=a(" View Logs "))]),_:1,__:[1]})]),_:1},8,["href"])])]),t(w,null,{default:r(()=>[t(T,null,{default:r(()=>[t(D,null,{default:r(()=>[a(C(i.value?"Edit User":"Edit Customer"),1)]),_:1})]),_:1}),t(x,null,{default:r(()=>[t(N,{customer:o.customer,profileImageUrl:o.profile_image_url,fromUsers:i.value},{footer:r(()=>[t(s(c),{href:i.value?o.route("users.index"):o.route("customers.index")},{default:r(()=>[t(s(n),{type:"button",variant:"ghost"},{default:r(()=>e[2]||(e[2]=[a("Cancel")])),_:1,__:[2]})]),_:1},8,["href"])]),_:1},8,["customer","profileImageUrl","fromUsers"])]),_:1})]),_:1})]),_:1},8,["breadcrumbs"])):(d(),p(y,{key:1,breadcrumbs:b.value},{default:r(()=>[t(s(g),{title:"Access Denied"}),t(w,null,{default:r(()=>[t(x,{class:"py-12 text-center"},{default:r(()=>[e[4]||(e[4]=m("h3",{class:"text-lg font-semibold mb-2"},"Access Denied",-1)),e[5]||(e[5]=m("p",{class:"text-sm text-muted-foreground mb-6"}," You do not have permission to edit customer data. ",-1)),t(s(c),{href:o.route("customers.index")},{default:r(()=>[t(s(n),{variant:"default"},{default:r(()=>e[3]||(e[3]=[a("Go Back")])),_:1,__:[3]})]),_:1},8,["href"])]),_:1,__:[4,5]})]),_:1})]),_:1},8,["breadcrumbs"]))}});export{Le as default};
