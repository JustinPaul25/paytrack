import{d as B,v as F,m as b,s as P,W as T,c as _,o as l,w as p,a as u,b as t,e as n,f,u as o,g as D,x as M,y as A,h as c,F as $,r as N,t as i,S as z}from"./app-CEhKJ09n.js";import{_ as x}from"./index-DDy6xMSo.js";import{_ as I}from"./Select.vue_vue_type_script_setup_true_lang-pnoe4ZD9.js";import"./LocationInput.vue_vue_type_style_index_0_scoped_85568d9b_lang-BX7_UtG3.js";import{P as U,_ as E}from"./AppLayout.vue_vue_type_script_setup_true_lang-DP5J-o3h.js";import{_ as H,a as O}from"./CardContent.vue_vue_type_script_setup_true_lang-CcR04WAx.js";import{_ as W,a as q}from"./CardTitle.vue_vue_type_script_setup_true_lang-UyguUcT6.js";import{M as L}from"./map-pin-CQ0nsbBl.js";import{S as Q}from"./shopping-bag-CipdUSly.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DcSblUwu.js";import"./useForwardPropsEmits-BqVmhJ7B.js";import"./Teleport-BwopUFce.js";import"./RovingFocusGroup-D6ZGXjiS.js";import"./chevron-down-NjHhClp-.js";import"./VisuallyHidden-Cv_WHr3c.js";import"./DialogPortal-Dn5cMPvX.js";import"./x-C1_ahknI.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-C1xkcekv.js";import"./circle-check-CS2zu9nk.js";import"./chevron-right-BebvM6nV.js";const Y={class:"flex flex-col md:flex-row gap-4 items-start md:items-center justify-between mt-4 mb-2"},G={class:"flex flex-wrap gap-2 items-center w-full md:w-auto"},J={key:0,class:"py-12 text-center"},K={class:"text-sm text-gray-600 mb-6"},R={key:0},X={key:1},Z={key:1,class:"space-y-6"},ss={class:"flex items-start justify-between"},ts={key:0,class:"text-sm text-gray-500 mt-1"},es={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},os={class:"space-y-1 text-sm"},as={class:"flex items-center gap-2"},ls={key:0,class:"flex items-center gap-2"},is={class:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-1"},rs={class:"text-sm text-gray-600"},ns={class:"border-t pt-4"},ds={class:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-1"},ps={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},us={class:"bg-blue-50 p-3 rounded-lg"},ms={class:"text-lg font-bold text-blue-600"},cs={class:"bg-purple-50 p-3 rounded-lg"},fs={class:"flex items-center gap-2 mb-1"},_s={class:"text-lg font-bold text-purple-600"},gs={class:"bg-green-50 p-3 rounded-lg"},xs={class:"text-lg font-bold text-green-600"},vs={key:0,class:"border-t pt-4"},ys={class:"space-y-2"},bs={class:"flex items-center gap-3"},hs={class:"text-xs font-semibold text-gray-500 w-6"},ks={class:"text-sm font-medium"},ws={class:"flex items-center gap-4 text-sm"},Cs={class:"text-gray-600"},Ps={class:"font-semibold"},Ts={class:"text-gray-600"},$s={key:1,class:"border-t pt-4"},Ns={key:2,class:"flex items-center justify-between mt-6"},Ss={class:"text-sm text-gray-700"},Vs={class:"flex gap-2"},Xs=B({__name:"Customers",setup(js){const r=F(),h=b(r.props.filters?r.props.filters:{}),m=b(h.value.search||""),d=b(h.value.duration||"all"),S=[{title:"Users",href:"/users"},{title:"Customers",href:"/users/customers"}],V=[{value:"all",label:"All Time"},{value:"month",label:"This Month"},{value:"year",label:"This Year"}];let v=null;P(m,a=>{v&&clearTimeout(v),v=setTimeout(()=>{k()},400)}),P(d,()=>{k()});function k(){T.get("/users/customers",{search:m.value||void 0,duration:d.value!=="all"?d.value:void 0},{preserveState:!0,replace:!0})}function g(a){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(a)}function j(a){const s=[];return a.address&&s.push(a.address),a.purok&&s.push(`Purok ${a.purok}`),a.barangay&&s.push(`Barangay ${a.barangay}`),a.city_municipality&&s.push(a.city_municipality),a.province&&s.push(a.province),s.length>0?s.join(", "):"No address provided"}function w(a){T.get("/users/customers",{search:m.value||void 0,duration:d.value!=="all"?d.value:void 0,page:a},{preserveState:!0,replace:!0})}return(a,s)=>(l(),_(E,{breadcrumbs:S},{default:p(()=>[u(o(D),{title:"Customers"}),s[21]||(s[21]=t("div",{class:"flex items-center justify-between mb-6"},[t("h1",{class:"text-2xl font-bold"},"Customer Management")],-1)),t("div",Y,[t("div",G,[M(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>m.value=e),type:"text",placeholder:"Search customers...",class:"rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 flex-1 md:flex-initial min-w-[200px]"},null,512),[[A,m.value]]),u(o(I),{modelValue:d.value,"onUpdate:modelValue":s[1]||(s[1]=e=>d.value=e),options:V,placeholder:"Duration",class:"w-full md:w-[150px]"},null,8,["modelValue"])])]),o(r).props.customers.data.length===0?(l(),n("div",J,[s[6]||(s[6]=t("div",{class:"text-xl font-semibold mb-2"},"No customers found",-1)),t("p",K,[m.value||d.value!=="all"?(l(),n("span",R," No customers match your current filters. ")):(l(),n("span",X," No customers in the system yet. "))]),m.value||d.value!=="all"?(l(),_(o(x),{key:0,variant:"outline",onClick:s[2]||(s[2]=e=>{m.value="",d.value="all"})},{default:p(()=>s[5]||(s[5]=[c(" Clear Filters ")])),_:1,__:[5]})):f("",!0)])):(l(),n("div",Z,[(l(!0),n($,null,N(o(r).props.customers.data,e=>(l(),_(H,{key:e.id,class:"hover:shadow-lg transition-shadow"},{default:p(()=>[u(W,null,{default:p(()=>[t("div",ss,[t("div",null,[u(q,{class:"text-xl"},{default:p(()=>[c(i(e.name),1)]),_:2},1024),e.company_name?(l(),n("p",ts,i(e.company_name),1)):f("",!0)]),u(o(z),{href:a.route("customers.edit",e.id)},{default:p(()=>[u(o(x),{variant:"outline",size:"sm"},{default:p(()=>s[7]||(s[7]=[c(" View Details ")])),_:1,__:[7]})]),_:2},1032,["href"])])]),_:2},1024),u(O,{class:"space-y-4"},{default:p(()=>[t("div",es,[t("div",null,[s[10]||(s[10]=t("h3",{class:"text-sm font-semibold text-gray-700 mb-2"},"Contact Information",-1)),t("div",os,[t("div",as,[s[8]||(s[8]=t("span",{class:"text-gray-500"},"Email:",-1)),t("span",null,i(e.email),1)]),e.phone?(l(),n("div",ls,[s[9]||(s[9]=t("span",{class:"text-gray-500"},"Phone:",-1)),t("span",null,i(e.phone),1)])):f("",!0)])]),t("div",null,[t("h3",is,[u(o(L),{class:"h-4 w-4"}),s[11]||(s[11]=c(" Address "))]),t("p",rs,i(j(e)),1)])]),t("div",ns,[t("h3",ds,[u(o(Q),{class:"h-4 w-4"}),s[12]||(s[12]=c(" Purchase Statistics "))]),t("div",ps,[t("div",us,[s[13]||(s[13]=t("div",{class:"flex items-center gap-2 mb-1"},[t("span",{class:"text-blue-600 font-semibold"},"₱"),t("span",{class:"text-xs text-gray-600"},"Total Purchases")],-1)),t("p",ms,i(g(e.total_purchases)),1)]),t("div",cs,[t("div",fs,[u(o(U),{class:"h-4 w-4 text-purple-600"}),s[14]||(s[14]=t("span",{class:"text-xs text-gray-600"},"Total Invoices",-1))]),t("p",_s,i(e.total_invoices),1)]),t("div",gs,[s[15]||(s[15]=t("div",{class:"flex items-center gap-2 mb-1"},[t("span",{class:"text-green-600 font-semibold"},"₱"),t("span",{class:"text-xs text-gray-600"},"Average Order")],-1)),t("p",xs,i(e.total_invoices>0?g(e.total_purchases/e.total_invoices):g(0)),1)])])]),e.top_products&&e.top_products.length>0?(l(),n("div",vs,[s[17]||(s[17]=t("h3",{class:"text-sm font-semibold text-gray-700 mb-3"},"Top Purchases",-1)),t("div",ys,[(l(!0),n($,null,N(e.top_products,(y,C)=>(l(),n("div",{key:C,class:"flex items-center justify-between p-2 bg-gray-50 rounded"},[t("div",bs,[t("span",hs,i(C+1)+".",1),t("span",ks,i(y.name),1)]),t("div",ws,[t("span",Cs,[s[16]||(s[16]=c("Qty: ")),t("span",Ps,i(y.quantity),1)]),t("span",Ts,i(g(y.amount)),1)])]))),128))])])):(l(),n("div",$s,s[18]||(s[18]=[t("p",{class:"text-sm text-gray-400 italic"},"No purchase history available",-1)])))]),_:2},1024)]),_:2},1024))),128))])),o(r).props.customers.last_page>1?(l(),n("div",Ns,[t("div",Ss," Showing "+i(o(r).props.customers.from)+" to "+i(o(r).props.customers.to)+" of "+i(o(r).props.customers.total)+" results ",1),t("div",Vs,[o(r).props.customers.prev_page_url?(l(),_(o(x),{key:0,variant:"outline",size:"sm",onClick:s[3]||(s[3]=e=>w(o(r).props.customers.current_page-1))},{default:p(()=>s[19]||(s[19]=[c(" Previous ")])),_:1,__:[19]})):f("",!0),o(r).props.customers.next_page_url?(l(),_(o(x),{key:1,variant:"outline",size:"sm",onClick:s[4]||(s[4]=e=>w(o(r).props.customers.current_page+1))},{default:p(()=>s[20]||(s[20]=[c(" Next ")])),_:1,__:[20]})):f("",!0)])])):f("",!0)]),_:1,__:[21]}))}});export{Xs as default};
