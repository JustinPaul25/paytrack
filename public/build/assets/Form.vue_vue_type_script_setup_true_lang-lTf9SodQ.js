import{d as D,G,p as U,s as C,e as N,o as w,b as a,a as t,w as i,h as n,u as s,x as A,y as L,f as T,l as k,t as z,H as E}from"./app-qA0CnBWe.js";import{_ as d}from"./InputError.vue_vue_type_script_setup_true_lang-JMI41Gv9.js";import{_ as m}from"./Label.vue_vue_type_script_setup_true_lang-BTmEbTpp.js";import{_ as c}from"./Input.vue_vue_type_script_setup_true_lang-DxqBADUE.js";import{_ as J}from"./PhoneInput.vue_vue_type_script_setup_true_lang-DoCINzIz.js";import{_ as q}from"./index-DKsLgjKN.js";import{_ as H}from"./CardFooter.vue_vue_type_script_setup_true_lang-DnKrTvmp.js";import W from"./LocationInput-BjO-o0kg.js";import{_ as g}from"./SearchSelect.vue_vue_type_script_setup_true_lang-M45vxIRc.js";import{g as K,a as Q,p as R}from"./philippines-BZpectg7.js";const Y={class:"flex gap-4"},Z={class:"flex-1"},ee={class:"flex gap-4"},oe={class:"flex-1"},se={class:"flex gap-4"},te={class:"flex-1"},ae={class:"flex gap-4"},le={class:"flex-1"},ie={class:"flex gap-4"},re={class:"flex-1"},ne={class:"flex gap-4"},me={class:"flex-1"},de={class:"flex gap-4"},ue={class:"flex-1"},pe={class:"flex gap-4"},ce={class:"flex-1"},fe={class:"flex gap-4"},ge={class:"flex-1"},_e={class:"flex gap-4"},ye={class:"flex-1"},ve={key:0,class:"mt-2"},xe=["src"],Xe=D({__name:"Form",props:{customer:Object,profileImageUrl:String},setup(f){var _,y,v,x,b,V,S,h,P;const r=f,F=()=>{var u;if((u=r.customer)!=null&&u.location){const e=r.customer.location;if(typeof e=="string")try{return JSON.parse(e)}catch{return{lat:0,lng:0}}else if(typeof e=="object"&&e!==null){const l=parseFloat(e.lat),p=parseFloat(e.lng);if(!isNaN(l)&&!isNaN(p))return{lat:l,lng:p}}}return{lat:0,lng:0}},o=G({name:((_=r.customer)==null?void 0:_.name)||"",company_name:((y=r.customer)==null?void 0:y.company_name)||"",email:((v=r.customer)==null?void 0:v.email)||"",phone:((x=r.customer)==null?void 0:x.phone)||"",address:((b=r.customer)==null?void 0:b.address)||"",barangay:((V=r.customer)==null?void 0:V.barangay)||"",city_municipality:((S=r.customer)==null?void 0:S.city_municipality)||"",province:((h=r.customer)==null?void 0:h.province)||"",profile_image:null,customerId:((P=r.customer)==null?void 0:P.id)||null,location:F()}),X=R,B=U(()=>K(o.province)),I=U(()=>Q(o.city_municipality));C(()=>o.province,()=>{o.city_municipality="",o.barangay=""}),C(()=>o.city_municipality,()=>{o.barangay=""});function $(u){const e=u.target;if(e.files&&e.files.length>0){const l=e.files[0],p=["image/jpeg","image/png"].includes(l.type),O=l.size<=2*1024*1024;if(!p||!O){o.profile_image=null,e.value="";const j=p?"File is too large. Max size is 2MB.":"Please select a JPG or PNG image.";window.alert(j);return}o.profile_image=l}else o.profile_image=null}function M(){o.customerId?o.post(route("customers.update",o.customerId),{forceFormData:!0,onSuccess:()=>o.reset("profile_image")}):o.post(route("customers.store"),{forceFormData:!0,onSuccess:()=>o.reset("profile_image")})}return(u,e)=>(w(),N("form",{onSubmit:E(M,["prevent"]),class:"space-y-6",enctype:"multipart/form-data"},[a("div",Y,[a("div",Z,[t(m,{for:"name"},{default:i(()=>e[9]||(e[9]=[n("Full name *")])),_:1,__:[9]}),t(c,{id:"name",modelValue:s(o).name,"onUpdate:modelValue":e[0]||(e[0]=l=>s(o).name=l),placeholder:"e.g., Aisha Bello",required:""},null,8,["modelValue"]),e[10]||(e[10]=a("p",{class:"text-xs text-muted-foreground mt-1"},"This is the customer’s name.",-1)),t(d,{message:s(o).errors.name},null,8,["message"])])]),a("div",ee,[a("div",oe,[t(m,{for:"company_name"},{default:i(()=>e[11]||(e[11]=[n("Company (optional)")])),_:1,__:[11]}),t(c,{id:"company_name",modelValue:s(o).company_name,"onUpdate:modelValue":e[1]||(e[1]=l=>s(o).company_name=l),placeholder:"e.g., Bright Ventures Ltd."},null,8,["modelValue"]),e[12]||(e[12]=a("p",{class:"text-xs text-muted-foreground mt-1"},"Add if this customer represents a company.",-1)),t(d,{message:s(o).errors.company_name},null,8,["message"])])]),a("div",se,[a("div",te,[t(m,{for:"email"},{default:i(()=>e[13]||(e[13]=[n("Email address *")])),_:1,__:[13]}),t(c,{id:"email",modelValue:s(o).email,"onUpdate:modelValue":e[2]||(e[2]=l=>s(o).email=l),type:"email",placeholder:"name@company.com",required:""},null,8,["modelValue"]),e[14]||(e[14]=a("p",{class:"text-xs text-muted-foreground mt-1"},"We’ll use this to send receipts.",-1)),t(d,{message:s(o).errors.email},null,8,["message"])])]),a("div",ae,[a("div",le,[t(m,{for:"phone"},{default:i(()=>e[15]||(e[15]=[n("Phone number (optional)")])),_:1,__:[15]}),t(J,{id:"phone",modelValue:s(o).phone,"onUpdate:modelValue":e[3]||(e[3]=l=>s(o).phone=l),placeholder:"XXXXXXXXXX"},null,8,["modelValue"]),e[16]||(e[16]=a("p",{class:"text-xs text-muted-foreground mt-1"},"Enter 10-digit Philippine mobile number.",-1)),t(d,{message:s(o).errors.phone},null,8,["message"])])]),a("div",ie,[a("div",re,[t(m,{for:"address"},{default:i(()=>e[17]||(e[17]=[n("Street Address (Optional)")])),_:1,__:[17]}),A(a("textarea",{id:"address","onUpdate:modelValue":e[4]||(e[4]=l=>s(o).address=l),placeholder:"House/Unit number, Street name",class:"w-full rounded border px-3 py-2 mt-1",rows:"2"},null,512),[[L,s(o).address]]),e[18]||(e[18]=a("p",{class:"text-xs text-muted-foreground mt-1"},"Additional address details if needed.",-1)),t(d,{message:s(o).errors.address},null,8,["message"])])]),a("div",ne,[a("div",me,[t(m,{for:"province"},{default:i(()=>e[19]||(e[19]=[n("Province")])),_:1,__:[19]}),t(g,{"model-value":s(o).province,options:s(X),placeholder:"Select province",searchPlaceholder:"Search province...","onUpdate:modelValue":e[5]||(e[5]=l=>s(o).province=String(l??""))},null,8,["model-value","options"]),t(d,{message:s(o).errors.province},null,8,["message"])])]),a("div",de,[a("div",ue,[t(m,{for:"city_municipality"},{default:i(()=>e[20]||(e[20]=[n("City/Municipality")])),_:1,__:[20]}),t(g,{"model-value":s(o).city_municipality,options:B.value,placeholder:"Select city or municipality",searchPlaceholder:"Search city or municipality...",disabled:!s(o).province,"onUpdate:modelValue":e[6]||(e[6]=l=>s(o).city_municipality=String(l??""))},null,8,["model-value","options","disabled"]),t(d,{message:s(o).errors.city_municipality},null,8,["message"])])]),a("div",pe,[a("div",ce,[t(m,{for:"barangay"},{default:i(()=>e[21]||(e[21]=[n("Barangay")])),_:1,__:[21]}),t(g,{"model-value":s(o).barangay,options:I.value,placeholder:"Select barangay",searchPlaceholder:"Search barangay...",disabled:!s(o).city_municipality,"onUpdate:modelValue":e[7]||(e[7]=l=>s(o).barangay=String(l??""))},null,8,["model-value","options","disabled"]),t(d,{message:s(o).errors.barangay},null,8,["message"])])]),a("div",fe,[a("div",ge,[t(m,{for:"location"},{default:i(()=>e[22]||(e[22]=[n("Location")])),_:1,__:[22]}),t(W,{modelValue:s(o).location,"onUpdate:modelValue":e[8]||(e[8]=l=>s(o).location=l)},null,8,["modelValue"])])]),a("div",_e,[a("div",ye,[t(m,{for:"profile_image"},{default:i(()=>e[23]||(e[23]=[n("Profile picture (optional)")])),_:1,__:[23]}),t(c,{id:"profile_image",type:"file",accept:"image/jpeg,image/png",onChange:$}),e[24]||(e[24]=a("p",{class:"text-xs text-muted-foreground mt-1"},"Max 2MB, JPG or PNG.",-1)),t(d,{message:s(o).errors.profile_image},null,8,["message"]),f.profileImageUrl?(w(),N("div",ve,[a("img",{src:f.profileImageUrl,alt:"Profile Image",class:"w-24 h-24 object-cover rounded-full"},null,8,xe)])):T("",!0)])]),t(H,{class:"flex gap-2 justify-end"},{default:i(()=>[t(s(q),{type:"submit",variant:"default"},{default:i(()=>[n(z(s(o).customerId?"Update Customer":"Create Customer"),1)]),_:1}),k(u.$slots,"footer")]),_:3})],32))}});export{Xe as _};
